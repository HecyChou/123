(function(e){function t(t){for(var n,a,r=t[0],s=t[1],l=t[2],d=0,p=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&p.push(c[a][0]),c[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,a=1;a<o.length;a++){var s=o[a];0!==c[s]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},c={app:0},i=[];function a(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"73efe6a3"}[e]+".js"}function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var t=[],o=c[e];if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((function(t,n){o=c[e]=[t,n]}));t.push(o[2]=n);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=a(e);var l=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(d);var o=c[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,o[1](l)}c[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0dca":function(e,t,o){},"10e9":function(e,t,o){},1136:function(e,t,o){},"13d0":function(e,t,o){"use strict";o("6b0f")},"1ddc":function(e,t,o){"use strict";o("48d4")},"2bec":function(e,t,o){},"2c41":function(e,t,o){},"31f2":function(e,t,o){},3356:function(e,t,o){"use strict";o("77e3")},"44b0":function(e,t,o){"use strict";o("67a1")},"48d4":function(e,t,o){},"56d7":function(t,o,n){"use strict";n.r(o);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),a={key:0,id:"nav"};function r(e,t,o,n,i,r){var s=Object(c["resolveComponent"])("TopHeader"),l=Object(c["resolveComponent"])("router-view");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[n.showHeader?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createVNode"])(s)])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(l,null,{default:Object(c["withCtx"])((function(t){var o=t.Component;return[(Object(c["openBlock"])(),Object(c["createBlock"])(c["KeepAlive"],null,[e.$route.meta.keepAlive?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["resolveDynamicComponent"])(o),{key:0})):Object(c["createCommentVNode"])("",!0)],1024)),e.$route.meta.keepAlive?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["resolveDynamicComponent"])(o),{key:0}))]})),_:1})],64)}var s=n("3835"),l=(n("ac1f"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("d3b7"),n("159b"),n("1276"),n("498a"),n("2ca0"),n("00b4"),n("e9c4"),function(e){return Object(c["pushScopeId"])("data-v-65e08683"),e=e(),Object(c["popScopeId"])(),e}),d={class:"hd"},u={class:"wrap"},p={class:"hd-main"},m={class:"logo"},b=["src"],f=l((function(){return Object(c["createElementVNode"])("div",{class:"logo-name"},"isionOn",-1)})),h=l((function(){return Object(c["createElementVNode"])("div",{class:"nav"},[Object(c["createElementVNode"])("a",{href:"https://pub.visionon.cn"},"首页 "),Object(c["createTextVNode"])(" | "),Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/topics/help/"}," 帮助")],-1)}));function O(e,t,o,n,i,a){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",d,[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("h1",m,[Object(c["createElementVNode"])("img",{src:this.baseurl+"v-logo-w.png",alt:"V"},null,8,b),f]),h])])])}var j={name:"TopHeader",props:{msg:String}},g=(n("8604"),n("6b0d")),v=n.n(g);const k=v()(j,[["render",O],["__scopeId","data-v-65e08683"]]);var V=k,w=n("5502"),y=n("6c02"),N=(n("4d90"),n("8237")),C=n.n(N);function x(e){var t=Math.round(new Date/1e3)-e,o=t>0?"前":"后";t=Math.abs(t);for(var n=["年","个月","星期","天","小时","分钟","秒"],c=[31536e3,2592e3,604800,86400,3600,60,1],i=0;i<7;i++){var a=Math.floor(t/c[i]);if(0!=a)return a+n[i]+o}return"刚"}function _(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}function E(e){null==e&&(e=12);var t=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),o=C()(t+new Date).substring(0,e).toString();return o}function B(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getFullYear()).substring(2),c=String(e.getHours()+1).padStart(2,"0");return n+o+t+c}var S={beautifytime:x,setcliptext:_,uuid:E,datetostr:B};function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=o.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function $(e){var t={};return document.cookie.split(";").forEach((function(e){var o=e.split("="),n=Object(s["a"])(o,2),c=n[0],i=n[1];t[c.trim()]=i})),t[e]}var D={name:"App",setup:function(){var e=Object(y["c"])(),t=Object(w["b"])(),o=Object(c["computed"])({get:function(){var t=e.currentRoute.value.path;return!(t.startsWith("/v")||t.startsWith("/s/")||t.startsWith("/r/")||t.startsWith("/p/")||t.startsWith("/clipboard")||t.startsWith("/home/"))}});/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?t.state.isMobile=!0:t.state.isMobile=!1,1==z("vmobile")&&(t.state.isMobile=!0),/MicroMessenger/i.test(window.navigator.userAgent)&&(t.state.isInWeiXin=!0),self!=top&&(t.state.isInFrame=!0),1==z("viframe")&&(t.state.isInFrame=!0),t.state.isInFrame&&(t.state.isMobile=!0),window.location.pathname.startsWith("/r/")&&(t.state.isEditMode=!1,t.state.isReadShare=!0);var n=z("view");null!=n&&(t.state.isEditMode=!1);var i=$("v_tags");"grey"==i&&(document.cookie="v_tags=grey;domain=.visionon.cn;path=/;"),"delgrey"==i&&(document.cookie="v_tags=;max-age=0;domain=.visionon.cn;path=/;");var a={u:"",l:"",c:"",r:"",settings:{}},r=z("l"),s=z("c"),l=z("r");null==r&&(r=$("v_l")),null==s&&(s=$("v_c")),null==l&&(l=$("v_r"));var d=localStorage.getItem("V_UC"),u=S.datetostr()+S.uuid(8);return null==d||""==d?(a={u:u,l:null!=r?r:"",c:null!=s?s:"",r:null!=l?l:"",settings:{}},localStorage.setItem("V_UC",JSON.stringify(a))):(a=JSON.parse(d),null!=a.u&&""!=a.u||(a.u=u),null!=a.l&&""!=a.l||(a.l=null!=r?r:""),null!=a.c&&""!=a.c||(a.c=null!=s?s:""),null!=a.r&&""!=a.r||(a.r=null!=l?l:""),"undefined"!=typeof a.settings&&null!=a.settings||(a.settings={}),localStorage.setItem("V_UC",JSON.stringify(a))),t.state.userconfig=a,{router:e,store:t,showHeader:o}},components:{TopHeader:V}};n("9fd2");const M=v()(D,[["render",r]]);var T=M,I=(n("3ca3"),n("ddb0"),function(e){return Object(c["pushScopeId"])("data-v-a450ab50"),e=e(),Object(c["popScopeId"])(),e}),L={class:"logo"},R=["src"],U=I((function(){return Object(c["createElementVNode"])("span",{class:"logo-name"}," isionOn 不仅是一个绘图工具",-1)})),A={class:"content"},H=I((function(){return Object(c["createElementVNode"])("p",null,null,-1)})),F=I((function(){return Object(c["createElementVNode"])("p",null,"VisionOn 北京大象思维科技 官方版权所有 ©2022",-1)})),P=I((function(){return Object(c["createElementVNode"])("p",null,"京ICP备2022021400号-1",-1)})),W=I((function(){return Object(c["createElementVNode"])("p",null,"Contact at service©visionon.com",-1)})),q=I((function(){return Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/topics/help/"}," 使用说明",-1)}));function J(e,t,o,n,i,a){var r=this,s=Object(c["resolveComponent"])("el-col"),l=Object(c["resolveComponent"])("el-menu-item"),d=Object(c["resolveComponent"])("el-menu"),u=Object(c["resolveComponent"])("el-row"),p=Object(c["resolveComponent"])("el-header"),m=Object(c["resolveComponent"])("Content"),b=Object(c["resolveComponent"])("el-footer"),f=Object(c["resolveComponent"])("el-container");return Object(c["openBlock"])(),Object(c["createBlock"])(f,{class:"common-layout"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{style:{"margin-top":"5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{span:2}),Object(c["createVNode"])(s,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h1",L,[Object(c["createElementVNode"])("img",{src:r.baseurl+"v-logo-w.png",alt:"V"},null,8,R),U])]})),_:1}),Object(c["createVNode"])(s,{span:6,style:{"text-align":"right"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(d,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",ellipsis:"false",onSelect:e.handleSelect},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{index:"1"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("VisionOn")]})),_:1}),Object(c["createVNode"])(l,{index:"3",onClick:t[0]||(t[0]=function(e){return n.router.push("/v/")})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("开始使用")]})),_:1})]})),_:1},8,["onSelect"])]})),_:1}),Object(c["createVNode"])(s,{span:2})]})),_:1})]})),_:1}),Object(c["createVNode"])(m,{content:n.router.currentRoute.value.params.content},null,8,["content"]),Object(c["createVNode"])(b,{class:"footer"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",A,[H,F,P,W,Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("a",{href:"#",onClick:t[1]||(t[1]=function(e){return n.router.push("https://pub.visionon.cn/support/user-license/")})},"用户协议 "),Object(c["createTextVNode"])(" | "),Object(c["createElementVNode"])("a",{href:"#",onClick:t[2]||(t[2]=function(e){return n.router.push("https://pub.visionon.cn/support/privacy/")})},"隐私协议 "),Object(c["createTextVNode"])(" | "),q,Object(c["createTextVNode"])(" | "),Object(c["createElementVNode"])("a",{href:"/v/",onClick:t[3]||(t[3]=function(e){return n.router.push("/signin")})},"进入应用 ")])])]})),_:1})]})),_:1})}var X=n("ade3"),Y=(n("b0c0"),function(e){return Object(c["pushScopeId"])("data-v-d404b060"),e=e(),Object(c["popScopeId"])(),e}),K={class:"logo"},G=["src"],Q=Y((function(){return Object(c["createElementVNode"])("span",{class:"logo-name"}," 更是你随时在线的思维和信息整理工具",-1)})),Z=["src"];function ee(e,t,o,n,i,a){var r=this,s=Object(c["resolveComponent"])("el-col"),l=Object(c["resolveComponent"])("el-image"),d=Object(c["resolveComponent"])("el-row"),u=Object(c["resolveComponent"])("el-main");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,["home"==o.content?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:0,class:"home"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(d,{style:{"margin-top":"2em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{span:2}),Object(c["createVNode"])(s,{span:18,offset:0},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{src:"/img/demo-software-1.jpg",style:{"border-radius":"8px"}})]})),_:1})]})),_:1}),Object(c["createVNode"])(d,{style:{"margin-top":"2em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{span:2}),Object(c["createVNode"])(s,{span:12},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h1",K,[Object(c["createElementVNode"])("img",{src:r.baseurl+"v-logo-w.png",alt:"V"},null,8,G),Q])]})),_:1})]})),_:1}),Object(c["createVNode"])(d,{style:{"margin-top":"2em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{span:2}),Object(c["createVNode"])(s,{span:8},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{src:"/img/concept-g3cd03218d_1920.jpg",style:{"border-radius":"8px"}})]})),_:1}),Object(c["createVNode"])(s,{span:1}),Object(c["createVNode"])(s,{span:1}),Object(c["createVNode"])(s,{span:8},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{src:"/img/pexels-katerina-holmes-5905931.jpg",style:{"border-radius":"8px"}})]})),_:1})]})),_:1})]})),_:1})):Object(c["createCommentVNode"])("",!0),"home"!=o.content?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:1,class:"home"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(d,{style:{"margin-top":"2em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{span:6}),Object(c["createVNode"])(s,{span:12,offset:0},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("embed",{style:{border:"none"},src:a.contenturl},null,8,Z)]})),_:1})]})),_:1})]})),_:1})):Object(c["createCommentVNode"])("",!0)],64)}var te,oe=n("e2bc"),ne=n("7f58"),ce=n("5fef"),ie=n("03ae"),ae=(n("d9b6"),{name:"Content",props:{content:String},components:(te={},Object(X["a"])(te,oe["e"].name,oe["e"]),Object(X["a"])(te,ne["a"].name,ne["a"]),Object(X["a"])(te,ce["a"].name,ce["a"]),Object(X["a"])(te,"ElImage",ie["a"]),te),computed:{contenturl:function(){return"/"+this.content+".svg"}}});n("3356");const re=v()(ae,[["render",ee],["__scopeId","data-v-d404b060"]]);var se,le=re,de=n("fc2b"),ue={name:"Home",components:(se={Content:le},Object(X["a"])(se,ne["a"].name,ne["a"]),Object(X["a"])(se,ce["a"].name,ce["a"]),Object(X["a"])(se,oe["b"].name,oe["b"]),Object(X["a"])(se,oe["d"].name,oe["d"]),Object(X["a"])(se,oe["e"].name,oe["e"]),Object(X["a"])(se,oe["c"].name,oe["c"]),Object(X["a"])(se,"ElMenu",de["a"]),Object(X["a"])(se,"ElMenuItem",de["b"]),se),setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},mounted:function(){var e=this.$route.query,t=e.l,o=(e.c,!1);null!=t&&(o=!0),localStorage.getItem("token")?this.store.state.isLogin=!0:o&&this.router.push("/clipboard")}};n("5c80");const pe=v()(ue,[["render",J],["__scopeId","data-v-a450ab50"]]);var me=pe,be=(n("9911"),{key:0,id:"status-bar-wraper-mobile"}),fe={key:1,ref:"visioncontainer",class:"vision",style:{height:"100vh"}},he={id:"graphcontainer-moblie"},Oe={key:1,ref:"visioncontainer",class:"vision",style:{height:"100vh"}},je={id:"editorcontainer"},ge={class:"card-header"},ve=Object(c["createElementVNode"])("span",null,"图册列表",-1),ke={id:"search-panel"},Ve=["innerHTML"],we={key:0,class:"iconfont icon-liebiaomoshi2",style:{"font-size":"16px"},title:"详情列表"},ye={key:1,class:"iconfont icon-liebiao",style:{"font-size":"16px"},title:"简约列表"},Ne={class:"card-header"},Ce=Object(c["createElementVNode"])("span",null,"大纲/索引",-1),xe={id:"graph-container-wraper"},_e={id:"status-bar-wraper"},Ee={id:"graphcontainer"};function Be(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("SideOperator"),s=Object(c["resolveComponent"])("StatusBar"),l=Object(c["resolveComponent"])("Drawio"),d=Object(c["resolveComponent"])("font-awesome-icon"),u=Object(c["resolveComponent"])("pane"),p=Object(c["resolveComponent"])("DocList"),m=Object(c["resolveComponent"])("el-card"),b=Object(c["resolveComponent"])("OutlineView"),f=Object(c["resolveComponent"])("splitpanes");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[n.store.state.isMobile?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[n.store.state.isMobile&&!n.store.state.isInFrame?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",be,[Object(c["createVNode"])(r,{curdoc:n.router.currentRoute.value.params.doc},null,8,["curdoc"]),Object(c["createVNode"])(s,{curdoc:n.router.currentRoute.value.params.doc},null,8,["curdoc"])])):Object(c["createCommentVNode"])("",!0),n.store.state.isMobile?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",fe,[Object(c["createElementVNode"])("div",he,[Object(c["createVNode"])(l,{ref:"drawioVue",curdoc:n.router.currentRoute.value.params.doc,ver:n.router.currentRoute.value.params.ver,link:n.router.currentRoute.value.params.link,viewtype:n.router.currentRoute.value.name},null,8,["curdoc","ver","link","viewtype"])])],512)):Object(c["createCommentVNode"])("",!0)],64)):Object(c["createCommentVNode"])("",!0),n.store.state.isMobile?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Oe,[Object(c["createVNode"])(f,{class:"default-theme",onResize:t[12]||(t[12]=function(e){return a.panelresizing(e)}),onResized:t[13]||(t[13]=function(e){return a.panelresized(e)})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{size:i.panesize[0],"min-size":a.sidebarminsize,"max-size":a.sidebarmaxsize},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",{id:"sidebarcontainer",ref:"sidebarcontainer",onMouseover:t[3]||(t[3]=function(e){return a.popcloselistpane()})},[Object(c["createVNode"])(r,{isexpand:a.testexpand,viewmode:i.viewmode,onMouseover:t[0]||(t[0]=function(e){return a.popcloselistpane()})},null,8,["isexpand","viewmode"]),Object(c["createElementVNode"])("div",{class:"list-toggle-right",onClick:t[1]||(t[1]=function(e){return a.togglelistpanel()}),onMouseenter:t[2]||(t[2]=function(e){return a.popuplistpane()}),ref:"listexpanicon",title:"展开列表"},["m1"==i.viewmode&&0==i.islistpopup?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,icon:["fas","angle-double-right"]})):Object(c["createCommentVNode"])("",!0)],544)],544)]})),_:1},8,["size","min-size","max-size"]),Object(c["createVNode"])(u,{size:i.panesize[1],"min-size":"0",id:"list-outline-panel",onMouseleave:t[11]||(t[11]=function(e){return a.popcloselistpane()})},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",je,[Object(c["createVNode"])(f,{class:"default-theme",horizontal:"",style:{height:"100%"},onResized:t[10]||(t[10]=function(e){return a.outlineresized(e)})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{size:100-i.outlinesize,id:"doclistcardid"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{class:"box-card"},{header:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",ge,[ve,"m1"!=i.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:"list-toggle-left",onClick:t[4]||(t[4]=function(e){return a.togglelistpanel()}),ref:"listexpanicon",title:"折叠列表"},[Object(c["createVNode"])(d,{icon:["fas","angle-double-left"],style:{}})],512)):Object(c["createCommentVNode"])("",!0),1==i.islistpopup?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:"list-toggle-left",onClick:t[5]||(t[5]=function(e){return a.pinlistpane()}),ref:"listexpanicon",title:"固定列表"},[Object(c["createVNode"])(d,{icon:["fas","thumbtack"],style:{}})],512)):Object(c["createCommentVNode"])("",!0)])]})),default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",ke,[Object(c["createElementVNode"])("span",null,[Object(c["createVNode"])(d,{icon:["far","folder-open"]})]),Object(c["createElementVNode"])("span",{class:"list-folder",innerHTML:a.listtitle},null,8,Ve),Object(c["createElementVNode"])("span",{class:"list-expand",onClick:t[6]||(t[6]=function(e){return a.toggleliststyle_expand()})},[n.store.state.liststyle_expand?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",we)),n.store.state.liststyle_expand?(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",ye)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("span",{class:"list-sort",onClick:t[7]||(t[7]=function(e){return a.rotatesortlist()}),title:"文档排序"},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(i.sortmodetitle)+" ",1),Object(c["createVNode"])(d,{icon:["fas","sort"],style:{"font-size":"16px"}})])]),Object(c["createVNode"])(p)]})),_:1})]})),_:1},8,["size"]),Object(c["createVNode"])(u,{size:i.outlinesize,id:"outlinecardid"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{class:"box-card"},{header:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ne,[Ce,i.outlinesize<80?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:"outline-toggle",onClick:t[8]||(t[8]=function(e){return a.outlinesizejust("up")}),ref:"listexpanicon",title:"展开大纲"},[Object(c["createVNode"])(d,{icon:["fas","angle-double-up"],style:{}})],512)):Object(c["createCommentVNode"])("",!0),i.outlinesize>20?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:"outline-toggle",onClick:t[9]||(t[9]=function(e){return a.outlinesizejust("down")}),ref:"listexpanicon",title:"折叠大纲"},[Object(c["createVNode"])(d,{icon:["fas","angle-double-down"],style:{}})],512)):Object(c["createCommentVNode"])("",!0)])]})),default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:n.store.state.outlinerenderkey}))]})),_:1})]})),_:1},8,["size"])]})),_:1})])]})),_:1},8,["size"]),Object(c["createVNode"])(u,{size:i.panesize[2]},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",xe,[Object(c["createElementVNode"])("div",_e,[Object(c["createVNode"])(s,{curdoc:n.router.currentRoute.value.params.doc},null,8,["curdoc"])]),Object(c["createElementVNode"])("div",Ee,[(Object(c["openBlock"])(),Object(c["createBlock"])(l,{ref:"drawioVue",curdoc:n.router.currentRoute.value.params.doc,ver:n.router.currentRoute.value.params.ver,link:n.router.currentRoute.value.params.link,viewtype:n.router.currentRoute.value.name,key:n.store.state.drawrenderkey},null,8,["curdoc","ver","link","viewtype"]))])])]})),_:1},8,["size"])]})),_:1})],512))],64)}var Se=n("bc3a"),ze=n.n(Se),$e=(n("a434"),n("4e82"),n("3ef4")),De=Object(w["a"])({state:function(){return{isLogin:!1,isEditMode:!0,isReadShare:!1,isMobile:!1,isInFrame:!1,isInWeiXin:!1,drawrenderkey:1,outlinerenderkey:1,isMergingorLoading:!1,editorStatus:"ready",isSyncMode:!1,docNeedUpdate:!1,account:{},activedoc:{},listtype:"",listsortmode:"",liststyle_expand:!0,theme:"light",curdoc:"",sharelink:"",curfolder:"/",curfoldername:"",curfolderparentid:"",folderstatck:[],doclist:[],panel:{sidebarwidth:{width:"150px"},doclistwidth:{width:"350px"}},drawiovue:{},isDraftMode:!1,userconfig:{}}},mutations:{SETACCOUNTINFO:function(e,t){e.isLogin=t.islogin,e.account=t.account},ADDDOC:function(e,t){"recent"!=e.listtype&&"create"!=e.listtype||e.doclist.unshift(t)},MVDOCTOFOLDER:function(e,t){e.doclist.some((function(o,n){if(o.id==t.doc_id)return e.doclist.splice(n,1),!0}))},DELFOLDER:function(e,t){e.doclist.some((function(o,n){if(o.id==t)return e.doclist.splice(n,1),!0}))},MVDOCTORECYLE:function(e,t){e.doclist.some((function(o,n){if(o.id==t)return e.doclist.splice(n,1),!0}))},ACTIVEDOC:function(e,t){e.doclist.some((function(o,n){o.id==t?(o.active=!0,e.activedoc=o):o.active=!1}))},UPDATEDOCTITLE:function(e,t){e.doclist.some((function(e,o){if(e.id==t.id)return e.doc_title=t.doc_title,!0}))},SORTDOCLIST:function(e,t){null==t?t=e.listsortmode:e.listsortmode=t,e.doclist.sort((function(e,o){if("folder"==e.doc_type&&"vision"==o.doc_type)return-1;if("vision"==e.doc_type&&"folder"==o.doc_type)return 1;switch(t){case"create":return e.created_at>o.created_at?-1:1;case"update":return e.updated_at>o.updated_at?-1:1;case"char":return e.doc_title>o.doc_title?1:-1}return 0}))},SWITCHLIST:function(e,t){e.doclist=t},SWITCHTHEME:function(e,t){"dark"==t?(document.documentElement.setAttribute("theme","dark"),e.theme="dark"):(document.documentElement.setAttribute("theme",""),e.theme="light"),localStorage.setItem("vision.theme",e.theme)},ADDSHAREMELINK:function(e,t){var o=t,n=!1;e.doclist.some((function(e,t){if(e.id==o.doc_id)return n=!0,!0})),n?null!=o.success&&o.success("该文档已收藏，不用再次操作"):Ie.post("/api/docs/addsharemelink",o).then((function(e){null!=o.success&&o.success("收藏成功，已放入【与我共享】列表")})).catch((function(e){console.log("add share link error:",e.message)}))},REMOVESHAREMELINK:function(e,t){var o=t,n=!1;n||Ie.post("/api/docs/removesharemelink",o).then((function(t){0==t.data.status?alert("删除失败",t.data.message):e.doclist.some((function(t,n){if(t.id==o.doc_id)return e.doclist.splice(n,1),!0}))})).catch((function(e){alert("删除失败",e.message),console.log("remove share link error:",e.message)}))},DELFROMRECYLE:function(e,t){e.doclist.some((function(o,n){if(o.id==t)return e.doclist.splice(n,1),!0}))},RESTOREFROMRECYLE:function(e,t){e.doclist.some((function(o,n){if(o.id==t)return e.doclist.splice(n,1),!0}))},RESET:function(e){e.doclist={},e.account={},e.listtype=""},CHECKTOKEN:function(e){},DOCCHANGED:function(e,t){e.doclist.some((function(e,o){if(e.id==t.docid)return e.changed=t.changed,!0}))},TOGGLESYNMODE:function(e,t){e.isSyncMode=!e.isSyncMode},DOCNEEDUPDATESTATUS:function(e,t){e.docNeedUpdate=t},TOGGLEEDITMODE:function(e,t){e.isEditMode!=t.editmode&&(e.isEditMode=t.editmode),t.forcerender},CHANGESERSETTING:function(e,t){e.userconfig["settings"][t.key]=t.value,localStorage.setItem("V_UC",JSON.stringify(e.userconfig))}},actions:{setaccountinfo:function(e,t){e.commit("SETACCOUNTINFO",t)},adddoc:function(e,t){e.commit("ADDDOC",t),e.commit("SORTDOCLIST",null)},mvdoctofolder:function(e,t){e.commit("MVDOCTOFOLDER",t)},mvdoctorecyle:function(e,t){e.commit("MVDOCTORECYLE",t)},delfolder:function(e,t){e.commit("DELFOLDER",t)},delfromrecyle:function(e,t){e.commit("DELFROMRECYLE",t)},restorefromrecyle:function(e,t){e.commit("RESTOREFROMRECYLE",t)},activedoc:function(e,t){e.commit("ACTIVEDOC",t)},updatedoctitle:function(e,t){e.commit("UPDATEDOCTITLE",t),e.commit("SORTDOCLIST",null)},checktoken:function(e){e.commit("CHECKTOKEN")},docchanged:function(e,t){e.commit("DOCCHANGED",t)},doswitchlist:function(e,t){for(var o=t.listtype,n=t.doclist,c=this.state.activedoc.id,i=0;i<n.length;i++){n[i].isvisions="visions"==o,n[i].active=!1,n[i].id==c&&(n[i].active=!0,this.state.activedoc=n[i]),""==n[i].share_link.trim()&&(n[i].share_link="");var a="";a="/doc/"+n[i].id,"true"==localStorage.getItem(a+"/v_latest:changed")?n[i].changed=!0:n[i].changed=!1}e.commit("SWITCHLIST",n);var r=localStorage.getItem("vision-listsortmode");e.commit("SORTDOCLIST",r)},switchlist:function(e,t){var o=this,n=t.listtype,c=t.folder,i=t.folderlink,a=t.foldername,r=t.parent;if(this.state.listtype!=n||this.state.curfolder!=c)if(navigator.onLine){var s=o.state.listtype;o.state.listtype="loading";var l={listtype:n,parent:c,sharelink:i},d=(this.state.activedoc.id,"visions"==n?"/api/docs/visionslist":"/api/docs/list");Ie.get(d,{params:l}).then((function(e){o.state.listtype=n,o.state.curfolder=c,o.state.foldername=a,o.state.curfolderparentid=r,n==s&&o.state.folderstatck.length>0&&o.state.folderstatck[o.state.folderstatck.length-1].folderid!=c?o.state.folderstatck.push({folderid:c,foldername:a}):n!=s&&(o.state.folderstatck=[],o.state.folderstatck.push({folderid:"/",foldername:"/"}));var t=e.data.data,l=localStorage.getItem("vision.folders");l=null==l?{}:JSON.parse(l),l[n+"/"+c+"/"+i]=t,localStorage.setItem("vision.folders",JSON.stringify(l)),o.dispatch("doswitchlist",{listtype:n,doclist:t})})).catch((function(e){alert("切换列表失败，已恢复原列表，请稍后再试，错误原因:"+e.message),o.state.listtype=s,console.log(e.message)}))}else{var u=localStorage.getItem("vision.folders");if(null!=u){var p=JSON.parse(u),m=p[n+"/"+c+"/"+i];null!=m?(Object($e["a"])({message:"网络离线，本地缓存列表，请在网络恢复后同步",type:"warning",showClose:!0,duration:3e3}),o.state.listtype=n,o.state.curfolder=c,o.state.foldername=a,o.state.curfolderparentid=r,n==o.state.listtype?o.state.folderstatck.push({folderid:c,foldername:a}):(o.state.folderstatck=[],o.state.folderstatck.push({folderid:"/",foldername:"/"})),o.dispatch("doswitchlist",{listtype:n,doclist:m})):alert("网络离线状态，暂不能切换列表，请在网络恢复后切换")}}},switchtheme:function(e,t){e.commit("SWITCHTHEME",t)},switchtoparent:function(e){if("/"==this.state.curfolderparentid)this.state.folderstatck=[],this.dispatch("switchlist",{listtype:this.state.listtype,folder:"/",folderlink:"",foldername:"",parent:""});else{this.state.folderstatck.pop();var t=this.state.folderstatck.pop(),o=(t.folderid,t.folderid,this);o.dispatch("switchlist",{listtype:o.state.listtype,folder:t.folderid,folderlink:"",foldername:t.foldername,parent:this.state.folderstatck.length<=1?"/":o.state.folderstatck[this.state.folderstatck.length-1].folderid})}},sortdoclist:function(e,t){e.commit("SORTDOCLIST",t)},addsharemelink:function(e,t){e.commit("ADDSHAREMELINK",t)},removesharemelink:function(e,t){e.commit("REMOVESHAREMELINK",t)},reset:function(e){e.commit("RESET")},togglesynmode:function(e){e.commit("TOGGLESYNMODE")},toggleeditmode:function(e,t){e.commit("TOGGLEEDITMODE",t)},docneedupdatestatus:function(e,t){e.commit("DOCNEEDUPDATESTATUS",t)},opendoc:function(){},refreshtoken:function(e){var t={};Ie.post("/api/account/refreshtoken",t).then((function(t){if(0==t.data.status)that.errorMsg="更新Token失败("+t.data.message+")";else{localStorage.setItem("token",t.data.token),localStorage.setItem("nextrefresh",t.data.nextrefresh),document.cookie="token="+t.data.token+";domain=.visionon.cn;path=/;";var o={islogin:!0,account:t.data.account};e.commit("SETACCOUNTINFO",o)}}))},changeusersetting:function(e,t){e.commit("CHANGESERSETTING",t)}},modules:{}});function Me(e){var t={};return document.cookie.split(";").forEach((function(e){var o=e.split("="),n=Object(s["a"])(o,2),c=n[0],i=n[1];t[c.trim()]=i})),t[e]}var Te={};switch("production"){case"development":Te={"/api/":"http://test-api.caogao.online:8443","/ana/":"http://test-api.caogao.online:8443","/doc/":"http://test-doc.caogao.online:8443","/stat/":"http://test-doc.caogao.online:8443","/img/":"http://test-img.caogao.online:8443"};break;case"production":Te={"/api/":"https://api."+v_clientconfig.origin,"/ana/":"https://api."+v_clientconfig.origin,"/doc/":"https://doc."+v_clientconfig.origin,"/stat/":"https://doc."+v_clientconfig.origin,"/img/":"https://img."+v_clientconfig.origin};break}ze.a.interceptors.request.use((function(e){for(var t in Te)if(e.url.substr(0,t.length)==t){e.baseURL=Te[t];break}return localStorage.getItem("token")&&(e.headers.Authorization="Bearer "+localStorage.getItem("token")),"grey"==Me("v_tags")&&(e.headers.v_tags="grey"),e}),(function(e){return Promise.reject(e)}));var Ie=ze.a,Le=n("512e"),Re=(n("c1ea"),Object(c["createElementVNode"])("div",{id:"graph-editor-box"},null,-1)),Ue={key:0},Ae={key:1},He={key:2};function Fe(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("font-awesome-icon"),s=Object(c["resolveComponent"])("WangEditor"),l=Object(c["resolveComponent"])("el-drawer"),d=Object(c["resolveComponent"])("el-dialog"),u=Object(c["resolveDirective"])("drawerdragwidth"),p=Object(c["resolveDirective"])("drawerdragheight"),m=Object(c["resolveDirective"])("dialogdragsize");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Re,"rtl"==i.editorDirection?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ue,[Object(c["createVNode"])(l,{modelValue:i.editorVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.editorVisible=e}),"with-header":!1,draggable:!0,"append-to-body":!1,modal:!0,size:i.editorSize,"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!0,direction:i.editorDirection,"modal-class":"wangeditor-modal"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",{onClick:t[0]||(t[0]=function(e){return a.onckeditor_dockswitch()}),style:{position:"absolute",top:"20px",left:"5px","font-size":"1.2em",color:"#969eac"}},[Object(c["createVNode"])(r,{icon:["fas","angle-double-down"],style:{}})]),(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:i.wangeditorkey,modelValue:i.editorData,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.editorData=e}),onCkeditorupdate:t[2]||(t[2]=function(e){return a.onckeditor_update()})},null,8,["modelValue"]))]})),_:1},8,["modelValue","size","direction"])])),[[u]]):Object(c["createCommentVNode"])("",!0),"btt"==i.editorDirection?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ae,[Object(c["createVNode"])(l,{modelValue:i.editorVisible,"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.editorVisible=e}),"with-header":!1,draggable:!0,"append-to-body":!1,modal:!0,size:i.editorSize,"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!0,direction:i.editorDirection,"modal-class":"wangeditor-modal"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",{onClick:t[4]||(t[4]=function(e){return a.onckeditor_dockswitch()}),style:{position:"absolute",top:"20px",left:"5px","font-size":"1.2em",color:"#969eac"}},[Object(c["createVNode"])(r,{icon:["fas","angle-double-right"],style:{}})]),(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:i.wangeditorkey,modelValue:i.editorData,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.editorData=e}),onCkeditorupdate:t[6]||(t[6]=function(e){return a.onckeditor_update()})},null,8,["modelValue"]))]})),_:1},8,["modelValue","size","direction"])])),[[p]]):Object(c["createCommentVNode"])("",!0),"dlg"==i.editorDirection?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",He,[Object(c["createVNode"])(d,{modelValue:i.editorVisible,"onUpdate:modelValue":t[11]||(t[11]=function(e){return i.editorVisible=e}),"with-header":!1,draggable:!0,"append-to-body":!1,modal:!1,size:i.editorSize,style:{height:"60%"},"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!1,direction:i.editorDirection,"modal-class":"wangeditor-modal"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",{onClick:t[8]||(t[8]=function(e){return a.onckeditor_dockswitch()}),style:{position:"absolute",top:"20px",left:"3px"}},[Object(c["createVNode"])(r,{icon:["fas","window-restore"],style:{height:"1.2em",width:"1.2em",color:"#4e5a70"}})]),(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:i.wangeditorkey,modelValue:i.editorData,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.editorData=e}),onCkeditorupdate:t[10]||(t[10]=function(e){return a.onckeditor_update()})},null,8,["modelValue"]))]})),_:1},8,["modelValue","size","direction"])])),[[m]]):Object(c["createCommentVNode"])("",!0),Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(l,{modelValue:i.datagridVisible,"onUpdate:modelValue":t[12]||(t[12]=function(e){return i.datagridVisible=e}),"with-header":!1,draggable:!0,"append-to-body":!1,modal:!0,size:i.datagridSize,"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!0,direction:"rtl","modal-class":"wangeditor-modal"},null,8,["modelValue","size"])])),[[u]])],64)}n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("caad"),n("2532");var Pe={mounted:function(e,t,o,n){var c=e.querySelector(".el-drawer"),i=document.createElement("div");i.style.cssText="height: 100%;width: 5px;cursor: w-resize;position: absolute;left: 0;",c.append(i),i.onmousedown=function(e){document.body.style.userSelect="none",document.onmousemove=function(e){var t=document.body.clientWidth-e.pageX,o=.2*document.body.clientWidth,n=.8*document.body.clientWidth;t=t>n?n:t<o?o:t,c.style.width=t+"px"},document.onmouseup=function(e){document.body.clientWidth,e.pageX;document.body.style.userSelect="initial",document.onmousemove=null,document.onmouseup=null}}}},We={mounted:function(e,t,o,n){var c=e.querySelector(".el-drawer"),i=document.createElement("div");i.style.cssText="width:100%;height: 5px;cursor: n-resize;position: absolute;top: 0;",c.append(i),i.onmousedown=function(e){document.body.style.userSelect="none",document.onmousemove=function(e){var t=document.body.clientHeight-e.pageY,o=.2*document.body.clientHeight,n=.8*document.body.clientHeight;t=t>n?width80:t<o?o:t,c.style.height=t+"px"},document.onmouseup=function(e){document.body.clientHeight,e.pageY;document.body.style.userSelect="initial",document.onmousemove=null,document.onmouseup=null}}}},qe={mounted:function(e,t,o,n){var c=820,i=460,a=!1,r=0,s=0,l=e.querySelector(".el-dialog__header"),d=e.querySelector(".el-dialog");d.style.overflow="auto",l.style.cursor="move";var u=d.currentStyle||window.getComputedStyle(d,null),p=function(e){var t,o,n=e.clientX-l.offsetLeft,c=e.clientY-l.offsetTop;u.left.includes("%")?(t=+document.body.clientWidth*(+u.left.replace(/\[%]/g,"")/100),o=+document.body.clientHeight*(+u.top.replace(/\[%]/g,"")/100)):(t=+u.left.replace(/\px/g,""),o=+u.top.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-n,a=e.clientY-c;d.style.left="".concat(i+t,"px"),d.style.top="".concat(a+o,"px")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}};l.onmousedown=p,l.ondblclick=function(e){0==a?(d.clientHeight,r=d.clientWidth,s=d.style.marginTop,d.style.left=0,d.style.top=0,d.style.height="100VH",d.style.width="100VW",d.style.marginTop=0,a=!0,l.style.cursor="initial",l.onmousedown=null):(d.style.height="auto",d.style.width=r+"px",d.style.marginTop=s,a=!1,l.style.cursor="move",l.onmousedown=p)},d.onmousemove=function(t){t.clientX>d.offsetLeft+d.clientWidth-10||d.offsetLeft+10>t.clientX?d.style.cursor="w-resize":(d.style.cursor="default",d.onmousedown=null),d.onmousedown=function(t){var o=t.clientX,n=t.clientY,a=d.clientWidth,r=d.clientHeight,s=d.offsetLeft,l=d.offsetTop;d.style.userSelect="none";var u=e.scrollTop;o>s&&o<s+a&&n>l&&n<l+100||(document.onmousemove=function(e){e.preventDefault(),o>s&&o<s+10&&(o>e.clientX&&(d.style.width=a+2*(o-e.clientX)+"px"),o<e.clientX&&(d.clientWidth<c||(d.style.width=a-2*(e.clientX-o)+"px"))),o>s+a-10&&o<s+a&&(o>e.clientX&&(d.clientWidth<c||(d.style.width=a-2*(o-e.clientX)+"px")),o<e.clientX&&(d.style.width=a+2*(e.clientX-o)+"px")),u+n>l+r-20&&u+n<l+r&&(n>e.clientY&&(d.clientHeight<i||(d.style.height=r-2*(n-e.clientY)+"px")),n<e.clientY&&(d.style.height=r+2*(e.clientY-n)+"px"))},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null})}}}},Je={drawerdragwidth:Pe,drawerdragheight:We,dialogdragsize:qe},Xe=n("e762"),Ye=n("db9d"),Ke=n("cf2e"),Ge=n("3d6a"),Qe={style:{border:"1px solid #ccc",display:"flex","flex-direction":"column",height:"100%"}};function Ze(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("Toolbar"),s=Object(c["resolveComponent"])("Editor");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qe,[Object(c["createVNode"])(r,{style:{"border-bottom":"1px solid #ccc","flex-grow":"0"},editor:n.editorRef,defaultConfig:n.toolbarConfig,mode:n.mode},null,8,["editor","defaultConfig","mode"]),Object(c["createVNode"])(s,{style:{"overflow-y":"hidden","flex-grow":"1"},modelValue:n.valueHtml,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.valueHtml=e}),defaultConfig:n.editorConfig,mode:n.mode,onOnCreated:n.handleCreated,onOnChange:n.handleChange},null,8,["modelValue","defaultConfig","mode","onOnCreated","onOnChange"])])}n("560e");var et=n("4e15"),tt=n("cb23"),ot=n("a485"),nt=n.n(ot),ct={props:["modelValue"],components:{Editor:et["a"],Toolbar:et["b"]},emits:["update:modelValue","ckeditorupdate"],setup:function(e,t){tt["Boot"].registerModule(nt.a);var o=Object(c["shallowRef"])(),n=Object(c["ref"])(e.modelValue);Object(c["onMounted"])((function(){setTimeout((function(){}),0)}));var i={toolbarKeys:["headerSelect","fontSize","|",{key:"group-more-style",title:"格式",iconSvg:'<svg viewBox="0 0 1024 1024"><path d="M707.872 484.64A254.88 254.88 0 0 0 768 320c0-141.152-114.848-256-256-256H192v896h384c141.152 0 256-114.848 256-256a256.096 256.096 0 0 0-124.128-219.36zM384 192h101.504c55.968 0 101.504 57.408 101.504 128s-45.536 128-101.504 128H384V192z m159.008 640H384v-256h159.008c58.464 0 106.016 57.408 106.016 128s-47.552 128-106.016 128z"></path></svg>',menuKeys:["bold","underline","italic","through","code","sup","sub"]},"color","bgColor","clearStyle","|","lineHeight","|","bulletedList","numberedList","todo",{key:"group-justify",title:"对齐",iconSvg:'<svg viewBox="0 0 1024 1024"><path d="M768 793.6v102.4H51.2v-102.4h716.8z m204.8-230.4v102.4H51.2v-102.4h921.6z m-204.8-230.4v102.4H51.2v-102.4h716.8zM972.8 102.4v102.4H51.2V102.4h921.6z"></path></svg>',menuKeys:["justifyLeft","justifyRight","justifyCenter","justifyJustify"]},{key:"group-indent",title:"缩进",iconSvg:'<svg viewBox="0 0 1024 1024"><path d="M0 64h1024v128H0z m384 192h640v128H384z m0 192h640v128H384z m0 192h640v128H384zM0 832h1024v128H0z m0-128V320l256 192z"></path></svg>',menuKeys:["indent","delIndent"]},"|","insertLink","insertImage","insertTable","blockquote","codeBlock","divider","|","undo","redo","|","fullScreen"]},a={placeholder:"弹出编辑功能与原位编辑不能混用，且暂不支持字体，适合自建内容；拷贝网页内容等，请用原位粘贴和编辑方式...",hoverbarKeys:{text:{menuKeys:["headerSelect","fontSize","bold","underline","color","bgColor","clearStyle"]}},MENU_CONF:{}};a.MENU_CONF["fontFamily"]={fontFamilyList:["黑体","宋体","幼圆","楷体","隶书",{name:"演示夏行楷",value:"/fonts/YanShiXiaXingKai-2.ttf"},"华文细黑","华文彩云","华文新魏","华文行楷","华文隶书","Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"]},Object(c["onBeforeUnmount"])((function(){var e=o.value;null!=e&&e.destroy()}));var r=function(e){o.value=e},s=function(e){t.emit("update:modelValue",n.value),t.emit("ckeditorupdate",n.value)};return{editorRef:o,valueHtml:n,mode:"default",toolbarConfig:i,editorConfig:a,handleCreated:r,handleChange:s}},methods:{handleChange2:function(e){}}};const it=v()(ct,[["render",Ze]]);var at,rt=it,st="gapi=0&db=0&od=0&tr=0&gh=0&gl=0&drive=0";st+="&math=1",st+="&returnbounds=1&noExitBtn=1&noSaveBtn=1&saveAndExit=0&proto=json&grid=1",st+="&ui=min",st+="&picker=1",st+="&embed=1",st+="&lang=zh",st+="&configure=1",st+="&autosave=1",st+="&splash=1",st+="&p=vision;";st=st+"&v_origin="+v_clientconfig.origin;var lt="dv17.3.0";null!=v_clientconfig.drawiomainversion&&""!=v_clientconfig.drawiomainversion&&(lt=v_clientconfig.drawiomainversion);var dt="2233";""!=v_clientconfig.drawiominversion&&(dt=v_clientconfig.drawiominversion),st=st+"&jver="+dt;var ut="220701";""!=v_clientconfig.templateversion&&(ut=v_clientconfig.templateversion);var pt=window.location.origin+"/"+lt+"/editor.html?"+st,mt="https://imgcdn."+v_clientconfig.origin,bt={0:{maxImageBytes:1048576,maxImageSize:512,v_maxPageCount:999,v_maxVPloylineNode:8},1:{maxImageBytes:1048576,maxImageSize:512,v_maxPageCount:3,v_maxVPloylineNode:16},2:{maxImageBytes:1048576,maxImageSize:512,v_maxPageCount:99,v_maxVPloylineNode:64},3:{maxImageBytes:4194304,maxImageSize:1024,v_maxPageCount:199,v_maxVPloylineNode:128},4:{maxImageBytes:14745600,maxImageSize:1920,v_maxPageCount:999,v_maxVPloylineNode:14745600}},ft={MinNodeSize:60,MAXNodeSize:1048576};function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=o.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var Ot={name:"Drawio",props:["curdoc","ver","viewtype","link","key"],directives:{drawerdragwidth:Je.drawerdragwidth,drawerdragheight:Je.drawerdragheight,dialogdragsize:Je.dialogdragsize},data:function(){return{divgraphedit:null,graphiframe:null,border:0,docbaseurl:"",sharelink:"",version:"",synctimer:{},filedesc:{},editorVisible:!1,editorStatus:"",editorSize:520,wangeditorkey:0,editingcellid:null,editorData:"",editorConfig:{},datagridVisible:!1,datagridSize:520,editorDirection:"rtl"}},setup:function(){var e=Object(w["b"])(),t=Object(y["c"])();return{router:t,store:e}},components:(at={},Object(X["a"])(at,Ye["a"].name,Ye["a"]),Object(X["a"])(at,Ke["a"].name,Ke["a"]),Object(X["a"])(at,"ElDrawer",Ge["a"]),Object(X["a"])(at,"WangEditor",rt),at),methods:{init:function(){this.divgraphedit=document.getElementById("graph-editor-box");var e=document.createElement("iframe");this.graphiframe=e,this.store.state.drawioframe=e;var t=this.border;e.style.position="relative",e.style.top=t+"px",e.style.left=t+"px",e.style.borderImageWidth=0,0==t&&e.setAttribute("frameborder","0"),window.addEventListener("message",this.drawiomessage);var o=pt;this.store.state.isEditMode||(o+="&lightbox=1"),"ClipboardMore"==this.$props.viewtype||"Clipboard"==this.$props.viewtype||"undefined"!=typeof this.$props.curdoc&&""!=this.$props.curdoc?o+="&spin=1":console.log("not assgin doc?"),e.setAttribute("src",o),this.divgraphedit.appendChild(e),window.addEventListener("resize",this.resize),this.resize()},uninit:function(){window.removeEventListener("resize",this.resize),window.removeEventListener("message",this.drawiomessage),this.divgraphedit.removeChild(this.graphiframe)},testclick:function(e){this.graphiframe.contentWindow.postMessage(JSON.stringify({action:"viewport",viewport:{x:400,y:800,scale:.7}}),"*")},resize:function(){var e=this.border;this.graphiframe.setAttribute("width",this.divgraphedit.clientWidth-2*e),this.graphiframe.setAttribute("height",this.divgraphedit.clientHeight-2*e)},drawiomessage:function(e){var t=null,o={};try{if("string"!=typeof e.data)return;if("webpack"==e.data.substring(0,7))return;e.data&&(o=JSON.parse(e.data))}catch(error){return void console.log("error parse data"+error.message)}this.docbaseurl,this.version;if("configure"==o["event"]){var n=this.store.state.account.credit_level;"undefined"!=typeof n&&null!=n||(n=0);var c=bt[""+n],a=this.store.state.account.credit_user_invited,r=new Date(this.store.state.account.created_at),s=new Date("2024-05-26T00:00:00");if(1==n&&r<=s&&(c.v_maxPageCount=9),1==n&&r>s){c.v_maxPageCount+=a,c.v_maxPageCount>9&&(c.v_maxPageCount=9),c.v_maxPageWidth=4,c.v_maxPageHeight=3;var l=Math.floor(a/2);c.v_maxPageWidth+=l,c.v_maxPageHeight+=l}c.customFonts=["楷体","宋体","黑体","隶书","幼圆",{fontFamily:"清松手写体",fontUrl:"/fonts/清松手写体2.ttf"},{fontFamily:"杨任东竹石体",fontUrl:"/fonts/杨任东竹石体.ttf"},{fontFamily:"站酷快乐体",fontUrl:"/fonts/站酷快乐体.ttf"},"华文细黑","华文彩云","华文新魏","华文行楷","华文隶书"],c.templateFile="/dv17.3.0/templates/index.xml?"+ut,c.libraries=[{title:{main:"ColorIcons"},entries:[{id:"flat-color-icons",preview:"/dv17.3.0/images/sidebar-flat-color-icons.png",title:{main:"ColorIcons",zh:"彩色图标"},desc:{main:"通用彩色图标",de:"通用彩色图标"},libs:[{title:{main:"通用彩色图标",de:"通用彩色图标"},url:"/dv17.3.0/stencils/flat-color-icons.xml"}]}]}],this.graphiframe.contentWindow&&this.graphiframe.contentWindow.postMessage(JSON.stringify({action:"configure",config:c}),"*")}else if("init"==o["event"])this.resize(),this.smartedit(),this.store.state.isLogin&&this.store.dispatch("activedoc",this.$props.curdoc);else if("load"==o["event"]){var d=this.$props.curdoc;this.store.state.isDraftMode&&(d=this.$props.ver?"[内部评测]"+this.$props.ver:""),this.$bus.emit("doc-opened",{docid:d}),this.store.dispatch("activedoc",this.$props.curdoc),this.store.state.outlinerenderkey++,this.store.state.curdoc=this.$props.curdoc,this.store.state.sharelink=this.sharelink,this.store.state.editorStatus="ready";var u=ht("pid"),p=ht("cid"),m=ht("scale");if(null!=u&&""!=u||null!=m){var b={command:"setviewstate",pageid:u,cellid:p,scale:m};this.cellcommand([b])}}else if("loadfailed"==o["event"])this.store.state.editorStatus="ready",alert("打开文档失败，将为你切换到【本地绘图板】。无法加载远程与本地内容，原因：["+o["message"]+"]"),this.router.push("/clipboard");else if("v.update"==o["event"])this.$bus.emit("outline.update",{outlinedata:o["outlinedata"]});else if("addbookmark"==o["event"])this.$bus.emit("outline.addnewbookmark",{bookmark:o["bookmark"]});else if("save"==o["event"]){this.$bus.emit("doc-saved",{docid:this.$props.curdoc}),this.store.state.activedoc.changed=!1,this.$ana.la(this.$props.curdoc,"drawio.saved")}else if("autosave"==o["event"]){if(this.store.state.isDraftMode?this.$ana.la("/clipboard","drawio.edit","op="+o.change.name):this.$ana.la(this.$props.curdoc,"drawio.edit","op="+o.change.name),"r"==this.store.state.activedoc.share_mode)return}else if("v.filechanged"==o["event"])this.store.state.activedoc.changed=!0;else if("merge"==o["event"])"undefined"!=typeof o["error"]&&""!=o["error"]?(this.store.state.editorStatus="ready",this.$bus.emit("doc-merge-failed",{docid:this.curdoc,error:o["error"]})):(this.store.state.editorStatus="ready",this.$bus.emit("doc-merged",{docid:this.curdoc}),this.store.dispatch("docneedupdatestatus",!1));else if("imageadded"==o["event"])this.saveimg(this.docbaseurl,o.cellid,o.data);else if("imagenotsupported"==o["event"])console.log("image not supported");else if("v.showmessage"==o["event"])"error"==o["type"]?Object($e["a"])({message:o["message"],type:o["type"],duration:0,showClose:!0,dangerouslyUseHTMLString:!0}):Object($e["a"])({message:o["message"],type:o["type"],showClose:!0,dangerouslyUseHTMLString:!0});else if("v.logana"==o["event"])this.$ana.la(this.$props.curdoc,o["eventtype"],o["content"]);else if("export"==o["event"]){console.log("evt.export.data",o.data);var f=new XMLHttpRequest;f.withCredentials=!0,f.onreadystatechange=function(){4==f.readyState&&(200==f.status?alert("saved xmlsvg"):alert("failed save xmlsvg"))},parts=/^data:([^;,=]+\/[^;,=]+)?((?:;[^;,=]+=[^;,=]+)+)?(?:;(base64))?,(.+)$/.exec(o.data),datastr=atob(parts[4]);for(data=new Uint8Array(datastr.length),i=0;i<datastr.length;i++)data[i]=datastr.charCodeAt(i);f.open("PUT",url+"&format=svg",!0),f.send(data)}else if("v.richedit"==o["event"])this.wangeditorkey++,this.editingcellid=o["cellid"],this.editorVisible=!0,this.editorStatus="begin",this.editorData=o["content"],this.$ana.la(this.$props.curdoc,"drawio.edit","op=richeditor");else if("v.datagrid"==o["event"])this.datagridVisible=!0;else if("newdoc_templateselected"==o["event"]){var h=o["template"];this.$bus.emit("newdoc-bytemplate",{name:h.name,template:h.template,libs:h.libs})}else if("doc_libschanged"==o["event"]){var O=o["libs"];if(this.store.state.isDraftMode)return void localStorage.setItem(".clipboard-libs",O);var j={doc_id:this.$props.curdoc,doc_libs:O};Ie.post("/api/docs/updatelibs",j),this.$ana.la(this.$props.curdoc,"docitem.edit","op=libschange&libs="+O)}else e.data.length>0&&"<"==e.data.charAt(0)&&(t=new XMLHttpRequest,t.withCredentials=!0,t.onreadystatechange=function(){t.readyState},t.open("PUT",url,!0),t.send(e.data)),e.data.length},smartedit:function(){if("ClipboardMore"==this.$props.viewtype||"Clipboard"==this.$props.viewtype||"undefined"!=typeof this.$props.curdoc&&""!=this.$props.curdoc){this.store.state.editorStatus="item-loading";var e=this.$props.ver;this.sharelink="",this.store.state.isDraftMode=!1;this.store.state.isEditMode;switch(this.store.state.isReadShare=!1,this.$props.viewtype){case"Vision":this.sharelink="",e="v_latest",this.version=e,!0;break;case"VisionVersion":this.sharelink="",e=this.$props.ver,this.version=e,!0;break;case"Share":this.sharelink=this.$props.link,e="v_latest",this.version=e,!0;break;case"ShareVersion":this.sharelink=this.$props.link,e=this.$props.ver,this.version=e,!0;break;case"ReadShareVersion":this.sharelink=this.$props.link,e=this.$props.ver,this.version=e,!1,this.store.state.isReadShare=!0,this.store.state.isEditMode=!1;break;case"PubVersion":this.sharelink=this.$props.link,e=this.$props.ver,this.version=e,!0;break;case"Clipboard":this.sharelink="",e="",this.version=e,this.store.state.isDraftMode=!0,!0;break;case"ClipboardMore":this.sharelink="",e="",this.version=e,this.store.state.isDraftMode=!0,!0;break}this.docbaseurl="/doc/"+this.$props.curdoc,this.store.dispatch("docneedupdatestatus",!1),""==e&&(e="v_latest",this.version=e);var t={mindmap_nodesize:ft.MinNodeSize},o=this.store.state.account.credit_level;"undefined"!=typeof o&&null!=o||(o=0),o>1&&(t.mindmap_nodesize=ft.MAXNodeSize),t.credit_level=o;var n=["JwlBvtEWSFapwEF7sBSCsQ","PhNoKzIkQTyoZOc6OIQsuQ"];if(n.indexOf(this.$props.curdoc)>=0&&(t.mindmap_nodesize=ft.MAXNodeSize),this.store.state.isDraftMode){var c="vision-clipboard";null!=this.$props.ver&&""!=this.$props.ver&&(c="vision-clipboard-"+this.$props.ver);var i="/"+v_userconfig()["clipboard-template"][0];this.filedesc={docid:c,url:"/doc/clipboard/"+c,ver:e,sharelink:this.sharelink,isdraft:!0,drafttemplate:i},t.mindmap_nodesize=ft.MAXNodeSize}else this.filedesc={docid:this.$props.curdoc,url:"/doc/"+this.$props.curdoc+"/"+e,ver:e,sharelink:this.sharelink,isdraft:!1};this.filedesc.permits=t;var a={action:"load",xml:"<data>not real file data</data>",autosave:!0,filedesc:this.filedesc};this.graphiframe.contentWindow.postMessage(JSON.stringify(a),"*"),""!=this.sharelink&&this.store.state.isLogin&&this.store.dispatch("addsharemelink",{doc_id:this.$props.curdoc,share_link:this.sharelink,share_mode:"r"})}},saveimg:function(e,t,o){var n=this,c=o.substring(0,o.indexOf(",")),i=c.substring("data.image/".length),a="image/"+i,r=["image/png","image/jpeg","image/gif","image/svg","image/webp"],s="/v-not-support.png",l="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+s+";",d={command:"setattr",cellid:t,prop:"style",value:l};if("image/svg+xml"!=a){if(-1==r.indexOf(a))return Object($e["a"])({message:i+"图片格式不支持，目前只支持png,jpeg,gif,svg,webp图片格式",type:"error",showClose:!0}),this.cellcommand([d]),void this.$ana.la(this.$props.curdoc,"drawio.imageadd.failed.byext","ext="+i);if(navigator.onLine){var u=new Image;u.onload=function(){var c=n.store.state.account.credit_level,r=bt[""+c];if(1==c&&u.width*u.height>=262144)return Object($e["a"])({message:i+"非VIP用户尺寸限制为512 x 512，可升级权益提高图片尺寸设定",type:"error",showClose:!0}),n.$ana.la(n.$props.curdoc,"drawio.imageadd.failed","ext="+i+"&pixes="+u.width*u.height),void n.cellcommand([d]);if(o.length>=r.maxImageBytes)return Object($e["a"])({message:i+"超过您的权益最大尺寸"+r.maxImageBytes+"设定",type:"error",showClose:!0}),n.$ana.la(n.$props.curdoc,"drawio.imageadd.failed","ext="+i+"&pixes="+u.width*u.height),void n.cellcommand([d]);var s=u.width>u.height?u.width:u.height,l=Math.floor(s/520),p="";l>0&&(p="visionthumb="+l+";"),console.log(u.width);var m=o.substring(("data:"+a+",").length),b=new Blob([m],{type:a}),f=new FormData;f.append("file",b,"imgfile."+i),f.append("method","saveimg"),f.append("link",n.sharelink),Object($e["a"])({message:"上传图片中...",type:"info",showClose:!0}),Ie.post(e,f,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){n.$bus.emit("img-uploaded",{docid:"unknow",filetype:i});var o=mt+"/img/"+e.data.imgurl,c="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+o+";"+p,a={command:"setattr",cellid:t,prop:"style",value:c};n.$ana.la(n.$props.curdoc,"drawio.imageadd.success","ext="+i+"&size="+Math.ceil(m.length/1024));var r=new Image;r.onload=function(){n.cellcommand([a]),Object($e["a"])({message:"图片上传成功",type:"success",showClose:!0})},r.onerror=function(){n.cellcommand([a]),console.log(error)},r.src=o})).catch((function(e){Object($e["a"])({message:"图片错误，"+e,type:"error",showClose:!0}),n.cellcommand([d]),n.$ana.la(n.$props.curdoc,"drawio.imageadd.failed","ext="+i+"&size="+Math.ceil(m.length/1024))}))},u.src=c+";base64"+o.substring(o.indexOf(","))}else Object($e["a"])({message:"网络未连接，图片将在网络恢复时上传",type:"warning",showClose:!0})}},syncdoc1:function(e){var t=this,o={};if(console.log("syncdoc"),""!=this.$props.curdoc){var n="/doc/"+this.$props.curdoc+"/"+this.version,c=n;""!=this.sharelink&&(o={link:this.sharelink});var i=function(){console.log("dodocupdate, state:"+t.store.state.editorStatus),"item-local-load"==t.store.state.editorStatus?t.store.state.editorStatus="item-local-merging":"item-local-loading"==t.store.state.editorStatus?setTimeout((function(){"item-local-loading"==t.store.state.editorStatus?(t.store.state.editorStatus="ready",t.$bus.emit("doc-notify-message",{message:"同步服务器版本出错(E2007),请刷新页面重置",iserror:!0})):t.store.state.editorStatus="item-local-merging"}),3e3):"item-manual-changing"==t.store.state.editorStatus?t.store.state.editorStatus="item-manual-merging":"item-auto-changing"==t.store.state.editorStatus?t.store.state.editorStatus="item-auto-merging":alert("程序不应该跑到这里，请报告错误(E2009)"),t.$bus.emit("doc-merging",{docid:t.curdoc,error:""}),Ie.get(n,{params:o}).then((function(e){var o=C()(e.data);localStorage.setItem(c+":version",o),t.store.state.activedoc.share_mode,t.graphiframe.contentWindow.postMessage(JSON.stringify({action:"merge",xml:e.data}),"*")})).catch((function(e){console.log("merge failed:"+e),t.store.state.editorStatus="ready",t.$bus.emit("doc-merge-failed",{docid:t.curdoc,error:e.message})}))};"forcemerge"==e?i():Ie.get("/stat/l/"+this.$props.curdoc,{params:o}).then((function(e){var o=e.data.docstat.etag,n=localStorage.getItem(c+":version"),a=localStorage.getItem(c+":changed");if(""!=o&&o!=n){if("r"==t.store.state.activedoc.share_mode&&a&&(a=!1,localStorage.setItem(c+":changed",!1)),!a)return void i();if("item-manual-changing"==t.store.state.editorStatus||"item-auto-changing"==t.store.state.editorStatus)return void i();t.store.state.editorStatus="ready",t.store.dispatch("docneedupdatestatus",!0)}else t.store.state.editorStatus="ready"})).catch((function(e){"item-local-load"==t.store.state.editorStatus&&(t.store.state.editorStatus="ready",t.$bus.emit("doc-notify-message",{message:"同步服务器版本失败，请稍后再试(E1906-1),"+e.message,iserror:!0})),"item-local-loading"==t.store.state.editorStatus&&setTimeout((function(){"item-local-loading"==t.store.state.editorStatus?(t.store.state.editorStatus="ready",t.$bus.emit("doc-notify-message",{message:"同步服务器版本出错(E1907),请刷新页面重置"+e.message,iserror:!0})):(t.store.state.editorStatus="ready",t.$bus.emit("doc-notify-message",{message:"同步服务器版本失败，请稍后再试(E1906-2),"+e.message,iserror:!0}))}),3e3),"item-manual-changing"==t.store.state.editorStatus&&(t.store.state.editorStatus="ready",t.$bus.emit("doc-notify-message",{message:"同步服务器版本失败，请稍后再试(E1906-3),"+e.message,iserror:!0})),"item-auto-changing"==t.store.state.editorStatus&&(t.store.state.editorStatus="ready",t.$bus.emit("doc-notify-message",{message:"同步服务器版本失败，请稍后再试(E1906-4),"+e.message,iserror:!0})),console.log("/stat error",e.message)}))}},cellcommand:function(e){this.graphiframe.contentWindow.postMessage(JSON.stringify({action:"v_command",commands:e}),"*")},listener_resize:function(e){this.resize()},listener_togglesynmode:function(){var e=this;if(this.store.state.isSyncMode)return clearInterval(this.synctimer),void this.store.dispatch("togglesynmode");"ready"==this.store.state.editorStatus?(this.store.dispatch("togglesynmode"),this.synctimer=setInterval((function(){"ready"==e.store.state.editorStatus&&(e.store.state.editorStatus="item-auto-changing",e.syncdoc())}),5e3)):Object($e["a"])({message:"有操作未完成，请稍后再试",type:"error",showClose:!0})},listern_docupdatefromremote:function(){"ready"==this.store.state.editorStatus?(this.store.state.editorStatus="item-manual-changing",this.syncdoc("forcemerge")):Object($e["a"])({message:"有操作未完成，请稍后再试",type:"error",showClose:!0})},listener_toggleeditmode:function(e){this.store.state.isEditMode?(this.store.dispatch("toggleeditmode",{editmode:!1}),this.$ana.la(this.$props.curdoc,"drawio.mode.read")):(this.store.dispatch("toggleeditmode",{editmode:!0}),this.$ana.la(this.$props.curdoc,"drawio.mode.edit")),this.uninit(),this.init()},listener_newdoctemplatedlg:function(){this.graphiframe.contentWindow.postMessage(JSON.stringify({action:"v_newdocbytemplatedlg",xml:""}),"*")},listener_docrefreshlibs:function(e){this.graphiframe.contentWindow.postMessage(JSON.stringify({action:"v_refreshlibs",libs:e}),"*")},onckeditor_ready:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},onckeditor_cancel:function(){this.editorVisible=!1,this.editorStatus="close"},onckeditor_commit:function(){this.editorVisible=!1,this.editorStatus="close",this.onckeditor_update()},onckeditor_update:function(){var e={command:"setlabel",cellid:this.editingcellid,value:this.editorData};this.cellcommand([e])},onckeditor_dockswitch:function(){this.editorDirection="btt"==this.editorDirection?"rtl":"btt"}},mounted:function(){this.init(),VISION_state=this.store.state,this.$bus.on("panel-resized",this.listener_resize),this.$bus.on("toggle-syn-mode",this.listener_togglesynmode),this.$bus.on("doc-update-from-remote",this.listern_docupdatefromremote),this.$bus.on("toggle-edit-mode",this.listener_toggleeditmode),this.$bus.on("newdoc-open-templatedlg",this.listener_newdoctemplatedlg),this.$bus.on("v_refreshlibs",this.listener_docrefreshlibs)},unmounted:function(){console.log("drawio unmounted"),this.$bus.off("panel-resized",this.listener_resize),this.$bus.off("toggle-syn-mode",this.listener_togglesynmode),this.$bus.off("doc-update-from-remote",this.listern_docupdatefromremote),this.$bus.off("toggle-edit-mode",this.listener_toggleeditmode),this.$bus.off("newdoc-open-templatedlg",this.listener_newdoctemplatedlg),this.$bus.off("v_refreshlibs",this.listener_docrefreshlibs),this.uninit()},updated:function(){this.editorVisible||("begin"!=this.editorStatus&&"close"!=this.editorStatus?this.smartedit():this.editorStatus="")},beforeRouteUpdate:function(e,t,o){}};n("b016");const jt=v()(Ot,[["render",Fe]]);var gt=jt,vt={class:"doclist"};function kt(e,t,o,n,i,a){var r=this,s=Object(c["resolveComponent"])("DocItem"),l=Object(c["resolveComponent"])("perfect-scrollbar");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",vt,[Object(c["createVNode"])(l,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("ul",null,["/"!=n.store.state.curfolder?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:0,class:Object(c["normalizeClass"])(["li-doc-item",{selected:!1},{folder:!0},{collapsed:!n.store.state.liststyle_expand}])},[Object(c["createVNode"])(s,{doc:i.parentfolder},null,8,["doc"])],2)):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(r.store.state.doclist,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.id,class:Object(c["normalizeClass"])(["li-doc-item",{selected:e.active},{folder:"folder"==e.doc_type},{collapsed:!n.store.state.liststyle_expand}])},[Object(c["createVNode"])(s,{doc:e},null,8,["doc"])],2)})),128))])]})),_:1})])}n("b680");var Vt=["id"],wt={class:"title"},yt={class:"doc-icon-wrap"},Nt={class:"doc-icon"},Ct={key:2,class:"iconfont icon-view",style:{},title:"只读"},xt={key:3,class:"iconfont icon-disable-edit",style:{"font-size":"120%"},title:"权益降级，暂不可在线保存"},_t={key:0,class:"file-owner"},Et=["src","title"],Bt=["innerHTML"],St={class:"file-share el-dropdown-link"},zt=Object(c["createElementVNode"])("i",{class:"iconfont icon-trash-restore",style:{color:"#aaa","padding-right":"0.5em"}},null,-1),$t=Object(c["createElementVNode"])("i",{class:"iconfont icon-delete",style:{color:"#aaa","padding-right":"0.5em"}},null,-1),Dt={key:0,class:"date-size"},Mt={class:"file-date"},Tt={class:"file-size"},It={class:"file-accesslist"},Lt={style:{height:"300px","margin-bottom":"3em",overflow:"scroll"}},Rt={class:"sharedlgwraper"},Ut={style:{"font-size":"14px","padding-bottom":"1em","font-weight":"bold"}},At={style:{"min-height":"300px"}},Ht={class:"grid-content bg-purple-dark",title:"分享链接"},Ft={class:"share-link",style:{"padding-left":"1em"}},Pt=Object(c["createElementVNode"])("span",null,"分享链接: ",-1),Wt={key:0},qt=["href"],Jt={key:1},Xt={style:{"padding-left":"1em"}},Yt=Object(c["createElementVNode"])("span",null,"版本",-1),Kt=Object(c["createElementVNode"])("span",null,"有效期:",-1),Gt={class:"grid-content bg-purple-dark",title:"协作链接"},Qt={class:"share-link",style:{"padding-left":"1em"}},Zt=Object(c["createElementVNode"])("span",null,"协作授权链接:",-1),eo={key:0},to=["href"],oo={key:1},no={style:{"padding-left":"1em"}},co=Object(c["createElementVNode"])("span",null,"默认权限",-1),io=Object(c["createElementVNode"])("span",null,"有效期",-1),ao=Object(c["createElementVNode"])("span",null,"已授权",-1),ro={class:"el-popover",style:{"padding-left":"2em"}};function so(e,t,o,n,i,a){var r=this,s=Object(c["resolveComponent"])("font-awesome-icon"),l=Object(c["resolveComponent"])("el-dropdown-item"),d=Object(c["resolveComponent"])("el-dropdown-menu"),u=Object(c["resolveComponent"])("el-dropdown"),p=Object(c["resolveComponent"])("avatar"),m=Object(c["resolveComponent"])("el-tree"),b=Object(c["resolveComponent"])("el-col"),f=Object(c["resolveComponent"])("el-button"),h=Object(c["resolveComponent"])("el-row"),O=Object(c["resolveComponent"])("el-dialog"),j=Object(c["resolveComponent"])("View"),g=Object(c["resolveComponent"])("el-icon"),v=Object(c["resolveComponent"])("el-option"),k=Object(c["resolveComponent"])("el-select"),V=Object(c["resolveComponent"])("el-input"),w=Object(c["resolveComponent"])("Share"),y=Object(c["resolveComponent"])("el-radio"),N=Object(c["resolveComponent"])("el-popover");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",{class:"doc-item",id:o.doc.id,onDblclick:t[12]||(t[12]=function(e){return a.openinnewwin()}),onClick:[t[13]||(t[13]=Object(c["withModifiers"])((function(e){return a.opendoc()}),["exact"])),t[14]||(t[14]=Object(c["withModifiers"])((function(e){return a.openinnewwin()}),["ctrl","exact"]))]},[Object(c["createElementVNode"])("div",wt,[Object(c["createElementVNode"])("div",yt,[Object(c["createElementVNode"])("span",Nt,["folder"==o.doc.doc_type||"parentfolder"==o.doc.doc_type?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,icon:["fas","folder"],class:"folder-icon"})):Object(c["createCommentVNode"])("",!0),"L"!=i.docstatus&&"vision"==o.doc.doc_type&&"r"!=o.doc.share_mode&&n.store.state.liststyle_expand?(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",{key:1,class:Object(c["normalizeClass"])(["iconfont icon-whiteboard",{changed:a.changenotsave}]),style:{},title:"可编辑"},null,2)):Object(c["createCommentVNode"])("",!0),"L"!=i.docstatus&&"vision"==o.doc.doc_type&&"r"==o.doc.share_mode&&n.store.state.liststyle_expand?(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",Ct)):Object(c["createCommentVNode"])("",!0),"L"==i.docstatus?(Object(c["openBlock"])(),Object(c["createElementBlock"])("i",xt)):Object(c["createCommentVNode"])("",!0)])]),""!=o.doc.share_link?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_t,["visions"!=n.store.state.listtype?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:""==i.docinfo.wx_headimg?"/default-avatar.png":i.docinfo.wx_headimg,class:"itemheadimg",title:i.docinfo.owner_name},null,8,Et)):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0),i.editing?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:"file-name",innerHTML:e.$props.doc.doc_title},null,8,Bt)),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.editingtitle=e}),ref:"nameEditor",type:"text",onBlur:t[1]||(t[1]=function(e){return a.name_discardchange()}),onKeyup:[t[2]||(t[2]=Object(c["withKeys"])((function(e){return a.name_discardchange()}),["esc"])),t[3]||(t[3]=Object(c["withKeys"])((function(e){return a.name_commitchange()}),["enter"]))],style:{width:"100%"}},null,544),[[c["vShow"],i.editing],[c["vModelText"],i.editingtitle]]),n.store.state.isMobile?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:2,placement:"bottom-start"},{dropdown:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(d,null,{default:Object(c["withCtx"])((function(){return["vision"!=o.doc.doc_type||"Y"!=o.doc.doc_status&&"R"!=o.doc.doc_status?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:0,onClick:t[4]||(t[4]=function(e){return a.openinnewwin()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["far","window-restore"],style:{color:"#aaa","padding-right":"0.6em"}}),Object(c["createTextVNode"])(" 新页签打开 ")]})),_:1})),"Y"==o.doc.doc_status&&""==o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:1,onClick:t[5]||(t[5]=function(e){return a.mvtofolder()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["far","folder-open"],style:{color:"#aaa","padding-right":"0.6em"}}),Object(c["createTextVNode"])(" 移动到... ")]})),_:1})):Object(c["createCommentVNode"])("",!0),"Y"==o.doc.doc_status&&""==o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:2,onClick:t[6]||(t[6]=function(e){return a.rename()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["far","folder-open"],style:{color:"#aaa","padding-right":"0.6em"}}),Object(c["createTextVNode"])(" 重命名 ")]})),_:1})):Object(c["createCommentVNode"])("",!0),"Y"==o.doc.doc_status&&""==o.doc.share_link&&"vision"==o.doc.doc_type?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:3,onClick:t[7]||(t[7]=function(e){return a.mvtorecyle()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["fas","trash"],style:{color:"#aaa","padding-right":"0.6em"}}),Object(c["createTextVNode"])(" 删除到回收站 ")]})),_:1})):Object(c["createCommentVNode"])("",!0),"Y"==o.doc.doc_status&&""==o.doc.share_link&&"folder"==o.doc.doc_type?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:4,onClick:t[8]||(t[8]=function(e){return a.delfolder()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["fas","trash"],style:{color:"#aaa","padding-right":"0.6em"}}),Object(c["createTextVNode"])(" 删除目录 ")]})),_:1})):Object(c["createCommentVNode"])("",!0),"Y"==o.doc.doc_status&&""!=o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:5,onClick:t[9]||(t[9]=function(e){return a.removeshareme()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["fas","trash"],style:{color:"#aaa","padding-right":"0.6em"}}),Object(c["createTextVNode"])(" 删除此共享链接 ")]})),_:1})):Object(c["createCommentVNode"])("",!0),"R"==o.doc.doc_status&&""==o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:6,onClick:t[10]||(t[10]=function(e){return a.restorefromrecyle()})},{default:Object(c["withCtx"])((function(){return[zt,Object(c["createTextVNode"])(" 恢复文档 ")]})),_:1})):Object(c["createCommentVNode"])("",!0),"R"==o.doc.doc_status&&""==o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:7,onClick:t[11]||(t[11]=function(e){return a.delfromrecyle()})},{default:Object(c["withCtx"])((function(){return[$t,Object(c["createTextVNode"])(" 彻底删除 ")]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",St,[""!=o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,icon:["fas","share-alt"],class:"file-share-icon"})):Object(c["createCommentVNode"])("",!0),""==o.doc.share_link?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,icon:["fas","ellipsis-v"],class:"file-share-icon"})):Object(c["createCommentVNode"])("",!0)])]})),_:1}))]),"vision"==o.doc.doc_type&&n.store.state.liststyle_expand?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Dt,[Object(c["createElementVNode"])("div",Mt,Object(c["toDisplayString"])(i.updated_at)+"更新",1),Object(c["createElementVNode"])("div",Tt,Object(c["toDisplayString"])((i.size/1e3).toFixed(1))+"k ",1),Object(c["createElementVNode"])("div",It,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.recentupatelist,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:e},[e.user_id!=r.store.state.account.id?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:0,userid:e.user_id,tips:a.accessitemtips(e)},null,8,["userid","tips"])):Object(c["createCommentVNode"])("",!0)])})),128))])])):Object(c["createCommentVNode"])("",!0)],40,Vt),Object(c["createVNode"])(O,{modelValue:i.mvfolderdlgopen,"onUpdate:modelValue":t[17]||(t[17]=function(e){return i.mvfolderdlgopen=e}),title:"移动 【"+o.doc.doc_title+"】 到目录",width:"680px","append-to-body":!0},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Lt,[Object(c["createVNode"])(m,{props:i.folderprops,load:a.loadfolderdata,"node-key":"doc_id",ref:"targetFolder",lazy:""},null,8,["props","load"])]),Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(b,{span:2}),Object(c["createVNode"])(b,{span:10}),Object(c["createVNode"])(b,{span:10},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{onClick:t[15]||(t[15]=function(e){return a.mvtofoldercommit()})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("移动到此目录")]})),_:1}),Object(c["createVNode"])(f,{onClick:t[16]||(t[16]=function(e){return i.mvfolderdlgopen=!1})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("取消")]})),_:1})]})),_:1}),Object(c["createVNode"])(b,{span:2})]})),_:1})]})),_:1},8,["modelValue","title"]),Object(c["createVNode"])(O,{modelValue:i.sharedlgopen,"onUpdate:modelValue":t[21]||(t[21]=function(e){return i.sharedlgopen=e}),title:"分享与协作"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Rt,[Object(c["createElementVNode"])("div",Ut,Object(c["toDisplayString"])(i.title),1),Object(c["createElementVNode"])("div",At,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.links,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:e},{default:Object(c["withCtx"])((function(){return["p"==e.access?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])(b,{span:1},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ht,[Object(c["createVNode"])(g,{size:20},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j)]})),_:1})])]})),_:1}),Object(c["createVNode"])(b,{span:21,class:Object(c["normalizeClass"])({"link-unsaved":""!=e.editstatus,"link-delete":"delete"==e.editstatus})},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ft,[Pt,""!=e.url?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Wt,[Object(c["createElementVNode"])("a",{target:"_blank",href:e.url},Object(c["toDisplayString"])(e.urltext),9,qt)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Jt,Object(c["toDisplayString"])(e.urltext),1))])]})),_:2},1032,["class"]),Object(c["createVNode"])(b,{span:2},{default:Object(c["withCtx"])((function(){return[""!=e.url?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:0,onClick:function(t){return a.setcliptext(e.copytext)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("复制")]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:2},1024),Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:21},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Xt,[Yt,Object(c["createVNode"])(k,{modelValue:e.version,"onUpdate:modelValue":function(t){return e.version=t},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.versions,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(v,{key:e,value:e.file_name},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.file_name),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),Kt,Object(c["createVNode"])(k,{modelValue:e.status,"onUpdate:modelValue":function(t){return e.status=t},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return["period"==e.prestatus?(Object(c["openBlock"])(),Object(c["createBlock"])(v,{key:0,value:"period",label:e.expiretext},null,8,["label"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(v,{value:"1d",label:"1天"}),Object(c["createVNode"])(v,{value:"7d",label:"7天"}),Object(c["createVNode"])(v,{value:"1m",label:"1月"}),Object(c["createVNode"])(v,{value:"open",label:"无截止期"}),Object(c["createVNode"])(v,{value:"close",label:"暂停访问"})]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])]})),_:2},1024),Object(c["createVNode"])(b,{span:2},{default:Object(c["withCtx"])((function(){return["delete"!=e.editstatus?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:0,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("删除")]})),_:2},1032,["onClick"])):(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:1,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("恢复")]})),_:2},1032,["onClick"]))]})),_:2},1024),Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:21,style:{"border-bottom":"1px solid #ddd","padding-bottom":"10px","padding-left":"1em","padding-top":"10px"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(V,{size:"small",modelValue:e.desc,"onUpdate:modelValue":function(t){return e.desc=t},autosize:"",type:"textarea",placeholder:"备注信息",maxlength:"80","show-word-limit":"",onChange:function(t){return a.linkchanged(e)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:2},1024)],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createVNode"])(b,{span:1},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Gt,[Object(c["createVNode"])(g,{size:20},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(w)]})),_:1})])]})),_:1}),Object(c["createVNode"])(b,{span:21,class:Object(c["normalizeClass"])({"link-unsaved":""!=e.editstatus,"link-delete":"delete"==e.editstatus})},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Qt,[Zt,""!=e.url?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",eo,[Object(c["createElementVNode"])("a",{target:"_blank",href:e.url},Object(c["toDisplayString"])(e.urltext),9,to)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",oo,Object(c["toDisplayString"])(e.urltext),1))])]})),_:2},1032,["class"]),Object(c["createVNode"])(b,{span:2},{default:Object(c["withCtx"])((function(){return[""!=e.url?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:0,onClick:function(t){return a.setcliptext(e.copytext)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("复制")]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:2},1024),Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:21},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",no,[co,Object(c["createVNode"])(y,{modelValue:e.access,"onUpdate:modelValue":function(t){return e.access=t},label:"r",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("只读")]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),Object(c["createVNode"])(y,{modelValue:e.access,"onUpdate:modelValue":function(t){return e.access=t},label:"w",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("编辑")]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),io,Object(c["createVNode"])(k,{modelValue:e.status,"onUpdate:modelValue":function(t){return e.status=t},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return["period"==e.prestatus?(Object(c["openBlock"])(),Object(c["createBlock"])(v,{key:0,value:"period",label:e.expiretext},null,8,["label"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(v,{value:"1d",label:"1天"}),Object(c["createVNode"])(v,{value:"3d",label:"3天"}),Object(c["createVNode"])(v,{value:"hangauth",label:"暂停授权(已授权可访问)"}),Object(c["createVNode"])(v,{value:"close",label:"暂停访问"})]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])]})),_:2},1024),Object(c["createVNode"])(b,{span:2},{default:Object(c["withCtx"])((function(){return["delete"!=e.editstatus?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:0,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("删除")]})),_:2},1032,["onClick"])):(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:1,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("恢复")]})),_:2},1032,["onClick"]))]})),_:2},1024),Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:21,style:{"padding-bottom":"10px","padding-left":"1em","padding-top":"10px"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(V,{size:"small",modelValue:e.desc,"onUpdate:modelValue":function(t){return e.desc=t},autosize:"",type:"textarea",placeholder:"备注信息",maxlength:"80","show-word-limit":"",onChange:function(t){return a.linkchanged(e)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:2},1024),Object(c["createVNode"])(b,{span:2}),Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:21,style:{"border-bottom":"1px solid #ddd","padding-bottom":"10px","padding-right":"1em","text-align":"right"}},{default:Object(c["withCtx"])((function(){return[ao,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.auths,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:e},[Object(c["createVNode"])(p,{userid:e.account_id},null,8,["userid"])])})),128))]})),_:2},1024),Object(c["createVNode"])(b,{span:2},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(N,{placement:"right-start",title:"授权列表",width:260,trigger:"click",style:{"padding-bottom":"2em"}},{reference:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{onClick:function(t){return e.authdlg=!0},class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("授权")]})),_:2},1032,["onClick"])]})),default:Object(c["withCtx"])((function(){return[e.authdlg?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(e.auths,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:t},[Object(c["createVNode"])(p,{userid:t.account_id,showname:!0},null,8,["userid"]),Object(c["createElementVNode"])("span",ro,Object(c["toDisplayString"])(t.auth_date.substring(5,10)),1),Object(c["createVNode"])(k,{modelValue:t.access,"onUpdate:modelValue":function(e){return t.access=e},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e,!0)},style:{width:"60px","padding-left":"2em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(v,{value:"r",label:"只读"}),Object(c["createVNode"])(v,{value:"w",label:"编辑"}),Object(c["createVNode"])(v,{value:"n",label:"暂停"})]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])})),128)):Object(c["createCommentVNode"])("",!0)]})),_:2},1024)]})),_:2},1024)],64))]})),_:2},1024)})),128))]),Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:1}),Object(c["createVNode"])(b,{span:10},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{onClick:t[18]||(t[18]=function(e){return a.addsharelink("p")})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("新建分享")]})),_:1}),Object(c["createVNode"])(f,{onClick:t[19]||(t[19]=function(e){return a.addsharelink("w")})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("新建协作授权")]})),_:1})]})),_:1}),Object(c["createVNode"])(b,{span:10,style:{"text-align":"right"}},{default:Object(c["withCtx"])((function(){return[a.sharelinknotsave?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:0,onClick:t[20]||(t[20]=function(e){return a.savesharelink()}),type:"warning"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("保存")]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1},8,["modelValue"])],64)}var lo=["title"],uo=["src"],po={key:0};function mo(e,t,o,n,i,a){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])("avatarcontain-"+o.size),title:i.title},[Object(c["createElementVNode"])("img",{class:Object(c["normalizeClass"])("avatar-"+o.size),src:i.avatar},null,10,uo),Object(c["createTextVNode"])(),o.showname?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",po,Object(c["toDisplayString"])(i.nickname),1)):Object(c["createCommentVNode"])("",!0)],10,lo)}var bo={name:"Avatar",props:{userid:{type:String},showname:{type:String,default:""},tips:{type:String,default:""},size:{type:String,default:"small"}},data:function(){return{nickname:"",avatar:"/default-avatar.png",title:""}},mounted:function(){this.getavatarinfo(this.$props.userid)},updated:function(){this.getavatarinfo(this.$props.userid)},methods:{getavatarinfo:function(e){if("undefined"!=typeof e&&null!=e&&""!=e){var t=this;""!=this.tips&&(this.title="["+this.nickname+"] "+this.tips);var o={userid:e};Ie.get("/api/account/avatar",{params:o}).then((function(e){0!=e.data.status&&(t.nickname=e.data.userinfo.nick_name,""==t.tips?t.title=t.nickname:t.title="["+t.nickname+"] "+t.tips,""!=e.data.userinfo.avatar?t.avatar=e.data.userinfo.avatar:t.avatar="/default-avatar.png")}))}}}};n("cdfe");const fo=v()(bo,[["render",mo],["__scopeId","data-v-d0ead7d0"]]);var ho,Oo=fo,jo=(n("dde2"),n("ce90")),go=n("952e"),vo=n("54bb"),ko=n("91c0"),Vo=n("c349"),wo=n("5ffa"),yo=n("e012"),No=n("6a28"),Co=n("752a"),xo={indexedDB:window.indexedDB||window.webkitindexedDB||window.msIndexedDB||mozIndexedDB,openDB:function(e,t,o,n,c){var i=t||1,a=this.indexedDB.open(e,i);a.onerror=function(e){console.log("IndexedDB数据库打开错误")},a.onsuccess=function(e){o=e.target.result,c&&"function"===typeof c&&c(o)},a.onupgradeneeded=function(e){e.target.result}},deleteData:function(e,t,o,n){var c=e.transaction(t,"readwrite").objectStore(t);c.delete(o),n&&"function"===typeof n&&n()},clearData:function(e,t,o){var n=e.transaction(t,"readwrite").objectStore(t);n.clear(),o&&"function"===typeof o&&o()}},_o={name:"DocItem",data:function(){return{docid:this.$props.doc.id,editing:!1,sharedlg:!1,editingtitle:"",title:this.$props.doc.doc_title,beforeedit:this.$props.doc.doc_title,sharedlgopen:!1,shareAccountsDlg:!1,mvfolderdlgopen:!1,links:[],versions:[],size:0,updated_at:"",docstatus:"",docstatusmsg:"",docinfo:{},recentupatelist:[],folderprops:{label:"doc_title",children:"children",isLeaf:"leaf"}}},setup:function(){var e=Object(w["b"])(),t=Object(y["c"])();return{router:t,store:e}},props:["doc"],components:(ho={Avatar:Oo},Object(X["a"])(ho,Ye["a"].name,Ye["a"]),Object(X["a"])(ho,jo["a"].name,jo["a"]),Object(X["a"])(ho,go["a"].name,go["a"]),Object(X["a"])(ho,Ke["a"].name,Ke["a"]),Object(X["a"])(ho,vo["a"].name,vo["a"]),Object(X["a"])(ho,ko["b"].name,ko["b"]),Object(X["a"])(ho,ko["a"].name,ko["a"]),Object(X["a"])(ho,ne["a"].name,ne["a"]),Object(X["a"])(ho,ce["a"].name,ce["a"]),Object(X["a"])(ho,Vo["a"].name,Vo["a"]),Object(X["a"])(ho,"ElDropdown",wo["a"]),Object(X["a"])(ho,"ElDropdownItem",wo["b"]),Object(X["a"])(ho,"ElDropdownMenu",wo["c"]),Object(X["a"])(ho,"ElTree",yo["a"]),Object(X["a"])(ho,"Share",No["a"]),Object(X["a"])(ho,"View",Co["a"]),ho),computed:{changenotsave:function(){return this.$props.doc.changed},sharelinknotsave:function(){var e=!1;return this.links.forEach((function(t){"change"!=t.editstatus&&"add"!=t.editstatus&&"delete"!=t.editstatus&&"force"!=t.editstatus||(e=!0)})),e}},mounted:function(){var e=this;if("parentfolder"!=this.doc.doc_type&&"folder"!=this.doc.doc_type){if(""!=this.doc.share_link){var t={doc_id:this.doc.id};Ie.get("/api/docs/pubinfo",{params:t}).then((function(t){e.docinfo=t.data.docinfo}))}this.updatestat(),this.$ana.ral(this.doc.id,null,6,(function(t){e.recentupatelist=t})),this.$bus.on("doc-saved",(function(t){t.docid==e.docid&&e.updatestat()})),this.$bus.on("context-menu-show",this.context_show_listener)}},unmounted:function(){this.$bus.off("context-menu-show",this.context_show_listener)},methods:{context_show_listener:function(e){e.curmenu!=this.$refs.contextmenu&&this.$refs.contextmenu.hide()},title_edit:function(){},rename:function(){this.editingtitle=this.$props.doc.doc_title,this.editing=!0},name_discardchange:function(){this.editing=!1},name_commitchange:function(){if(this.editingtitle.trim()!=this.$props.doc.doc_title){var e={doc_id:this.$props.doc.id,doc_title:this.editingtitle.trim()},t=this;Ie.post("/api/docs/updatetitle",e).then((function(o){t.title=t.editingtitle,t.$props.doc.doc_title=t.title,t.$bus.emit("doc-title-changed",{doc_id:e.doc_id,doc_title:e.doc_title})}))}this.editing=!1},accessitemtips:function(e){var t=this.$utils.beautifytime(Date.parse(e.created_at)/1e3),o={"drawio.saved":"更改","drawio.focus":"访问"};return t+o[e.action]},hideothers:function(){this.$bus.emit("context-menu-show",{curmenu:this.$refs.contextmenu})},mvtofolder:function(){this.mvfolderdlgopen=!0},mvtofoldercommit:function(){var e=this.$refs.targetFolder.getCurrentKey(),t=this.$props.doc.id,o={doc_id:t,target_id:e},n=this;Ie.post("/api/docs/mvtofolder",o).then((function(o){o.data.status?(Object($e["a"])({message:"移动成功",type:"success",showClose:!0}),n.store.dispatch("mvdoctofolder",{doc_id:t,target_id:e}),n.mvfolderdlgopen=!1,n.$ana.la(t,"docitem.mvtorecyle","op=mvtofolder")):Object($e["a"])({message:"移动到目录失败"+o.data.message,type:"error",showClose:!0})})).catch((function(e){alert("移动到目录错误，请稍后再试，错误原因:"+e.message),console.log(e.message)}))},loadfolderdata1:function(){return[{label:"Level one 1",children:[{label:"Level two 1-1",children:[{label:"Level three 1-1-1"}]}]}]},loadfolderdata:function(e,t){if(0===e.level)return t([{doc_title:"我创建的",doc_id:"/"}]);var o="/api/docs/listfolder",n={parent:e.data.doc_id,sharelink:""};Ie.get(o,{params:n}).then((function(e){for(var o=e.data.foldlist,n=new Array,c=0;c<o.length;c++){for(var i=o[c],a=!1,r=0;r<n.length;r++)if(n[r].doc_id==i.doc_id){a=!0;break}a||(i.leaf=""==i.doc_subid,n.push(i))}t(n)})).catch((function(e){alert("获取目录错误，请稍后再试，错误原因:"+e.message),console.log(e.message)}))},mvtorecyle:function(){var e={doc_id:this.$props.doc.id},t=this;Ie.post("/api/docs/mvtorecyle",e).then((function(e){t.store.dispatch("mvdoctorecyle",t.$props.doc.id),Object($e["a"])({message:"文档已删除到回收站",type:"success",showClose:!0})})),this.$ana.la(this.$props.doc.id,"docitem.mvtorecyle")},delfolder:function(){var e={doc_id:this.$props.doc.id},t=this;Ie.post("/api/docs/delfolder",e).then((function(e){e.data.status?(t.store.dispatch("delfolder",t.$props.doc.id),Object($e["a"])({message:"目录已经删除",type:"success",showClose:!0})):Object($e["a"])({message:"目录删除失败"+e.data.message,type:"error",showClose:!0})})),this.$ana.la(this.$props.doc.id,"docitem.mvtorecyle","op=delfolder")},removeshareme:function(){this.store.dispatch("removesharemelink",{doc_id:this.$props.doc.id,share_link:this.$props.doc.share_link,share_mode:this.$props.doc.share_mode})},delfromrecyle:function(){var e={doc_id:this.$props.doc.id},t=this;confirm("确定彻底删除？如果只是限额不够，可以为一个文档创建多页面【页面底部[+]】")&&(Ie.post("/api/docs/delfromrecyle",e).then((function(e){t.store.dispatch("delfromrecyle",t.$props.doc.id);var o="/doc/"+t.$props.doc.id+"/v_latest";localStorage.removeItem(o+":changed"),localStorage.removeItem(o+":viewstate"),localStorage.removeItem(o+":etag");var n=null;xo.openDB("database",2,n,"objects",(function(e){xo.deleteData(e,"objects",o),xo.deleteData(e,"objects",o+".shadow")})),Object($e["a"])({message:"文档已删除，如果需找回，请三十日内申请",type:"success",showClose:!0})})),this.$ana.la(this.$props.doc.id,"docitem.delfromrecyle"))},restorefromrecyle:function(){var e={doc_id:this.$props.doc.id},t=this;Ie.post("/api/docs/restorefromrecyle",e).then((function(e){t.store.dispatch("restorefromrecyle",t.$props.doc.id),Object($e["a"])({message:"文档已恢复，请在【我创建的】查看",type:"success",showClose:!0})})),this.$ana.la(this.$props.doc.id,"docitem.restorefromrecyle")},openfolder:function(){this.store.dispatch("switchlist",{listtype:this.store.state.listtype,folder:this.$props.doc.id,folderlink:"",foldername:this.$props.doc.doc_title,parent:this.$props.doc.doc_parent})},opendoc:function(){if(this.store.state.isSyncMode)Object($e["a"])({message:"同步模式下，不能切换文档，请关闭同步模式",type:"error",showClose:!0});else if("ready"==this.store.state.editorStatus){if(1!=this.editing){if("folder"==this.$props.doc.doc_type)return this.openfolder();if("parentfolder"!=this.$props.doc.doc_type){if(1!=this.$props.doc.active){this.store.state.editorStatus="item-changing",this.$bus.emit("before-open-doc-evt",{newdoc:this.$props.doc}),"undefined"==typeof this.$props.doc.share_link&&(this.$props.doc.share_link="");""!=this.$props.doc.share_link?"visions"==this.store.state.listtype?this.router.push({name:"PubVersion",params:{doc:this.$props.doc.id,link:this.$props.doc.share_link,ver:"v_latest"}}):"r"==this.$props.doc.share_mode?(!1,this.router.push({name:"ReadShareVersion",params:{doc:this.$props.doc.id,link:this.$props.doc.share_link,ver:"v_latest"},query:{scale:1}})):this.router.push({name:"Share",params:{doc:this.$props.doc.id,link:this.$props.doc.share_link}}):this.router.push({name:"Vision",params:{doc:this.$props.doc.id}}),this.$ana.la(this.$props.doc.id,"docitem.open",""!=this.$props.doc.share_link?"link="+this.$props.doc.share_link:"")}}else this.store.dispatch("switchtoparent")}}else Object($e["a"])({message:"有操作未完成，请稍后再试。如果持续出现，请刷新页面。",type:"error",showClose:!0})},openinnewwin:function(){if(navigator.onLine){var e={};e="visions"==this.store.state.listtype?this.router.resolve({name:"PubVersion",params:{doc:this.$props.doc.id,link:this.$props.doc.share_link,ver:"v_latest"}}):""!=this.$props.doc.share_link?"r"==this.$props.doc.share_mode?this.router.resolve({name:"ReadShareVersion",params:{doc:this.$props.doc.id,link:this.$props.doc.share_link,ver:"v_latest"},query:{scale:1}}):this.router.resolve({name:"Share",params:{doc:this.$props.doc.id,link:this.$props.doc.share_link}}):this.router.resolve({name:"Vision",params:{doc:this.$props.doc.id}}),window.open(e.href,"_blank"),this.$ana.la(this.$props.doc.id,"docitem.opennew")}else alert("网络离线状态，暂不能打开新页签，请在联网状态下打开新页签")},updatestat:function(){var e=this,t={link:this.$props.doc.share_link};Ie.get("/stat/l/"+this.docid,{params:t}).then((function(t){e.size=t.data.docstat.size,e.updated_at=e.$utils.beautifytime(Date.parse(t.data.docstat.updated_at)/1e3),e.docstatus=t.data.docstat.doc_status,e.docstatusmsg=t.data.docstat.doc_status_msg})).catch((function(e){}))},sharedoc_delete:function(){this.$ana.la(this.$props.doc.id,"docitem.share.opendlg");var e={doc_id:this.$props.doc.id},t=this;Ie.get("/api/docs/links",{params:e}).then((function(e){t.links=e.data.links,t.versions=e.data.versions,t.links.forEach((function(e){e.editstatus="",t.preparelinkdata(e)})),t.sharedlgopen=!0})).catch((function(e){Object($e["a"])({message:"获取共享链接失败，请稍后再试，错误原因:"+e.message,type:"error",showClose:!0})}))},preparelinkdata:function(e){var t=this,o=(new Date,null==e.expire?Date.now():Date.parse(e.expire));e.pre={status:e.status,version:e.version,access:e.access,desc:e.desc,expire:e.expire},e.prestatus=e.status,e.expiretext="当前设置:"+t.$utils.beautifytime(o/1e3)+"过期";var n="";switch(e.status){case"open":n="无截至期";break;case"close":n="链接无效，已设置为禁止访问";break;case"hangauth":n="已设置为暂停授权";break;default:n=t.$utils.beautifytime(o/1e3)+"过期，请及时访问"}e.authdlg=!1,"p"==e.access?"add"==e.editstatus?(e.url="",e.urltext="新加项，保存后创建链接",e.copytext="保存后创建链接"):(e.url=window.origin+"/p/"+t.docid+"/"+e.link+"/"+e.version+"?view=true",e.urltext="/p/"+t.docid+"/"+e.link+"/"+e.version,e.copytext=window.origin+"/p/"+t.docid+"/"+e.link+"/"+e.version+"?view=true   V:["+t.$props.doc.doc_title+"] 只读分享链接, "+n):"add"==e.editstatus?(e.url="",e.urltext="新加项，保存后创建链接",e.copytext="保存后创建链接"):(e.url=window.origin+"/s/"+t.docid+"/"+e.link,e.urltext="/s/"+t.docid+"/"+e.link,e.copytext=window.origin+"/s/"+t.docid+"/"+e.link+"   V:["+t.$props.doc.doc_title+"] 授权链接，"+n)},linkchanged:function(e,t){"delete"!=e.editstatus&&"add"!=e.editstatus&&"force"!=e.editstatus&&(t?e.editstatus="force":e.pre.status==e.status&&e.pre.version==e.version&&e.pre.access==e.access&&e.pre.desc==e.desc&&e.pre.expire==e.expire?e.editstatus="":e.editstatus="change")},addsharelink:function(e){var t={link:null,desc:"",access:"",editstatus:"add",url:"",expire:Date.now()};t.access=e;var o=new Date;t.created=o.toISOString(),"p"==e?(t.version="v_latest",t.status="1d"):t.status="1d",this.preparelinkdata(t),this.links.unshift(t),this.$ana.la(this.$props.doc.id,"docitem.share.addsharelink")},toggledeletesharelink:function(e){var t=this;"add"==e.editstatus?this.links.some((function(o,n){if(o==e)return t.links.splice(n,1),!0})):"delete"==e.editstatus?(e.editstatus="change",this.linkchanged(e)):e.editstatus="delete"},savesharelink:function(){var e=[];this.links.forEach((function(t){var o={link:t.link,desc:t.desc,access:t.access,status:t.status,expire:t.expire,created:t.created,version:t.version,auths:t.auths},n=new Date;"1d"==o.status?(o.status="period",n.setDate(n.getDate()+1),o.expire=n.toISOString()):"3d"==o.status?(o.status="period",n.setDate(n.getDate()+3),o.expire=n.toISOString()):"7d"==o.status?(o.status="period",n.setDate(n.getDate()+7),o.expire=n.toISOString()):"1m"==o.status?(o.status="period",n.setDate(n.getDate()+31),o.expire=n.toISOString()):"open"!=o.status&&"close"!=o.status&&"hangauth"!=o.status||(n.setDate(n.getDate()+4015),o.expire=n.toISOString()),"delete"!=t.editstatus&&e.push(o)}));var t={doc_id:this.$props.doc.id,links:e},o=this;Ie.post("/api/docs/savelinks",t).then((function(e){Object($e["a"])({message:"保存成功",type:"success",showClose:!0}),o.links=e.data.links,o.links.forEach((function(e){e.editstatus="",o.preparelinkdata(e)}))})).catch((function(e){Object($e["a"])({message:"保存失败"+e.message,type:"error",showClose:!0})})),console.log(this.links)},setcliptext:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()},opencontextmenu:function(t){this.$refs.contextmenu.show(t),t.stopPropagation?t.stopPropagation():e.cancelBubble=!0}}};n("67c5");const Eo=v()(_o,[["render",so]]);var Bo=Eo,So=n("201d"),zo=(n("a72e"),{name:"DocList",data:function(){return{parentfolder:{id:"",doc_title:"..",doc_type:"parentfolder",share_link:""}}},setup:function(){var e=Object(w["b"])();return{store:e}},props:["listtype"],mounted:function(){var e=null==this.$props.listtype?"recent":this.$props.listtype;this.store.state.isLogin&&this.getdoclist(e);var t=this;this.$bus.on("account-login",(function(){t.getdoclist(e)}))},methods:{getdoclist:function(e){this.store.dispatch("switchlist",{listtype:e,folder:"/",folderlink:""})},setactivedoc:function(e){for(var t=this.store.state.doclist,o=0;o<t.length;o++)t[o].id==e.id?this.$set(this.store.state.doclist[o].active,!0):this.$set(this.store.state.doclist[o].active,!1)}},components:{DocItem:Bo,PerfectScrollbar:So["PerfectScrollbar"]},updated:function(){console.log("doclist updated")}});n("bab7");const $o=v()(zo,[["render",kt],["__scopeId","data-v-48cdeabc"]]);var Do=$o,Mo=function(e){return Object(c["pushScopeId"])("data-v-4d20a086"),e=e(),Object(c["popScopeId"])(),e},To={key:0,class:"sidebar-top"},Io={class:"mobilemenu"},Lo=Mo((function(){return Object(c["createElementVNode"])("div",{class:"operate-btn operate-create el-dropdown-link"},[Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"VisionOn")],-1)})),Ro=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}},"我的文档",-1)})),Uo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}},"共享给我的",-1)})),Ao=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-whiteboard",style:{"font-size":"9px"}},null,-1)})),Ho={style:{"padding-left":"1em"}},Fo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 更多模板 ",-1)})),Po=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 本地绘图板 ",-1)})),Wo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}},"图册索引",-1)})),qo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 注册/登录 ",-1)})),Jo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 账户信息 ",-1)})),Xo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 帮助 ",-1)})),Yo=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}},"示例",-1)})),Ko={style:{height:"400px","margin-bottom":"3em",overflow:"scroll"}},Go={style:{height:"400px","margin-bottom":"3em",overflow:"scroll"}},Qo={key:1,class:"sidebar-expand"},Zo={class:"personal-container"},en=["src"],tn={class:"enter-vip-link"},on={class:"enter-vip-text"},nn={class:"account-name"},cn={class:"sidebar-operate"},an={key:0,class:"operate-btn operate-create toggle el-dropdown-link"},rn=Mo((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"新建",-1)})),sn=[rn],ln={key:1,class:"operate-btn operate-create toggle el-dropdown-link"},dn=Mo((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"注册/登录",-1)})),un=[dn],pn=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-whiteboard",style:{"font-size":"9px"}},null,-1)})),mn={style:{"padding-left":"1em"}},bn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 更多模板 ",-1)})),fn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 创建目录 ",-1)})),hn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 注册/登录 ",-1)})),On=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 账户权益 ",-1)})),jn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 本地剪切板 ",-1)})),gn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}},"最近更新",-1)})),vn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 帮助 ",-1)})),kn={class:"sidebar-content widget-scroller"},Vn={class:"widget-scroller-wrap",tabindex:"-1"},wn=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"最近访问",-1)})),yn=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"我创建的",-1)})),Nn=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-fenxianggeiwo",style:{"font-size":"125%"}},null,-1)})),Cn=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"与我共享",-1)})),xn=[Nn,Cn],_n=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"回收站",-1)})),En=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-V",style:{"font-size":"120%"}},null,-1)})),Bn=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"Vision推荐",-1)})),Sn=[En,Bn],zn=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"绘图板",-1)})),$n=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"夜晚模式",-1)})),Dn=Mo((function(){return Object(c["createElementVNode"])("span",{class:"item-text"},"白天模式",-1)})),Mn={class:"sidebar-footer"},Tn={class:"sidebar-panelswitch"},In=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-cc-question-square",style:{}},null,-1)})),Ln=[In],Rn=Mo((function(){return Object(c["createElementVNode"])("div",{class:"switch",style:{width:"95%","padding-top":"0.5em"}},[Object(c["createElementVNode"])("span",{style:{"font-size":"9px"}},"京ICP备2022021400号-1")],-1)})),Un={key:2,class:"sidebar-collapse"},An={class:"personal-container"},Hn=["src"],Fn={class:"enter-vip-link"},Pn={class:"enter-vip-text"},Wn={class:"account-name"},qn={class:"sidebar-operate"},Jn=Mo((function(){return Object(c["createElementVNode"])("div",{class:"operate-btn operate-create el-dropdown-link"},[Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"+")],-1)})),Xn=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-whiteboard",style:{"font-size":"9px"}},null,-1)})),Yn={style:{"padding-left":"1em"}},Kn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 更多模板 ",-1)})),Gn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 创建目录 ",-1)})),Qn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 注册/登录 ",-1)})),Zn=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 账户权益 ",-1)})),ec=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 本地剪切板 ",-1)})),tc=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}},"最近更新",-1)})),oc=Mo((function(){return Object(c["createElementVNode"])("span",{style:{"padding-left":"1em"}}," 帮助 ",-1)})),nc={class:"sidebar-content widget-scroller"},cc={class:"widget-scroller-wrap",tabindex:"-1"},ic=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-fenxianggeiwo",style:{"font-size":"125%"}},null,-1)})),ac=[ic],rc=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-V",style:{"font-size":"120%"}},null,-1)})),sc=[rc],lc=Mo((function(){return Object(c["createElementVNode"])("p",null,"此处为本地绘图板，免注册可使用，基于本地存储",-1)})),dc=Mo((function(){return Object(c["createElementVNode"])("p",null," ",-1)})),uc={style:{"text-align":"right",margin:"0"}},pc={class:"sidebar-footer"},mc={class:"sidebar-panelswitch"},bc=Mo((function(){return Object(c["createElementVNode"])("i",{class:"iconfont icon-cc-question-square",style:{}},null,-1)})),fc=[bc],hc=Mo((function(){return Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])("Vision已启动新的域名"),Object(c["createElementVNode"])("a",{href:"https://visionon.cn",target:"_blank"},"visionon.cn"),Object(c["createTextVNode"])(", 为确保正确迁移，需要您微信扫码确认. ")],-1)})),Oc=Mo((function(){return Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,"1. 如是手机注册，可直接去新域名登录."),Object(c["createElementVNode"])("li",null,"2. 新老域名后台一致，在线文档数据不受迁移影响"),Object(c["createElementVNode"])("li",null,"3. 建议您保存所有文档后，切换到新域名工作"),Object(c["createElementVNode"])("li",null,"4. 您在此域名的服务不受影响"),Object(c["createElementVNode"])("li",null,"5. 注：剪切板因是本地存储，需手工拷贝")],-1)})),jc=Mo((function(){return Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])("如遇到问题，请联系我们 "),Object(c["createElementVNode"])("a",{href:"https://pub-inc.visionon.cn/help/contact-us/",target:"_blank"},"帮助")],-1)})),gc={class:"dialog-footer"};function vc(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("font-awesome-icon"),s=Object(c["resolveComponent"])("el-dropdown-item"),l=Object(c["resolveComponent"])("el-dropdown-menu"),d=Object(c["resolveComponent"])("el-dropdown"),u=Object(c["resolveComponent"])("DocList"),p=Object(c["resolveComponent"])("el-drawer"),m=Object(c["resolveComponent"])("OutlineView"),b=Object(c["resolveComponent"])("el-button"),f=Object(c["resolveComponent"])("el-popover"),h=Object(c["resolveComponent"])("wxlogin"),O=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[n.store.state.isMobile?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",To,[Object(c["createElementVNode"])("div",Io,[Object(c["createVNode"])(d,{placement:"top"},{dropdown:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,null,{default:Object(c["withCtx"])((function(){return[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,onClick:t[0]||(t[0]=function(e){i.mobileopenlist="create",i.mobileopendocdlg=!0}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","list"],style:{}}),Ro]})),_:1})):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,onClick:t[1]||(t[1]=function(e){i.mobileopenlist="link",i.mobileopendocdlg=!0}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","share-alt"],style:{}}),Uo]})),_:1})):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.doctemplates,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:e},[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,onClick:function(t){return a.newdoc(e)},divided:0==t},{default:Object(c["withCtx"])((function(){return[Ao,Object(c["createTextVNode"])(),Object(c["createElementVNode"])("span",Ho," 新建"+Object(c["toDisplayString"])(e.name),1)]})),_:2},1032,["onClick","divided"])):Object(c["createCommentVNode"])("",!0)],64)})),128)),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:2,onClick:t[2]||(t[2]=function(e){return a.newbydlgtemplate()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","ellipsis-h"],style:{}}),Fo]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(s,{onClick:t[3]||(t[3]=function(e){return a.switchlist("clipboard",!1)}),style:{height:"1.5em"},divided:n.store.state.isLogin},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","clipboard"],style:{}}),Po]})),_:1},8,["divided"]),Object(c["createVNode"])(s,{onClick:t[4]||(t[4]=function(e){return i.mobileoutlinedlg=!0}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","list-alt"],style:{}}),Wo]})),_:1}),n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:3,onClick:t[5]||(t[5]=function(e){return n.router.push("/signin")}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","user"],style:{}}),qo]})),_:1})),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:4,onClick:t[6]||(t[6]=function(e){return n.router.push("/account")}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","user"],style:{}}),Jo]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(s,{onClick:t[7]||(t[7]=function(e){return a.openhelp()}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","question"],style:{}}),Xo]})),_:1}),Object(c["createVNode"])(s,{onClick:t[8]||(t[8]=function(e){i.mobileopenlist="visions",i.mobileopendocdlg=!0}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","list"],style:{}}),Yo]})),_:1})]})),_:1})]})),default:Object(c["withCtx"])((function(){return[Lo]})),_:1})]),Object(c["createVNode"])(p,{modelValue:i.mobileopendocdlg,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.mobileopendocdlg=e}),"append-to-body":!0,title:"打开文件",size:360,"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!0,"with-header":!1,"destroy-on-close":!0,direction:"btt"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ko,[Object(c["createVNode"])(u,{listtype:i.mobileopenlist},null,8,["listtype"])])]})),_:1},8,["modelValue"]),Object(c["createVNode"])(p,{modelValue:i.mobileoutlinedlg,"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.mobileoutlinedlg=e}),"append-to-body":!0,title:"图册索引",size:260,"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!0,"with-header":!1,"destroy-on-close":!0,direction:"btt"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Go,[(Object(c["openBlock"])(),Object(c["createBlock"])(m,{key:n.store.state.outlinerenderkey}))])]})),_:1},8,["modelValue"])])):Object(c["createCommentVNode"])("",!0),o.isexpand&&!n.store.state.isMobile?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qo,[Object(c["createElementVNode"])("div",Zo,[Object(c["createElementVNode"])("div",{class:"personal-info",onClick:t[11]||(t[11]=function(e){return a.toaccount()})},[Object(c["createElementVNode"])("img",{class:"own-photo",src:i.avatar},null,8,en)]),Object(c["createElementVNode"])("a",tn,[Object(c["createElementVNode"])("div",on,[Object(c["createVNode"])(r,{icon:["fas","user-circle"],style:{}}),Object(c["createElementVNode"])("span",nn,Object(c["toDisplayString"])(i.accountName),1)])])]),Object(c["createElementVNode"])("div",cn,[Object(c["createVNode"])(d,{placement:"top"},{dropdown:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,null,{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.doctemplates,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:e},[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,onClick:function(t){return a.newdoc(e)}},{default:Object(c["withCtx"])((function(){return[pn,Object(c["createTextVNode"])(),Object(c["createElementVNode"])("span",mn," 新建"+Object(c["toDisplayString"])(e.name),1)]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)],64)})),128)),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,onClick:t[12]||(t[12]=function(e){return a.newbydlgtemplate()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","ellipsis-h"],style:{}}),bn]})),_:1})):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin&&"create"==n.store.state.listtype?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,onClick:t[13]||(t[13]=function(e){return a.newfolder()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","folder-open"],style:{}}),fn]})),_:1})):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:2,onClick:t[14]||(t[14]=function(e){return n.router.push("/signin")}),style:{height:"1.5em"},divided:n.store.state.isLogin},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","user"],style:{}}),hn]})),_:1},8,["divided"])),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:3,onClick:t[15]||(t[15]=function(e){return n.router.push("/account")}),style:{height:"1.5em"},divided:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","user"],style:{}}),On]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(s,{onClick:t[16]||(t[16]=function(e){return a.switchlist("clipboard",!1)}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","clipboard"],style:{}}),jn]})),_:1}),Object(c["createVNode"])(s,{onClick:t[17]||(t[17]=function(e){return a.showNewVersionInfo(!0)}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","wrench"],style:{}}),gn]})),_:1}),Object(c["createVNode"])(s,{onClick:t[18]||(t[18]=function(e){return a.openhelp()}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","question"],style:{}}),vn]})),_:1})]})),_:1})]})),default:Object(c["withCtx"])((function(){return[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",an,sn)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ln,un))]})),_:1})]),Object(c["createElementVNode"])("div",kn,[Object(c["createElementVNode"])("div",Vn,[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"recent"==n.store.state.listtype}),onClick:t[19]||(t[19]=function(e){return a.switchlist("recent")})},[Object(c["createVNode"])(r,{icon:["far","clock"],style:{}}),wn],2)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"create"==n.store.state.listtype}),onClick:t[20]||(t[20]=function(e){return a.switchlist("create")})},[Object(c["createVNode"])(r,{icon:["far","folder-open"],style:{}}),yn],2)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:2,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"link"==n.store.state.listtype}),onClick:t[21]||(t[21]=function(e){return a.switchlist("link")})},xn,2)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:3,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"recyle"==n.store.state.listtype}),onClick:t[22]||(t[22]=function(e){return a.switchlist("recyle")})},[Object(c["createVNode"])(r,{icon:["far","trash-alt"],style:{}}),_n],2)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"visions"==n.store.state.listtype}),onClick:t[23]||(t[23]=function(e){return a.switchlist("visions")}),title:"Vision推荐"},Sn,2),Object(c["createElementVNode"])("div",{class:"sidebar-content-item",onClick:[t[24]||(t[24]=Object(c["withModifiers"])((function(e){return a.switchlist("clipboard")}),["exact"])),t[25]||(t[25]=Object(c["withModifiers"])((function(e){return a.switchlist("clipboard",!0)}),["ctrl","exact"]))],title:"本地绘图板 [Ctrl+]新页签打开"},[Object(c["createVNode"])(r,{icon:["far","clipboard"],style:{}}),zn]),"light"==n.store.state.theme?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:4,class:Object(c["normalizeClass"])({"sidebar-content-item":!0}),onClick:t[26]||(t[26]=function(e){return a.switchtheme("dark")})},[Object(c["createVNode"])(r,{icon:["fas","moon"],style:{}}),$n])):Object(c["createCommentVNode"])("",!0),"dark"==n.store.state.theme?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:5,class:Object(c["normalizeClass"])({"sidebar-content-item":!0}),onClick:t[27]||(t[27]=function(e){return a.switchtheme("light")})},[Object(c["createVNode"])(r,{icon:["fas","sun"],style:{}}),Dn])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",Mn,[Object(c["createElementVNode"])("div",Tn,["m1"!=o.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:"switch",onClick:t[28]||(t[28]=function(t){return e.$bus.emit("pane-switchviewmode","m1")}),title:"最大化"},[Object(c["createVNode"])(r,{icon:["fas","window-maximize"],style:{}})])):Object(c["createCommentVNode"])("",!0),"m2"!=o.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:"switch",onClick:t[29]||(t[29]=function(t){return e.$bus.emit("pane-switchviewmode","m2")}),title:"展开列表"},[Object(c["createVNode"])(r,{icon:["fas","columns"],style:{}})])):Object(c["createCommentVNode"])("",!0),"m3"!=o.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:2,class:"switch",onClick:t[30]||(t[30]=function(t){return e.$bus.emit("pane-switchviewmode","m3")}),title:"展开全部"},[Object(c["createVNode"])(r,{icon:["far","map"],style:{}})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",{class:"switch",onClick:t[31]||(t[31]=function(e){return a.openhelp()}),title:"帮助"},Ln),Rn])])])):Object(c["createCommentVNode"])("",!0),o.isexpand||n.store.state.isMobile?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Un,[Object(c["createElementVNode"])("div",An,[Object(c["createElementVNode"])("div",{class:"personal-info",onClick:t[32]||(t[32]=function(e){return a.toaccount()})},[Object(c["createElementVNode"])("img",{class:"own-photo",src:i.avatar},null,8,Hn)]),Object(c["createElementVNode"])("a",Fn,[Object(c["createElementVNode"])("div",Pn,[Object(c["createElementVNode"])("span",Wn,Object(c["toDisplayString"])(i.accountName),1)])])]),Object(c["createElementVNode"])("div",qn,[Object(c["createVNode"])(d,{placement:"top"},{dropdown:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,null,{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.doctemplates,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:e},[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,onClick:function(t){return a.newdoc(e)}},{default:Object(c["withCtx"])((function(){return[Xn,Object(c["createTextVNode"])(),Object(c["createElementVNode"])("span",Yn," 新建"+Object(c["toDisplayString"])(e.name),1)]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)],64)})),128)),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:0,onClick:t[33]||(t[33]=function(e){return a.newbydlgtemplate()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","ellipsis-h"],style:{}}),Kn]})),_:1})):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin&&"create"==n.store.state.listtype?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,onClick:t[34]||(t[34]=function(e){return a.newfolder()})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","folder-open"],style:{}}),Gn]})),_:1})):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:2,onClick:t[35]||(t[35]=function(e){return n.router.push("/signin")}),style:{height:"1.5em"},divided:n.store.state.isLogin},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","user"],style:{}}),Qn]})),_:1},8,["divided"])),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:3,onClick:t[36]||(t[36]=function(e){return n.router.push("/account")}),style:{height:"1.5em"},divided:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","user"],style:{}}),Zn]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(s,{onClick:t[37]||(t[37]=function(e){return a.switchlist("clipboard",!1)}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["far","clipboard"],style:{}}),ec]})),_:1}),Object(c["createVNode"])(s,{onClick:t[38]||(t[38]=function(e){return a.showNewVersionInfo(!0)}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","wrench"],style:{}}),tc]})),_:1}),Object(c["createVNode"])(s,{onClick:t[39]||(t[39]=function(e){return a.openhelp()}),style:{height:"1.5em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{icon:["fas","question"],style:{}}),oc]})),_:1})]})),_:1})]})),default:Object(c["withCtx"])((function(){return[Jn]})),_:1})]),Object(c["createElementVNode"])("div",nc,[Object(c["createElementVNode"])("div",cc,[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"recent"==n.store.state.listtype}),onClick:t[40]||(t[40]=function(e){return a.switchlist("recent")}),title:"最近访问"},[Object(c["createVNode"])(r,{icon:["far","clock"],style:{}})],2)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"create"==n.store.state.listtype}),onClick:t[41]||(t[41]=function(e){return a.switchlist("create")}),title:"我创建的"},[Object(c["createVNode"])(r,{icon:["far","folder-open"],style:{}})],2)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:2,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"link"==n.store.state.listtype}),onClick:t[42]||(t[42]=function(e){return a.switchlist("link")}),title:"与我共享"},ac,2)):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:3,class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"recyle"==n.store.state.listtype}),onClick:t[43]||(t[43]=function(e){return a.switchlist("recyle")}),title:"回收站"},[Object(c["createVNode"])(r,{icon:["far","trash-alt"],style:{}})],2)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])({"sidebar-content-item":!0,select:"visions"==n.store.state.listtype}),onClick:t[44]||(t[44]=function(e){return a.switchlist("visions")}),title:"Vision推荐"},sc,2),Object(c["createVNode"])(f,{visible:a.showclipboardnotifyfunc,"onUpdate:visible":t[48]||(t[48]=function(e){return a.showclipboardnotifyfunc=e}),placement:"right-start",offset:0,width:160,"popper-class":"el-message--warning"},{reference:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",{class:"sidebar-content-item",onClick:[t[46]||(t[46]=Object(c["withModifiers"])((function(e){return a.switchlist("clipboard")}),["exact"])),t[47]||(t[47]=Object(c["withModifiers"])((function(e){return a.switchlist("clipboard",!0)}),["ctrl","exact"]))],title:"本地绘图板 [Ctrl+]新窗口打开"},[Object(c["createVNode"])(r,{icon:["far","clipboard"],style:{}})])]})),default:Object(c["withCtx"])((function(){return[lc,dc,Object(c["createElementVNode"])("div",uc,[Object(c["createVNode"])(b,{type:"success",plain:"",size:"small",onClick:t[45]||(t[45]=function(e){return a.closeintroclipboard()})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("我已了解，不再提示")]})),_:1})])]})),_:1},8,["visible"]),"light"==n.store.state.theme?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:4,class:Object(c["normalizeClass"])({"sidebar-content-item":!0}),onClick:t[49]||(t[49]=function(e){return a.switchtheme("dark")}),title:"夜晚模式"},[Object(c["createVNode"])(r,{icon:["fas","moon"],style:{}})])):Object(c["createCommentVNode"])("",!0),"dark"==n.store.state.theme?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:5,class:Object(c["normalizeClass"])({"sidebar-content-item":!0}),onClick:t[50]||(t[50]=function(e){return a.switchtheme("light")}),title:"白天模式"},[Object(c["createVNode"])(r,{icon:["fas","sun"],style:{}})])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",pc,[Object(c["createElementVNode"])("div",mc,["m1"!=o.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:"switch",onClick:t[51]||(t[51]=function(t){return e.$bus.emit("pane-switchviewmode","m1")}),title:"最大化"},[Object(c["createVNode"])(r,{icon:["fas","window-maximize"],style:{}})])):Object(c["createCommentVNode"])("",!0),"m2"!=o.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:"switch",onClick:t[52]||(t[52]=function(t){return e.$bus.emit("pane-switchviewmode","m2")}),title:"展开列表"},[Object(c["createVNode"])(r,{icon:["fas","columns"],style:{}})])):Object(c["createCommentVNode"])("",!0),"m3"!=o.viewmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:2,class:"switch",onClick:t[53]||(t[53]=function(t){return e.$bus.emit("pane-switchviewmode","m3")}),title:"展开全部"},[Object(c["createVNode"])(r,{icon:["far","map"],style:{}})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",{class:"switch",onClick:t[54]||(t[54]=function(e){return a.openhelp()}),title:"帮助"},fc)])])])),Object(c["createVNode"])(O,{modelValue:i.showNewSiteDlg,"onUpdate:modelValue":t[56]||(t[56]=function(e){return i.showNewSiteDlg=e}),title:"Vision启用新域名 VisionOn.cn",width:"30%",center:""},{footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",gc,[Object(c["createVNode"])(b,{type:"primary",onClick:t[55]||(t[55]=function(e){return i.showNewSiteDlg=!1})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("关闭")]})),_:1})])]})),default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",null,[hc,Oc,jc,Object(c["createVNode"])(h,{appid:"wx3e303ce7a55fb96e",scope:"snsapi_login",redirect_uri:"https://caogao.online/signin/wxbind",state:"220810"})])]})),_:1},8,["modelValue"])],64)}n("466d");var kc=n("2295"),Vc=n("5069"),wc={class:"outlinecontainer"};function yc(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("editor"),s=Object(c["resolveComponent"])("perfect-scrollbar");return Object(c["openBlock"])(),Object(c["createBlock"])(s,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",wc,[Object(c["createVNode"])(r,{ref:"outlineeditor",config:i.config,initialized:a.onInitialized},null,8,["config","initialized"])])]})),_:1})}var Nc=n("d4ec"),Cc=n("bee2"),xc=["id"];function _c(e,t,o,n,i,a){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{id:e.holder},null,8,xc)}var Ec=n("53ca"),Bc=n("5530"),Sc=(n("b64b"),n("bca5")),zc=n.n(Sc),$c=n("923a"),Dc=n.n($c),Mc=n("749b"),Tc=n.n(Mc),Ic={header:Promise.resolve().then(n.t.bind(null,"3ecd",7)),list:Promise.resolve().then(n.t.bind(null,"71c0",7))},Lc=Object(c["defineComponent"])({name:"vue-editor-js",props:{holder:{type:String,default:function(){return"vue-editor-js"},require:!0},config:{type:Object,default:function(){return{}},require:!0},initialized:{type:Function,default:function(){}}},setup:function(e,t){var o=Object(c["reactive"])({editor:null}),n=e;function i(e){a(),o.editor=new zc.a(Object(Bc["a"])({holder:e.holder||"vue-editor-js"},e.config)),o.editor.isReady.then((function(){var e=o.editor,t=new Tc.a({editor:e});new Dc.a(e),null!=n.config.data&&""!=n.config.data&&t.initialize(n.config.data)})).catch((function(e){console.log("Editor.js initialization failed because of ".concat(e))})),e.initialized(o.editor)}function a(){o.editor&&(o.editor.destroy(),o.editor=null)}return Object(c["onMounted"])((function(t){return i(e)})),{props:e,state:o}},methods:{useTools:function(e,t){var o=Object.keys(Ic),n=Object(Bc["a"])({},e.customTools);return o.every((function(t){return!e[t]}))?(o.forEach((function(e){return n[e]={class:Ic[e]}})),Object.keys(t).forEach((function(e){void 0!==n[e]&&null!==n[e]&&(n[e]["config"]=t[e])})),n):(o.forEach((function(t){var o=e[t];if(o&&(n[t]={class:Ic[t]},"object"===Object(Ec["a"])(o))){var c=Object.assign({},e[t]);delete c["class"],n[t]=Object.assign(n[t],c)}})),Object.keys(t).forEach((function(e){void 0!==n[e]&&null!==n[e]&&(n[e]["config"]=t[e])})),n)}}});const Rc=v()(Lc,[["render",_c]]);var Uc=Rc,Ac=(n("71c0"),n("3ecd")),Hc=n.n(Ac),Fc=n("b391"),Pc=n.n(Fc),Wc=n("0960"),qc=n.n(Wc),Jc=n("5d25"),Xc=n.n(Jc),Yc=n("b383"),Kc=n.n(Yc),Gc=function(){function e(t){var o=t.api,n=t.data,c=(t.config,t.block);Object(Nc["a"])(this,e),this.api=o,this.data=n,this.block=c,this.bookmark=null,null!=n&&(this.bookmark=n.bookmark)}return Object(Cc["a"])(e,[{key:"save",value:function(){return{bookmark:this.bookmark}}},{key:"render",value:function(){var e=this;return null==e.bookmark?[{icon:'<svg t="1670289839063" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11484" width="32" height="32"><path d="M832 48H192c-9.6 0-16 6.4-16 16v896c0 6.4 3.2 11.2 8 14.4 4.8 3.2 11.2 3.2 16 0L512 787.2l312 187.2c1.6 1.6 4.8 1.6 8 1.6s4.8 0 8-1.6c4.8-3.2 8-8 8-14.4V64c0-9.6-6.4-16-16-16z m-16 883.2L520 753.6c-1.6-1.6-4.8-1.6-8-1.6s-6.4 0-8 1.6L208 931.2V80h608v851.2z" fill="" p-id="11485"></path><path d="M384 432h112v112c0 9.6 6.4 16 16 16s16-6.4 16-16v-112h112c9.6 0 16-6.4 16-16s-6.4-16-16-16h-112v-112c0-9.6-6.4-16-16-16s-16 6.4-16 16v112h-112c-9.6 0-16 6.4-16 16s6.4 16 16 16z" fill="" p-id="11486"></path></svg>',label:"创建书签",toggle:"bookmark",onActivate:function(){var t=window.__forvuxstoreobj.state.drawioframe.contentWindow.getCurrentSelectBookMark(),o=JSON.parse(t);o.success?(o.text="",e.bookmark=o,e.block.dispatchChange(),e.block.holder.querySelector("span.bookmarkicon").style.display=""):Object($e["a"])({message:"创建书签失败,"+o.msg,type:"error",showClose:!0})}}]:[{icon:'<svg t="1670289839063" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11484" width="32" height="32"><path d="M832 48H192c-9.6 0-16 6.4-16 16v896c0 6.4 3.2 11.2 8 14.4 4.8 3.2 11.2 3.2 16 0L512 787.2l312 187.2c1.6 1.6 4.8 1.6 8 1.6s4.8 0 8-1.6c4.8-3.2 8-8 8-14.4V64c0-9.6-6.4-16-16-16z m-16 883.2L520 753.6c-1.6-1.6-4.8-1.6-8-1.6s-6.4 0-8 1.6L208 931.2V80h608v851.2z" fill="" p-id="11485"></path><path d="M384 432h112v112c0 9.6 6.4 16 16 16s16-6.4 16-16v-112h112c9.6 0 16-6.4 16-16s-6.4-16-16-16h-112v-112c0-9.6-6.4-16-16-16s-16 6.4-16 16v112h-112c-9.6 0-16 6.4-16 16s6.4 16 16 16z" fill="" p-id="11486"></path></svg>',label:"更新书签",toggle:"bookmark",onActivate:function(){var t=window.__forvuxstoreobj.state.drawioframe.contentWindow.getCurrentSelectBookMark(),o=JSON.parse(t);o.success?(o.text="",e.bookmark=o,e.block.dispatchChange(),e.block.holder.querySelector("span.bookmarkicon").style.display=""):Object($e["a"])({message:"更新失败,"+o.msg,type:"error",showClose:!0})}},{icon:'<svg t="1670289896114" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11640" width="32" height="32"><path d="M832 48H192c-9.6 0-16 6.4-16 16v896c0 6.4 3.2 11.2 8 14.4 4.8 3.2 11.2 3.2 16 0L512 787.2l312 187.2c1.6 1.6 4.8 1.6 8 1.6s4.8 0 8-1.6c4.8-3.2 8-8 8-14.4V64c0-9.6-6.4-16-16-16z m-16 883.2L520 753.6c-1.6-1.6-4.8-1.6-8-1.6s-6.4 0-8 1.6L208 931.2V80h608v851.2z" fill="" p-id="11641"></path><path d="M384 432h256c9.6 0 16-6.4 16-16s-6.4-16-16-16H384c-9.6 0-16 6.4-16 16s6.4 16 16 16z" fill="" p-id="11642"></path></svg>',label:"删除书签",toggle:"bookmark",isDisabled:null==e.bookmark,onActivate:function(){e.bookmark=null,e.block.dispatchChange(),e.block.holder.querySelector("span.bookmarkicon").style.display="none"}}]}},{key:"wrap",value:function(e){var t=this,o=document.createElement("div");o.append(e),o.style.position="relative",e.style.position="relative";var n=document.createElement("span");return o.append(n),n.classList.add("bookmarkicon"),n.innerHTML='<svg t="1670290705352" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18615" width="32" height="32"><path d="M713.142857 292.571429a18.285714 18.285714 0 1 1 36.571429 0v548.571428a18.285714 18.285714 0 0 1-28.416 15.213714L512 716.836571l-209.298286 139.52A18.285714 18.285714 0 0 1 274.285714 841.142857V182.857143a18.285714 18.285714 0 0 1 18.285715-18.285714h438.857142a18.285714 18.285714 0 1 1 0 36.571428H310.857143v605.842286l191.012571-127.341714a18.285714 18.285714 0 0 1 20.260572 0l191.012571 127.341714V292.571429zM402.285714 384a18.285714 18.285714 0 1 1 0-36.571429h219.428572a18.285714 18.285714 0 1 1 0 36.571429h-219.428572z m0 73.142857a18.285714 18.285714 0 1 1 0-36.571428h146.285715a18.285714 18.285714 0 1 1 0 36.571428h-146.285715z" p-id="18616" fill="#1296db"></path></svg>',n.style.position="absolute",n.style.height="24px",n.style.right="8px",n.title=null!=this.bookmark?this.bookmark.text:"",n.style.display=null!=this.bookmark?"":"none",n.style.top="8px",n.style.cursor="pointer",n.addEventListener("click",(function(){null!=t.bookmark&&window.__forvuxstoreobj.state.drawioframe.contentWindow.postMessage(JSON.stringify({action:"v_bookmark",command:"to-bookmark",bookmark:t.bookmark}),"*")})),o}}],[{key:"isTune",get:function(){return!0}}]),e}(),Qc=function(){function e(t){var o=t.api;Object(Nc["a"])(this,e),this.api=o,this.button=null,this.state=!1}return Object(Cc["a"])(e,[{key:"render",value:function(){return this.button=document.createElement("span"),this.button.innerHTML='<svg t="1670289839063" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11484" width="18" height="18"><path d="M832 48H192c-9.6 0-16 6.4-16 16v896c0 6.4 3.2 11.2 8 14.4 4.8 3.2 11.2 3.2 16 0L512 787.2l312 187.2c1.6 1.6 4.8 1.6 8 1.6s4.8 0 8-1.6c4.8-3.2 8-8 8-14.4V64c0-9.6-6.4-16-16-16z m-16 883.2L520 753.6c-1.6-1.6-4.8-1.6-8-1.6s-6.4 0-8 1.6L208 931.2V80h608v851.2z" fill="" p-id="11485"></path><path d="M384 432h112v112c0 9.6 6.4 16 16 16s16-6.4 16-16v-112h112c9.6 0 16-6.4 16-16s-6.4-16-16-16h-112v-112c0-9.6-6.4-16-16-16s-16 6.4-16 16v112h-112c-9.6 0-16 6.4-16 16s6.4 16 16 16z" fill="" p-id="11486"></path></svg>',this.button.style.height="18px",this.button.style.marginTop="6px",this.button}},{key:"surround",value:function(e){var t=e.extractContents(),o=t.querySelector("button.bookmarkbutton");if(o)Object($e["a"])({message:"已包含书签，不能重复创建",type:"warning",showClose:!0});else{var n=window.__forvuxstoreobj.state.drawioframe.contentWindow.getCurrentSelectBookMark(),c=JSON.parse(n);if(c.success){var i=document.createElement("span");i.innerHTML=t.textContent,i.classList.add("bookmarkbutton"),c.text="";var a=JSON.stringify(c);i.setAttribute("onclick","__v_inlinebookmarkclick('"+Xe["a"].encode(a)+"');"),e.insertNode(i)}else Object($e["a"])({message:"创建书签失败,"+c.msg,type:"error",showClose:!0})}}},{key:"checkState",value:function(e){}}],[{key:"sanitize",get:function(){return{span:{class:"bookmarkbutton",onclick:!0}}}},{key:"isInline",get:function(){return!0}}]),e}();Object(X["a"])(Qc,"title","创建书签"),window.__v_inlinebookmarkclick=function(e){var t=JSON.parse(Xe["a"].decode(e));window.__forvuxstoreobj.state.drawioframe.contentWindow.postMessage(JSON.stringify({action:"v_bookmark",command:"to-bookmark",bookmark:t}),"*")};var Zc={components:{Editor:Uc,PerfectScrollbar:So["PerfectScrollbar"]},setup:function(){var e=Object(w["b"])();return window.__forvuxstoreobj=e,{store:e}},data:function(){var e="";if(window.__forvuxstoreobj.state.drawioframe&&window.__forvuxstoreobj.state.drawioframe.contentWindow){var t=window.__forvuxstoreobj.state.drawioframe.contentWindow.getCurrentDocOutline();null!=t&&""!=t&&(e=JSON.parse(t))}return{config:{placeholder:"创建索引：选中图形，右键->【创建书签】，即在此增加一个索引。 点击索引右侧图标，即可跳转到图形位置。",inlineToolbar:["inlineBookmark","marker","inlineCode","link","bold","italic"],tools:{header:{class:Hc.a,config:{placeholder:"标题",levels:[2,3,4],defaultLevel:3}},list:{class:Kc.a,inlineToolbar:!0},marker:{class:qc.a,shortcut:"CMD+SHIFT+M"},delimiter:Pc.a,inlineCode:{class:Xc.a,shortcut:"CMD+SHIFT+C"},inlineBookmark:Qc,bookmarkTune:Gc},tunes:["bookmarkTune"],onReady:function(){},onChange:function(e,t){e.saver.save().then((function(e){var t=JSON.stringify(e);window.__forvuxstoreobj.state.drawioframe.contentWindow.postMessage(JSON.stringify({action:"v_bookmark",command:"setoutline",outlinetext:t}),"*")}))},data:e,logLevel:"ERROR",readOnly:window.__forvuxstoreobj.state.isReadShare||0==window.__forvuxstoreobj.state.isEditMode,i18n:{messages:{ui:{blockTunes:{toggler:{"Click to tune":"调整","or drag to move":"拖拽移动"}},inlineToolbar:{converter:{"Convert to":"转成"}},toolbar:{toolbox:{Add:"添加"}}},toolNames:{Text:"文本",Heading:"标题",List:"列表",Warning:"提示",Checklist:"清单",Quote:"引用",Code:"代码",Delimiter:"分割线","Raw HTML":"原始HTML",Table:"表格",Link:"链接",Marker:"标记",Bold:"粗体",Italic:"斜体",InlineCode:"标红","Nested Checklist":"列表/清单"},tools:{warning:{Title:"提示",Message:"提示信息"},link:{"Add a link":"添加链接"},stub:{"The block can not be displayed correctly.":"块不能正常显示"},header:{"Heading 2":"大标题","Heading 3":"中标题","Heading 4":"小标题"},table:{"With headings":"表头","Without headings":"无表头","Add row above":"在上方插入行","Add row below":"在下方插入行","Delete row":"删除行","Add column to left":"在左侧插入列","Add column to right":"在右侧插入列","Delete column":"删除列",Heading:"表头"}},blockTunes:{delete:{Delete:"删除","Click to delete":"确认删除"},moveUp:{"Move up":"上移"},moveDown:{"Move down":"下移"}}}}}}},methods:{onInitialized:function(e){},savedata:function(e){},listener_addnewbookmark:function(e){var t=JSON.parse(e["bookmark"]);if(t.success){var o=this.$refs.outlineeditor.state.editor,n=t.text.replace(/<[^>]+>/g,"");n.length>88&&(n=n.substring(0,88),n+=" ... "),t.text="";var c=o.blocks.v_insert("paragraph",{text:n},{},void 0,!0,!1,{bookmarkTune:{bookmark:t}});this.$bus.emit("pane-switchtab","outline"),this.$bus.emit("pane-switchviewmode","m2"),c.holder.style.background="rgba(251,241,241,.78)",window.setTimeout((function(){c.holder.style.background=""}),2e3),this.$ana.la(this.store.state.curdoc,"drawio.edit","op=addbookmark")}else Object($e["a"])({message:"创建书签失败,"+t.msg,type:"error",showClose:!0})},listener_outlineupdate:function(e){var t=e.outlinedata,o=this.$refs.outlineeditor.state.editor;this.$refs.outlineeditor.state.editor.saver.save().then((function(e){var n=JSON.parse(t);o.blocks.render(n)}))}},mounted:function(){this.$bus.on("outline.update",this.listener_outlineupdate),this.$bus.on("outline.addnewbookmark",this.listener_addnewbookmark)},unmounted:function(){this.$bus.off("outline.update",this.listener_outlineupdate),this.$bus.off("outline.addnewbookmark",this.listener_addnewbookmark)}};n("13d0");const ei=v()(Zc,[["render",yc]]);var ti=ei,oi={name:"SideOperator",props:["isexpand","viewmode"],setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},data:function(){return{accountName:"访客",avatar:"/default-avatar.png",newdoccount:0,doctemplates:[],showclipboardnotify:!1,showNewSiteDlg:!1,mobileopendocdlg:!1,mobileoutlinedlg:!1,mobileopenlist:"create",folderprops:{label:"doc_title",children:"children",isLeaf:"leaf"}}},components:{ElPopover:jo["a"],ElButton:Ke["a"],ElDialog:Ye["a"],ElDrawer:Ge["a"],ElDropdown:wo["a"],ElDropdownItem:wo["b"],ElDropdownMenu:wo["c"],wxlogin:Vc["a"],DocList:Do,OutlineView:ti},computed:{showclipboardnotifyfunc:function(){return this.showclipboardnotify&&!this.store.state.isMobile},isvisionon:function(){return"visionon.cn"==v_userconfig.origin}},methods:{toaccount:function(){this.router.push("/account")},newdoc:function(e){if("ready"==this.store.state.editorStatus){var t=parseInt(localStorage.getItem("V_DOCCOUNT"));isNaN(t)&&(t=this.store.state.doclist.length),t++,localStorage.setItem("V_DOCCOUNT",t);var o="新建"+e.name,n={doc_title:o+"("+this.numberToChinese(t)+")",doc_template:e.template,doc_libs:e.libs,doc_type:"vision",doc_parent:this.store.state.curfolder};this.$ana.la("","list.newdoc.begin","templatename="+e.name+"&template="+e.template);var c=this;"create"!=this.store.state.listtype&&"recent"!=this.store.state.listtype&&this.switchlist("create"),Ie.post("/api/docs/new",n).then((function(t){1==t.data.status?(c.store.dispatch("adddoc",t.data.doc),c.$ana.la(t.data.doc.id,"list.newdoc.success","templatename="+e.name+"&template="+e.template),Object($e["a"])({message:"创建成功，已切换到新文档",type:"success",showClose:!0}),c.router.push("/v/"+t.data.doc.id)):(c.$ana.la("","list.newdoc.failed","error="+t.data.message),Object($e["a"])({message:"创建失败，"+t.data.message,type:"error",showClose:!0}))}))}else Object($e["a"])({message:"创建失败，有操作未完成，请稍后再试",type:"error",showClose:!0})},newfolder:function(){if("ready"==this.store.state.editorStatus){var e=parseInt(localStorage.getItem("V_DOCCOUNT"));isNaN(e)&&(e=this.store.state.doclist.length),e++,localStorage.setItem("V_DOCCOUNT",e);var t="新建目录",o={doc_title:t+"("+this.numberToChinese(e)+")",doc_template:"",doc_libs:"",doc_type:"folder",doc_parent:this.store.state.curfolder};this.$ana.la("","list.newdoc.begin","doc_type=folder");var n=this;"create"!=this.store.state.listtype&&"recent"!=this.store.state.listtype&&this.switchlist("create"),Ie.post("/api/docs/new",o).then((function(e){1==e.data.status?(n.store.dispatch("adddoc",e.data.doc),n.$ana.la(e.data.doc.id,"list.newdoc.success","type=folder"),Object($e["a"])({message:"创建目录成功",type:"success",showClose:!0})):(n.$ana.la("","list.newdoc.failed","error="+e.data.message),Object($e["a"])({message:"创建目录失败，"+e.data.message,type:"error",showClose:!0}))}))}else Object($e["a"])({message:"创建失败，有操作未完成，请稍后再试",type:"error",showClose:!0})},loadfolderdata:function(e,t){if(0===e.level)return t([{doc_title:"我创建的",doc_id:"/"}]);var o="/api/docs/listfolder",n={parent:e.data.doc_id,sharelink:""};Ie.get(o,{params:n}).then((function(e){for(var o=e.data.foldlist,n=new Array,c=0;c<o.length;c++){for(var i=o[c],a=!1,r=0;r<n.length;r++)if(n[r].doc_id==i.doc_id){a=!0;break}a||(i.leaf=""==i.doc_subid,n.push(i))}t(n)})).catch((function(e){alert("获取目录错误，请稍后再试，错误原因:"+e.message),console.log(e.message)}))},newbydlgtemplate:function(){this.$bus.emit("newdoc-open-templatedlg")},switchlist:function(e,t){if(this.$ana.la("","list.switchlist","listtype="+e),"clipboard"!=e)this.store.state.listtype==e?"m1"==this.viewmode?this.$bus.emit("pane-switchviewmode","m2"):"m2"==this.viewmode&&this.$bus.emit("pane-switchviewmode","m1"):(this.store.state.listtype!=e&&this.store.dispatch("switchlist",{listtype:e,folder:"/",folderlink:""}),"m1"==this.viewmode&&this.$bus.emit("pane-switchviewmode","m2")),this.$bus.emit("pane-switchtab","doclist");else if(t){var o={};o=this.router.resolve({name:"Clipboard",params:{doc:""}}),window.open(o.href,"_blank")}else this.router.push({name:"Clipboard",params:{doc:""}})},switchtheme:function(e){this.store.dispatch("switchtheme",e),this.store.state.drawioframe&&this.store.state.drawioframe.contentWindow.postMessage(JSON.stringify({action:"v_settheme",command:e}),"*")},closeintroclipboard:function(){this.showclipboardnotify=!1,this.store.dispatch("changeusersetting",{key:"clipboard-introed",value:!0})},openhelp:function(){this.router.resolve({name:"Share",params:{doc:"JwlBvtEWSFapwEF7sBSCsQ",link:"fMwFXWHwRa29IWHvbp8pNg"}}),window.open("https://pub-inc.visionon.cn/topics/help/","_blank")},numberToChinese:function(e){for(var t=new Array("零","一","二","三","四","五","六","七","八","九","十"),o=new Array("","十","百","仟","萬","億","点",""),n=(""+e).replace(/(^0*)/g,"").split("."),c=0,i="",a=n[0].length-1;a>=0;a--){switch(c){case 0:i=o[7]+i;break;case 4:new RegExp("0{4}//d{"+(n[0].length-a-1)+"}$").test(n[0])||(i=o[4]+i);break;case 8:i=o[5]+i,o[7]=o[5],c=0;break}c%4==2&&0!=n[0].charAt(a+2)&&0==n[0].charAt(a+1)&&(i=t[0]+i),0!=n[0].charAt(a)&&(i=t[n[0].charAt(a)]+o[c%4]+i),c++}if(n.length>1)for(i+=o[6],a=0;a<n[1].length;a++)i+=t[n[1].charAt(a)];return"一十"==i&&(i="十"),i.match(/^一/)&&3==i.length&&(i=i.replace("一","")),i},showMessage:function(e){Object($e["a"])(e)},showNewVersionInfo:function(e){var t=localStorage.getItem("curVersion");(e||t<v_clientconfig.clientversion.version)&&(Object(kc["a"])({title:v_clientconfig.clientversion.title,dangerouslyUseHTMLString:!0,type:"success",message:v_clientconfig.clientversion.message,position:"top-right",showClose:!0,duration:0}),localStorage.setItem("curVersion",v_clientconfig.clientversion.version))},showNewSiteInfo:function(e){},refreshAccountInfo:function(){var e=this;this.store.state.isLogin&&Ie.get("/api/account/info").then((function(t){var o={islogin:!0,account:t.data.data};e.store.dispatch("setaccountinfo",o),e.accountName=t.data.data.nick_name,""!=t.data.data.wx_headimg&&(e.avatar=t.data.data.wx_headimg)})).catch((function(e){console.log("getaccount failed",e.message)}))}},mounted:function(){var e=this;this.refreshAccountInfo(),this.$bus.on("account-login",(function(){e.refreshAccountInfo()})),this.store.state.isLogin&&this.store.dispatch("refreshtoken"),this.$bus.on("doc-opened",(function(t){null==e.store.state.userconfig["settings"]["clipboard-introed"]&&(e.showclipboardnotify=!0)})),this.$bus.on("newdoc-bytemplate",(function(t){e.newdoc(t)}));var t=localStorage.getItem("vision.theme");this.switchtheme(t),this.store.state.isMobile||this.showNewVersionInfo(),window.setTimeout((function(){var t=localStorage.getItem(".newSiteDlgShowed");"Y"!=e.store.state.account.wx_unionid&&"true"!=t&&"N"==e.store.state.account.mobile_number&&"https://visionon.cn"!=window.location.origin&&(e.showNewSiteDlg=!0,localStorage.setItem(".newSiteDlgShowed","true"))}),3e3)},created:function(){this.doctemplates=v_userconfig()["doctemplates"]}};n("fae8");const ni=v()(oi,[["render",vc],["__scopeId","data-v-4d20a086"]]);var ci=ni,ii={key:0,class:"status-bar-mobile"},ai={class:"doc-title"},ri=["size","readonly"],si={class:"doc-operate"},li={class:"doc-viewmode"},di={key:0,class:"switch"},ui={key:1,class:"switch"},pi={key:1,class:"status-bar"},mi={key:0,class:"doc-owner"},bi={class:"doc-title"},fi=["size","readonly"],hi={key:1,class:"doc-filedate"},Oi={key:2,class:"doc-filedate"},ji={key:3,class:"doc-filedate"},gi=Object(c["createElementVNode"])("a",{href:"https://pub-inc.visionon.cn/faqs/locale_doc/",target:"_blank"},"了解更多",-1),vi={class:"file-accesslist"},ki=Object(c["createElementVNode"])("span",null,"最近:",-1),Vi={class:"doc-operate"},wi={style:{"margin-bottom":"3em",overflow:"scroll"}};function yi(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("el-button"),s=Object(c["resolveComponent"])("font-awesome-icon"),l=Object(c["resolveComponent"])("avatar"),d=Object(c["resolveComponent"])("DocShare"),u=Object(c["resolveComponent"])("el-drawer");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[n.store.state.isMobile?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ii,[Object(c["createElementVNode"])("div",ai,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.doc_title=e}),maxlength:"10",size:a.boxwidth,onBlur:t[1]||(t[1]=function(e){return a.commit_change()}),onKeyup:t[2]||(t[2]=Object(c["withKeys"])((function(e){return a.commit_change()}),["enter"])),readonly:n.store.state.isDraftMode},null,40,ri),[[c["vModelText"],i.doc_title]])]),Object(c["createElementVNode"])("div",si,[n.store.state.isLogin&&i.docinfo.owner_id==n.store.state.account.id?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0,onClick:t[3]||(t[3]=function(e){return a.opensharedlg()}),type:"warning",size:"small",round:""},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("分享")]})),_:1})):Object(c["createCommentVNode"])("",!0),i.docinfo.owner_id!=n.store.state.account.id?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,onClick:t[4]||(t[4]=function(e){return a.addsharemelink()}),type:"warning",size:"small",round:""},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("收藏")]})),_:1})):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",li,[n.store.state.isEditMode||n.store.state.isReadShare?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",di,[Object(c["createVNode"])(s,{icon:["fas","edit"],style:{},title:"编辑模式",onClick:t[5]||(t[5]=function(t){return e.$bus.emit("toggle-edit-mode")})})])),n.store.state.isEditMode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ui,[Object(c["createVNode"])(s,{icon:["far","eye"],style:{},title:"浏览模式",onClick:t[6]||(t[6]=function(t){return e.$bus.emit("toggle-edit-mode")})})])):Object(c["createCommentVNode"])("",!0)])])):Object(c["createCommentVNode"])("",!0),n.store.state.isMobile?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",pi,[n.store.state.isDraftMode?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",mi,[Object(c["createVNode"])(l,{userid:i.docinfo.owner_id,size:"medium"},null,8,["userid"])])),Object(c["createElementVNode"])("div",bi,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=function(e){return i.doc_title=e}),maxlength:"80",size:a.boxwidth,onBlur:t[8]||(t[8]=function(e){return a.commit_change()}),onKeyup:t[9]||(t[9]=Object(c["withKeys"])((function(e){return a.commit_change()}),["enter"])),readonly:n.store.state.isDraftMode},null,40,fi),[[c["vModelText"],i.doc_title]])]),a.isowndoc||n.store.state.isDraftMode?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",hi,Object(c["toDisplayString"])(i.docinfo.owner_name)+" 创建于"+Object(c["toDisplayString"])(null!=i.docinfo.created_at?i.docinfo.created_at.substring(2,10):"")+"日 ",1)),a.isowndoc&&!n.store.state.isDraftMode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Oi," 我 创建于"+Object(c["toDisplayString"])(null!=i.docinfo.created_at?i.docinfo.created_at.substring(2,10):"")+"日 ",1)):Object(c["createCommentVNode"])("",!0),n.store.state.isDraftMode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ji,[Object(c["createTextVNode"])(" 缓存于浏览器中，易丢失 "),gi])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",vi,[ki,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.recentupatelist,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:e},[Object(c["createVNode"])(l,{userid:e.user_id,tips:a.accessitemtips(e)},null,8,["userid","tips"])])})),128))]),Object(c["createElementVNode"])("div",Vi,[n.store.state.isEditMode?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0,type:"default",size:"small",round:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["far","eye"],style:{},title:"转为浏览模式",onClick:t[10]||(t[10]=function(t){return e.$bus.emit("toggle-edit-mode")})})]})),_:1})):Object(c["createCommentVNode"])("",!0),n.store.state.isEditMode||n.store.state.isReadShare?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,type:"default",size:"small",round:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{icon:["far","edit"],style:{},title:"转为编辑模式",onClick:t[11]||(t[11]=function(t){return e.$bus.emit("toggle-edit-mode")})})]})),_:1})),n.store.state.isLogin&&i.docinfo.owner_id==n.store.state.account.id?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:2,onClick:t[12]||(t[12]=function(e){return a.opensharedlg()}),type:"warning",size:"small",round:""},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("分享")]})),_:1})):Object(c["createCommentVNode"])("",!0),i.docinfo.owner_id!=n.store.state.account.id?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:3,onClick:t[13]||(t[13]=function(e){return a.addsharemelink()}),type:"warning",size:"small",round:""},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("收藏")]})),_:1})):Object(c["createCommentVNode"])("",!0)])])),Object(c["createVNode"])(u,{modelValue:i.sharedocdlg,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.sharedocdlg=e}),"append-to-body":!0,title:"打开文件",size:n.store.state.isMobile?460:600,"close-on-click-modal":!0,"lock-scroll":!1,"show-close":!0,"with-header":!1,"destroy-on-close":!0,direction:n.store.state.isMobile?"btt":"rtl"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",wi,[Object(c["createVNode"])(d,{doc:i.docinfo},null,8,["doc"])])]})),_:1},8,["modelValue","size","direction"])],64)}var Ni,Ci={class:"sharedlgwraper"},xi={style:{"font-size":"14px","padding-bottom":"1em","font-weight":"bold"}},_i={style:{}},Ei={class:"grid-content bg-purple-dark",title:"分享链接"},Bi={class:"share-link",style:{"padding-left":"1em"}},Si=Object(c["createElementVNode"])("span",null,"分享链接: ",-1),zi={key:0},$i=["href"],Di={key:1},Mi={style:{"padding-left":"1em"}},Ti=Object(c["createElementVNode"])("span",null,"版本：",-1),Ii=Object(c["createElementVNode"])("span",{style:{"margin-left":"1em"}},"有效期：",-1),Li={class:"grid-content bg-purple-dark",title:"协作链接"},Ri={class:"share-link",style:{"padding-left":"1em"}},Ui=Object(c["createElementVNode"])("span",null,"协作授权链接:",-1),Ai={key:0},Hi=["href"],Fi={key:1},Pi={style:{"padding-left":"1em"}},Wi=Object(c["createElementVNode"])("span",null,"默认权限：",-1),qi=Object(c["createElementVNode"])("span",null,"有效期：",-1),Ji={class:"el-popover",style:{"padding-left":"2em"}},Xi=Object(c["createElementVNode"])("a",{href:"https://pub.visionon.cn/help/how-share-and-corp/",target:"_blank",style:{"margin-left":"1em"}},"帮助",-1);function Yi(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("View"),s=Object(c["resolveComponent"])("el-icon"),l=Object(c["resolveComponent"])("el-col"),d=Object(c["resolveComponent"])("el-button"),u=Object(c["resolveComponent"])("el-option"),p=Object(c["resolveComponent"])("el-select"),m=Object(c["resolveComponent"])("el-input"),b=Object(c["resolveComponent"])("Share"),f=Object(c["resolveComponent"])("el-radio"),h=Object(c["resolveComponent"])("avatar"),O=Object(c["resolveComponent"])("el-popover"),j=Object(c["resolveComponent"])("el-row");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ci,[Object(c["createElementVNode"])("div",xi,"分享："+Object(c["toDisplayString"])(e.$props.doc.doc_title),1),Object(c["createElementVNode"])("div",_i,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.links,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(j,{key:e,style:{border:"1px solid #ccc",padding:"10px","box-shadow":"5px 5px 5px #888888","border-radius":"10px"}},{default:Object(c["withCtx"])((function(){return["p"==e.access?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])(l,{span:1},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ei,[Object(c["createVNode"])(s,{size:20},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r)]})),_:1})])]})),_:1}),Object(c["createVNode"])(l,{span:20,class:Object(c["normalizeClass"])({"link-unsaved":""!=e.editstatus,"link-delete":"delete"==e.editstatus})},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Bi,[Si,""!=e.url?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",zi,[Object(c["createElementVNode"])("a",{target:"_blank",href:e.url},Object(c["toDisplayString"])(e.urltext),9,$i)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Di,Object(c["toDisplayString"])(e.urltext),1))])]})),_:2},1032,["class"]),Object(c["createVNode"])(l,{span:2},{default:Object(c["withCtx"])((function(){return[""!=e.url?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,onClick:function(t){return a.setcliptext(e.copytext)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("复制")]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:2},1024),Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:21},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Mi,[Ti,Object(c["createVNode"])(p,{modelValue:e.version,"onUpdate:modelValue":function(t){return e.version=t},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.versions,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:e,value:e.file_name},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.file_name),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),Ii,Object(c["createVNode"])(p,{modelValue:e.status,"onUpdate:modelValue":function(t){return e.status=t},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return["period"==e.prestatus?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:0,value:"period",label:e.expiretext},null,8,["label"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(u,{value:"1d",label:"1天"}),Object(c["createVNode"])(u,{value:"7d",label:"7天"}),Object(c["createVNode"])(u,{value:"1m",label:"1月"}),Object(c["createVNode"])(u,{value:"open",label:"无截止期"}),Object(c["createVNode"])(u,{value:"close",label:"暂停访问"})]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])]})),_:2},1024),Object(c["createVNode"])(l,{span:2},{default:Object(c["withCtx"])((function(){return["delete"!=e.editstatus?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("删除")]})),_:2},1032,["onClick"])):(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:1,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("恢复")]})),_:2},1032,["onClick"]))]})),_:2},1024),Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:21,style:{"padding-bottom":"10px","padding-left":"1em","padding-top":"10px"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{size:"small",modelValue:e.desc,"onUpdate:modelValue":function(t){return e.desc=t},autosize:{minRows:2},type:"textarea",placeholder:"备注信息",maxlength:"80","show-word-limit":"",onChange:function(t){return a.linkchanged(e)}},{prepend:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("备注")]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:2},1024)],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createVNode"])(l,{span:1},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Li,[Object(c["createVNode"])(s,{size:20},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(b)]})),_:1})])]})),_:1}),Object(c["createVNode"])(l,{span:20,class:Object(c["normalizeClass"])({"link-unsaved":""!=e.editstatus,"link-delete":"delete"==e.editstatus})},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ri,[Ui,""!=e.url?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ai,[Object(c["createElementVNode"])("a",{target:"_blank",href:e.url},Object(c["toDisplayString"])(e.urltext),9,Hi)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Fi,Object(c["toDisplayString"])(e.urltext),1))])]})),_:2},1032,["class"]),Object(c["createVNode"])(l,{span:2},{default:Object(c["withCtx"])((function(){return[""!=e.url?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,onClick:function(t){return a.setcliptext(e.copytext)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("复制")]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:2},1024),Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:21},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Pi,[Wi,Object(c["createVNode"])(f,{modelValue:e.access,"onUpdate:modelValue":function(t){return e.access=t},label:"r",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("只读")]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),Object(c["createVNode"])(f,{modelValue:e.access,"onUpdate:modelValue":function(t){return e.access=t},label:"w",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("编辑")]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),qi,Object(c["createVNode"])(p,{modelValue:e.status,"onUpdate:modelValue":function(t){return e.status=t},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e)}},{default:Object(c["withCtx"])((function(){return["period"==e.prestatus?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:0,value:"period",label:e.expiretext},null,8,["label"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(u,{value:"1d",label:"1天"}),Object(c["createVNode"])(u,{value:"3d",label:"3天"}),Object(c["createVNode"])(u,{value:"hangauth",label:"暂停授权(已授权可访问)"}),Object(c["createVNode"])(u,{value:"close",label:"暂停访问"})]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])]})),_:2},1024),Object(c["createVNode"])(l,{span:2},{default:Object(c["withCtx"])((function(){return["delete"!=e.editstatus?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("删除")]})),_:2},1032,["onClick"])):(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:1,onClick:function(t){return a.toggledeletesharelink(e)},type:"primary",plain:"",class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("恢复")]})),_:2},1032,["onClick"]))]})),_:2},1024),Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:21,style:{"padding-bottom":"10px","padding-left":"1em","padding-top":"10px"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{size:"small",modelValue:e.desc,"onUpdate:modelValue":function(t){return e.desc=t},autosize:{minRows:2},type:"textarea",placeholder:"备注信息",maxlength:"80","show-word-limit":"",onChange:function(t){return a.linkchanged(e)}},{prepend:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("备注")]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:2},1024),Object(c["createVNode"])(l,{span:2}),Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:21,style:{"padding-bottom":"10px","padding-right":"1em","text-align":"right"}},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.auths,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:e},[Object(c["createVNode"])(h,{userid:e.account_id},null,8,["userid"])])})),128))]})),_:2},1024),Object(c["createVNode"])(l,{span:2},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{placement:"left-start",title:"授权列表",width:260,trigger:"click",style:{"padding-bottom":"2em"}},{reference:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(d,{onClick:function(t){return e.authdlg=!0},class:"link-button"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("授权")]})),_:2},1032,["onClick"])]})),default:Object(c["withCtx"])((function(){return[e.authdlg?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(e.auths,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:t},[Object(c["createVNode"])(h,{userid:t.account_id,showname:!0},null,8,["userid"]),Object(c["createElementVNode"])("span",Ji,Object(c["toDisplayString"])(t.auth_date.substring(5,10)),1),Object(c["createVNode"])(p,{modelValue:t.access,"onUpdate:modelValue":function(e){return t.access=e},class:"m-2",size:"small",onChange:function(t){return a.linkchanged(e,!0)},style:{width:"60px","padding-left":"2em"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{value:"r",label:"只读"}),Object(c["createVNode"])(u,{value:"w",label:"编辑"}),Object(c["createVNode"])(u,{value:"n",label:"暂停"})]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])})),128)):Object(c["createCommentVNode"])("",!0)]})),_:2},1024)]})),_:2},1024)],64))]})),_:2},1024)})),128))]),Object(c["createVNode"])(j,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:1}),Object(c["createVNode"])(l,{span:16},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(d,{onClick:t[0]||(t[0]=function(e){return a.addsharelink("p")})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("新建分享")]})),_:1}),Object(c["createVNode"])(d,{onClick:t[1]||(t[1]=function(e){return a.addsharelink("w")})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("新建协作授权")]})),_:1}),Xi]})),_:1}),Object(c["createVNode"])(l,{span:4,style:{"text-align":"right"}},{default:Object(c["withCtx"])((function(){return[a.sharelinknotsave?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,onClick:t[2]||(t[2]=function(e){return a.savesharelink()}),type:"warning"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("保存")]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])}var Ki={name:"DocShare",data:function(){return{docid:this.$props.doc.id,links:[],versions:[],size:0,updated_at:"",docinfo:{}}},setup:function(){var e=Object(w["b"])(),t=Object(y["c"])();return{router:t,store:e}},props:["doc"],components:(Ni={Avatar:Oo},Object(X["a"])(Ni,jo["a"].name,jo["a"]),Object(X["a"])(Ni,go["a"].name,go["a"]),Object(X["a"])(Ni,Ke["a"].name,Ke["a"]),Object(X["a"])(Ni,vo["a"].name,vo["a"]),Object(X["a"])(Ni,ko["b"].name,ko["b"]),Object(X["a"])(Ni,ko["a"].name,ko["a"]),Object(X["a"])(Ni,ne["a"].name,ne["a"]),Object(X["a"])(Ni,ce["a"].name,ce["a"]),Object(X["a"])(Ni,Vo["a"].name,Vo["a"]),Object(X["a"])(Ni,"Share",No["a"]),Object(X["a"])(Ni,"View",Co["a"]),Ni),computed:{sharelinknotsave:function(){var e=!1;return this.links.forEach((function(t){"change"!=t.editstatus&&"add"!=t.editstatus&&"delete"!=t.editstatus&&"force"!=t.editstatus||(e=!0)})),e}},mounted:function(){this.sharedoc()},unmounted:function(){this.$bus.off("context-menu-show",this.context_show_listener)},methods:{sharedoc:function(){this.$ana.la(this.$props.doc.id,"docitem.share.opendlg");var e={doc_id:this.$props.doc.id},t=this;Ie.get("/api/docs/links",{params:e}).then((function(e){for(var o in t.links=e.data.links,t.versions=e.data.versions,t.versions)t.versions[o].file_name.startsWith("v_t")&&delete t.versions[o];t.links.forEach((function(e){e.editstatus="",t.preparelinkdata(e)}))})).catch((function(e){Object($e["a"])({message:"获取共享链接失败，请稍后再试，错误原因:"+e.message,type:"error",showClose:!0})}))},preparelinkdata:function(e){var t=this,o=(new Date,null==e.expire?Date.now():Date.parse(e.expire));e.pre={status:e.status,version:e.version,access:e.access,desc:e.desc,expire:e.expire},e.prestatus=e.status,e.expiretext="当前设置:"+t.$utils.beautifytime(o/1e3)+"过期";var n="";switch(e.status){case"open":n="无截至期";break;case"close":n="链接无效，已设置为禁止访问";break;case"hangauth":n="已设置为暂停授权";break;default:n=o<Date.now()?"授权已过期，请重新设置有效期！！！":t.$utils.beautifytime(o/1e3)+"过期，请及时访问（请登录/注册后再打开此链接）\n注册账户："+window.origin+"/signin\n文档地址:"}e.authdlg=!1,"p"==e.access?"add"==e.editstatus?(e.url="",e.urltext="新加项，保存后创建链接",e.copytext="保存后创建链接"):(e.url=window.origin+"/r/"+t.docid+"/"+e.link+"/"+e.version+"?scale=1",e.urltext="/r/"+t.docid+"/"+e.link+"/"+e.version,e.copytext='您的好友 "'+this.store.state.account.nick_name+'" 通过VisionOn向您分享 "'+t.$props.doc.doc_title+'" , '+n+"\n"+window.origin+"/r/"+t.docid+"/"+e.link+"/"+e.version+"?scale=1"):"add"==e.editstatus?(e.url="",e.urltext="新加项，保存后创建链接",e.copytext="保存后创建链接"):(e.url=window.origin+"/s/"+t.docid+"/"+e.link,e.urltext="/s/"+t.docid+"/"+e.link,e.copytext='您的好友 "'+this.store.state.account.nick_name+'" 通过VisionOn邀请您协作编辑 "'+t.$props.doc.doc_title+'" , '+n+"\n"+window.origin+"/s/"+t.docid+"/"+e.link)},linkchanged:function(e,t){"delete"!=e.editstatus&&"add"!=e.editstatus&&"force"!=e.editstatus&&(t?e.editstatus="force":e.pre.status==e.status&&e.pre.version==e.version&&e.pre.access==e.access&&e.pre.desc==e.desc&&e.pre.expire==e.expire?e.editstatus="":e.editstatus="change")},addsharelink:function(e){var t={link:null,desc:"",access:"",editstatus:"add",url:"",expire:Date.now()};t.access=e;var o=new Date;t.created=o.toISOString(),"p"==e?(t.version="v_latest",t.status="1d"):t.status="1d",this.preparelinkdata(t),this.links.unshift(t),this.$ana.la(this.$props.doc.id,"docitem.share.addsharelink")},toggledeletesharelink:function(e){var t=this;"add"==e.editstatus?this.links.some((function(o,n){if(o==e)return t.links.splice(n,1),!0})):"delete"==e.editstatus?(e.editstatus="change",this.linkchanged(e)):e.editstatus="delete"},savesharelink:function(){var e=[];this.links.forEach((function(t){var o={link:t.link,desc:t.desc,access:t.access,status:t.status,expire:t.expire,created:t.created,version:t.version,auths:t.auths},n=new Date;"1d"==o.status?(o.status="period",n.setDate(n.getDate()+1),o.expire=n.toISOString()):"3d"==o.status?(o.status="period",n.setDate(n.getDate()+3),o.expire=n.toISOString()):"7d"==o.status?(o.status="period",n.setDate(n.getDate()+7),o.expire=n.toISOString()):"1m"==o.status?(o.status="period",n.setDate(n.getDate()+31),o.expire=n.toISOString()):"open"!=o.status&&"close"!=o.status&&"hangauth"!=o.status||(n.setDate(n.getDate()+4015),o.expire=n.toISOString()),"delete"!=t.editstatus&&e.push(o)}));var t={doc_id:this.$props.doc.id,links:e},o=this;Ie.post("/api/docs/savelinks",t).then((function(e){Object($e["a"])({message:"保存成功",type:"success",showClose:!0}),o.links=e.data.links,o.links.forEach((function(e){e.editstatus="",o.preparelinkdata(e)}))})).catch((function(e){Object($e["a"])({message:"保存失败"+e.message,type:"error",showClose:!0})})),console.log(this.links)},setcliptext:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}}};n("c922");const Gi=v()(Ki,[["render",Yi]]);var Qi=Gi,Zi={name:"StatusBar",props:["curdoc"],data:function(){return{doc_title:"",docinfo:{},loading:!1,notifymsg:"",iserror:!1,recentupatelist:[],sharedocdlg:!1}},setup:function(){var e=Object(w["b"])(),t=Object(y["c"])();return{router:t,store:e}},components:{Avatar:Oo,ElButton:Ke["a"],ElDrawer:Ge["a"],DocShare:Qi},methods:{commit_change:function(){if(!this.store.state.isDraftMode){if(this.doc_title.trim()!=this.docinfo.doc_title){var e={doc_id:this.docinfo.id,doc_title:this.doc_title.trim()},t=this;Ie.post("/api/docs/updatetitle",e).then((function(e){0==e.data.status?(Object($e["a"])({message:"更改文件名失败，你可能无更改权限",type:"error"}),t.doc_title=t.docinfo.doc_title):(t.docinfo.doc_title=t.doc_title,document.title=t.doc_title,t.store.dispatch("updatedoctitle",t.docinfo))})),this.$ana.la(this.docinfo.id,"docitem.rename","name="+this.doc_title)}this.editing=!1}},opensharedlg:function(){this.store.state.isDraftMode?Object($e["a"])({message:"本地绘图板不支持分享，请打开线上文档进行分享",type:"warning"}):null!=this.docinfo.id&&(this.sharedocdlg=!0)},addsharemelink:function(){this.store.state.isLogin?this.store.dispatch("addsharemelink",{doc_id:this.store.state.curdoc,share_link:this.store.state.sharelink,share_mode:"r",success:function(e){Object($e["a"])(e)}}):Object($e["a"])({message:"您还未注册登录，暂不能收藏，请前往<a href='/account'>【注册/登录】</a>",type:"error",dangerouslyUseHTMLString:!0})},toggle_syncmode:function(){this.$bus.emit("toggle-syn-mode")},updatedoc:function(){this.$bus.emit("doc-update-from-remote")},accessitemtips:function(e){var t=this.$utils.beautifytime(Date.parse(e.created_at)/1e3),o={"drawio.saved":"更改","drawio.focus":"访问"};return t+o[e.action]}},mounted:function(){var e=this;this.$bus.on("img-uploaded",(function(t){e.loading=!1,e.iserror=!1;var o=new Date;e.notifymsg="上传图片 "+o.toLocaleTimeString()})),this.$bus.on("doc-save-failed",(function(t){e.loading=!1,e.iserror=!0,e.notifymsg="文件保存错误:"+t.error.message})),this.$bus.on("doc-title-changed",(function(t){var o=t.doc_id,n=t.doc_title;o==e.docinfo.id&&(e.doc_title=n)})),this.$bus.on("doc-opened",(function(t){var o=t.docid,n={doc_id:o};if(e.store.state.isDraftMode){e.doc_title="V本地绘图板"+o+" 【本地】",document.title=e.doc_title+"-本地模式";var c=localStorage.getItem(".clipboard-libs");return null==c&&(c="general;basic;flowchart;"),void e.$bus.emit("v_refreshlibs",c)}if(!navigator.onLine)return e.store.state.doclist.some((function(t,n){t.id!=o||(e.doc_title=t.doc_title)})),void Object($e["a"])({message:"网络离线状态，正使用本地缓存，请在网络恢复后与远程同步",type:"warning"});e.doc_title="loading...",e.docinfo={},e.loading=!1,e.iserror=!1,e.notifymsg="文档打开成功",Ie.get("/api/docs/pubinfo",{params:n}).then((function(t){e.docinfo=t.data.docinfo,e.doc_title=t.data.docinfo.doc_title,document.title=e.doc_title,e.$bus.emit("v_refreshlibs",t.data.docinfo.doc_libs)})).catch((function(t){e.store.state.doclist.some((function(t,n){if(t.id==o)return e.docinfo=t,e.doc_title=t.doc_title,void e.$bus.emit("v_refreshlibs",t.doc_libs)})),Object($e["a"])({message:"获取文档信息失败，正尝试使用本地缓存，请在网络恢复后与远程同步",type:"warning"})})),e.$ana.ral(o,null,10,(function(t){e.recentupatelist=t}))})),this.$bus.on("doc-open-failed",(function(t){e.loading=!1,e.notifymsg="文档打开失败:"+t.error.message,e.iserror=!0})),this.$bus.on("doc-notify-message",(function(t){e.loading=!1,e.notifymsg=t.message,e.iserror=t.iserror}))},computed:{boxwidth:function(){var e=this.doc_title.gblen()+2;return e<6&&(e=8),e>80&&(e=80),e},docchanged:function(){var e=!1,t=this.$props.curdoc;return this.store.state.doclist.length>0&&this.store.state.doclist.some((function(o,n){o.id==t&&(e=o.changed)})),e},issyncmode:function(){return this.store.state.isSyncMode},docneedupdate:function(){return this.store.state.docNeedUpdate},isowndoc:function(){return this.docinfo.owner_id==this.store.state.account.id},hasheadimg:function(){return""!=this.docinfo.wx_headimg}},updated:function(){}};n("1ddc");const ea=v()(Zi,[["render",yi]]);var ta=ea,oa=n("4c02"),na={name:"Vision",data:function(){return{isexpand:!0,panesize:[15,25,60],oldlistpanesize:0,tabname:"doclist",viewmode:"",sortmode:"",sortmodetitle:"",outlinesize:50,islistpopup:!1}},setup:function(){var e=Object(w["b"])(),t=Object(y["c"])();return{router:t,store:e}},components:{Splitpanes:Le["Splitpanes"],Pane:Le["Pane"],Drawio:gt,DocList:Do,SideOperator:ci,StatusBar:ta,ElCard:oa["a"],OutlineView:ti},computed:{testexpand:function(){return this.isexpand},sidebarminsize:function(){var e=this.calcdefaultwidth();return e["min_sidebarsize"]},sidebarmaxsize:function(){var e=this.calcdefaultwidth();return e["max_sidebarsize"]},listtitle:function(){switch(this.store.state.listtype){case"recent":return"最近访问";case"link":return"与我分享";case"create":return"/"==this.store.state.curfolder?"我创建的":this.store.state.foldername;case"recyle":return"回收站";case"visions":return"Vision推荐";case"loading":return"loading"}return""},test_isrecentlist:function(){return"recent"==this.store.state.listtype},test_islinklist:function(){return"link"==this.store.state.listtype},test_iscreatelist:function(){return"create"==this.store.state.listtype},test_isrecylelist:function(){return"recyle"==this.store.state.listtype},test_isvisionslist:function(){return"visions"==this.store.state.listtype},test_isloadinglist:function(){return"loading"==this.store.state.listtype}},methods:{callisttogglestyle:function(){if("undefined"!=typeof this.$refs.visioncontainer&&null!=this.$refs.visioncontainer){var e=this.$refs.sidebarcontainer.clientWidth;this.$refs.listexpanicon.style.left=e-1+"px"}},calcdefaultwidth:function(){if("undefined"==typeof this.$refs.visioncontainer||null==this.$refs.visioncontainer)return{m1:t,m2:o,m3:n,min_listsize:c,collapse_size:r,min_sidebarsize:2,max_sidebarsize:8};var e=this.$refs.visioncontainer.clientWidth;e<300&&(e=400);var t={};t[0]=Math.round(4e5/e)/100,t[1]=0,t[2]=100-t[0]-t[1];var o={};o[0]=Math.round(4e5/e)/100,o[1]=Math.round(3e6/e)/100,o[2]=100-o[0]-o[1];var n={};n[0]=Math.round(14e5/e)/100,n[1]=Math.round(3e6/e)/100,n[2]=100-n[0]-n[1];var c=Math.round(3e6/e)/100,i=Math.round(4e5/e)/100,a=Math.round(14e5/e)/100,r=(i+a)/2;return{m1:t,m2:o,m3:n,min_listsize:c,collapse_size:r,min_sidebarsize:i,max_sidebarsize:a}},panelresizing:function(e){var t=this.calcdefaultwidth();this.isexpand&&e[0].size<=t["collapse_size"]?this.isexpand=!1:!this.isexpand&&(e[0].size>=t["collapse_size"]||e[0].size>=t["max_sidebarsize"])&&(this.isexpand=!0),this.panel=[e[0].size,e[1].size,e[2].size],this.callisttogglestyle()},panelresized:function(e){var t=this.calcdefaultwidth();this.viewmode="",e[1].size>0&&(this.oldlistpanesize=e[1].size),e[1].size<t["min_listsize"]&&(this.oldlistpanesize=t["min_listsize"]),this.isexpand&&e[0].size<=t["collapse_size"]?this.isexpand=!1:!this.isexpand&&(e[0].size>=t["collapse_size"]||e[0].size>=t["max_sidebarsize"])&&(this.isexpand=!0);var o={};o[0]=this.isexpand?t["m3"][0]:t["m1"][0],o[1]=e[1].size,o[2]=100-o[0]-o[1],this.panesize=o,e[0].size=o[0],e[1].size=o[1],e[2].size=o[2],this.$bus.emit("panel-resized",e),this.callisttogglestyle()},adjustoutlineheight:function(){Object(c["nextTick"])((function(){document.getElementsByClassName("doclist")[0].style.height=document.querySelector("#doclistcardid > .el-card").offsetHeight-60+"px",document.getElementsByClassName("outlinecontainer")[0].style.height=document.querySelector("#outlinecardid > .el-card").offsetHeight-30+"px"}))},outlineresized:function(e){this.outlinesize=e[1].size,this.adjustoutlineheight()},outlinesizejust:function(e){"up"==e?this.outlinesize<50?this.outlinesize=50:this.outlinesize=100:this.outlinesize>50?this.outlinesize=50:this.outlinesize=10,this.adjustoutlineheight()},switchviewmode:function(e){if(this.$ana.la("","vison.switchviewmode","viewmode="+e),e!=this.viewmode){var t=this.calcdefaultwidth();0==this.oldlistpanesize&&(this.oldlistpanesize=t["m2"][1]);"m1"==e&&(this.panesize[0]=t["m1"][0],this.panesize[1]=0,this.panesize[2]=t["m1"][2],this.isexpand=!1),"m2"!=e||this.panesize[0]==t["m1"][0]&&this.panesize[1]==this.oldlistpanesize||(this.panesize[0]=t["m1"][0],this.panesize[1]=this.oldlistpanesize,this.panesize[2]=100-this.panesize[0]-this.panesize[1],this.isexpand=!1),"m3"==e&&(this.panesize[0]=t["m3"][0],this.panesize[1]=this.oldlistpanesize,this.panesize[2]=100-this.panesize[0]-this.panesize[1],this.isexpand=!0),this.viewmode=e,localStorage.setItem("vision-viewmode",this.viewmode);var o=this;setTimeout((function(){o.$bus.emit("panel-resized"),o.callisttogglestyle()}),500)}},toggleliststyle_expand:function(){this.store.state.liststyle_expand=!this.store.state.liststyle_expand,localStorage.setItem("vision-liststyle",this.store.state.liststyle_expand?"expand":"collapse")},togglelistpanel:function(){"m1"==this.viewmode?this.switchviewmode("m2"):this.switchviewmode("m1")},pinlistpane:function(){var e=this;if(0!=this.islistpopup){var t=document.getElementById("list-outline-panel");t.style.display="none",t.style.width="0px",t.style.zIndex="0",t.style.left="0px";var o=this;Object(c["nextTick"])((function(){t.style.position="relative",t.style.display="",o.islistpopup=!1,o.togglelistpanel(),e.islistpopup=!1}))}},popuplistpane:function(){var e=document.getElementById("list-outline-panel"),t=this.calcdefaultwidth(),o=(this.$refs.visioncontainer.clientWidth,0==this.oldlistpanesize?t.min_listsize:this.oldlistpanesize);"m1"==this.viewmode&&(e.style.width=o+"%",e.style.position="absolute",e.style.zIndex="1000",e.style.left="60px"),this.islistpopup=!0},popcloselistpane:function(){var e=this;if(0!=this.islistpopup){var t=document.getElementById("list-outline-panel");t.style.display="none",t.style.width="0px",t.style.zIndex="0",t.style.left="0px",setTimeout((function(){t.style.position="relative",t.style.display="",e.islistpopup=!1}),500)}},rotatesortlist:function(){var e=localStorage.getItem("vision-listsortmode");null==e||""==e?e="update":"update"==e?e="create":"create"==e?e="char":"char"==e&&(e="update"),this.sortlist(e)},switchtoparent_depreciated:function(){if("/"==this.store.state.curfolderparentid)this.store.dispatch("switchlist",{listtype:this.store.state.listtype,folder:"/",folderlink:"",foldername:"",parent:""});else{var e=this.store.state.curfolderparentid,t="/api/docs/docinfo",o={doc_id:e,sharelink:""},n=this;Ie.get(t,{params:o}).then((function(e){var t=e.data.docinfo;n.store.dispatch("switchlist",{listtype:n.store.state.listtype,folder:t.id,folderlink:"",foldername:t.doc_title,parent:t.doc_parent})})).catch((function(e){alert("获取目录失败，请稍后再试，错误原因:"+e.message),console.log(e.message)}))}},sortlist:function(e){null!=e&&""!=e&&"update"!=e||(this.sortmode="update",this.sortmodetitle="按更新时间"),"create"==e&&(this.sortmode="create",this.sortmodetitle="按创建时间"),"char"==e&&(this.sortmode="char",this.sortmodetitle="按名称"),this.store.dispatch("sortdoclist",this.sortmode),localStorage.setItem("vision-listsortmode",this.sortmode)}},created:function(){localStorage.getItem("token")?this.store.state.isLogin=!0:this.store.state.isLogin=!1;var e=localStorage.getItem("vision-viewmode");"undefined"!=typeof e&&null!=e&&""!=e||localStorage.setItem("vision-viewmode","m3")},mounted:function(){if(this.store.state.isMobile)this.store.state.liststyle_expand=!1;else{var e=this,t=localStorage.getItem("vision-viewmode"),o=localStorage.getItem("vision-liststyle");this.store.state.liststyle_expand=null==o||""==o||"expand"==o,this.store.state.isLogin||(t="m1"),this.switchviewmode(t);var n=localStorage.getItem("vision-listsortmode");this.sortlist(n),this.$bus.on("pane-switchviewmode",(function(t){e.switchviewmode(t)})),this.$bus.on("pane-switchtab",(function(t){e.tabname!=t&&(e.tabname=t,e.$ana.la("","vison.switchviewmode","tabname="+t))})),this.$bus.on("doc-opened",(function(t){e.adjustoutlineheight()})),window.addEventListener("resize",(function(t){var o=e.calcdefaultwidth();switch(e.viewmode){case"m1":e.panesize=o["m1"];break;case"m2":e.panesize=o["m2"];break;case"m3":e.panesize=o["m3"];break;case"":e.panesize[1]>1?e.panesize=o["m2"]:e.panesize=o["m1"];break}}))}},updated:function(){}};n("44b0");const ca=v()(na,[["render",Be]]);var ia=ca,aa={class:"common-layout"},ra=Object(c["createElementVNode"])("span",null,"账户信息",-1),sa=Object(c["createElementVNode"])("span",null,"账户历史",-1),la=Object(c["createElementVNode"])("span",null,[Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/topics/help"},"帮助信息")],-1),da=Object(c["createElementVNode"])("span",null,[Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/topics/faqs/"},"常见问题")],-1),ua=Object(c["createElementVNode"])("span",null,[Object(c["createElementVNode"])("a",{target:"_blank",href:"https://visionon.cn/p/JwlBvtEWSFapwEF7sBSCsQ/R_eYAjuc/v_latest"},"示例")],-1),pa=Object(c["createElementVNode"])("span",null,[Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/support/user-license/"},"服务协议")],-1),ma={class:"home"},ba=Object(c["createElementVNode"])("div",{class:"helpqrcode"},[Object(c["createElementVNode"])("p",null,"如有任何问题，可微信扫下方二维码进行咨询"),Object(c["createElementVNode"])("img",{src:"/img/visionon_serviceqrcode.png"})],-1);function fa(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("el-menu-item"),s=Object(c["resolveComponent"])("el-menu"),l=Object(c["resolveComponent"])("el-aside"),d=Object(c["resolveComponent"])("PersonalInfo"),u=Object(c["resolveComponent"])("AccountHis"),p=Object(c["resolveComponent"])("el-main"),m=Object(c["resolveComponent"])("el-container");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",aa,[Object(c["createVNode"])(m,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{width:"10%"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s,{"default-active":"1",class:"el-menu-vertical-demo",router:"true",onOpen:e.handleOpen,onClose:e.handleClose},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{index:"/account"},{default:Object(c["withCtx"])((function(){return[ra]})),_:1}),Object(c["createVNode"])(r,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",{onClick:t[0]||(t[0]=function(e){return a.goAnchor("toupviplevel")})},"升级权益")]})),_:1}),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0,index:"/account/his"},{default:Object(c["withCtx"])((function(){return[sa]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(r,null,{default:Object(c["withCtx"])((function(){return[la]})),_:1}),Object(c["createVNode"])(r,null,{default:Object(c["withCtx"])((function(){return[da]})),_:1}),Object(c["createVNode"])(r,null,{default:Object(c["withCtx"])((function(){return[ua]})),_:1}),Object(c["createVNode"])(r,null,{default:Object(c["withCtx"])((function(){return[pa]})),_:1})]})),_:1},8,["onOpen","onClose"])]})),_:1}),Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",ma,["Account"==n.router.currentRoute.value.name?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,msg:"Welcome to Vision"})):Object(c["createCommentVNode"])("",!0),"AccountHis"==n.router.currentRoute.value.name?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:1,msg:"Welcome to Vision"})):Object(c["createCommentVNode"])("",!0)]),ba]})),_:1})]})),_:1})])}var ha=function(e){return Object(c["pushScopeId"])("data-v-02ab6f77"),e=e(),Object(c["popScopeId"])(),e},Oa={key:0},ja={key:1,style:{align:"center"}},ga={style:{color:"#5b89fe"}},va={style:{"padding-top":"1em"}},ka={style:{color:"#5b89fe"}},Va=ha((function(){return Object(c["createElementVNode"])("p",{style:{color:"#be8c3c","font-size":"12px"}},"注：剪贴板内容在操作系统升级、浏览器升级中可能丢失，请不要依赖其存储重要内容，防止丢失",-1)})),wa={class:"dialog-footer"},ya={class:"personal-container"},Na={class:"personal-info-wrapper"},Ca={class:"personal-info"},xa=["src"],_a={key:0,class:"enter-vip-link"},Ea={class:"enter-vip-text"},Ba={class:"account-name"},Sa={key:1,class:"credit-info"},za={class:"credit-info-wrapper"},$a={class:"enter-vip-text"},Da={style:{"font-size":"18px"}},Ma={style:{"font-size":"18px"}},Ta={class:"credit-detail"},Ia={style:{padding:"1em"}},La=ha((function(){return Object(c["createElementVNode"])("div",null,"当前权益:",-1)})),Ra=["innerHTML"],Ua={key:2,class:"credit-info"},Aa={class:"credit-info-wrapper",style:{margin:"auto","padding-left":"0em"}},Ha=ha((function(){return Object(c["createElementVNode"])("div",{class:"enter-vip-text",style:{"text-align":"center"}},[Object(c["createTextVNode"])("当前 "),Object(c["createElementVNode"])("span",{style:{"font-size":"18px"}},"未登录")],-1)})),Fa={class:"credit-detail"},Pa={style:{padding:"1em"}},Wa=ha((function(){return Object(c["createElementVNode"])("div",null,"当前权益:",-1)})),qa=["innerHTML"],Ja={key:3,class:"operate-area"},Xa=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"回到应用",-1)})),Ya=[Xa],Ka=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"注册/登录 VisionOn",-1)})),Ga=[Ka],Qa={key:4,class:"operate-area"},Za=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"回到应用",-1)})),er=[Za],tr=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"登出",-1)})),or=[tr],nr=ha((function(){return Object(c["createElementVNode"])("h2",null,"推荐码",-1)})),cr={style:{padding:"1em","line-height":"1.5em"}},ir=ha((function(){return Object(c["createElementVNode"])("br",null,null,-1)})),ar=ha((function(){return Object(c["createElementVNode"])("br",null,null,-1)})),rr=ha((function(){return Object(c["createElementVNode"])("h2",null," 升级权益 ",-1)})),sr=ha((function(){return Object(c["createElementVNode"])("p",null," 希望您已验证VisionOn能显著提升您的效率，或为支持我们继续创新而升级权益",-1)})),lr={key:0,class:"credit-area",id:"toupviplevel"},dr={class:"credit-item"},ur={class:"credit-icon"},pr=ha((function(){return Object(c["createElementVNode"])("p",{class:"title"},"注册用户",-1)})),mr={class:"detail"},br=["innerHTML"],fr=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"免费注册",-1)})),hr=[fr],Or={class:"credit-item"},jr={class:"credit-icon"},gr=ha((function(){return Object(c["createElementVNode"])("p",{class:"title",style:{color:"green"}},"VIP用户",-1)})),vr={class:"detail"},kr=["innerHTML"],Vr={class:"price-list"},wr=["disabled"],yr=ha((function(){return Object(c["createElementVNode"])("label",{for:"vip-3m"},"1季   28元",-1)})),Nr=["disabled"],Cr=ha((function(){return Object(c["createElementVNode"])("label",{for:"vip-12m"},"1年   88元",-1)})),xr=["disabled"],_r=ha((function(){return Object(c["createElementVNode"])("label",{for:"vip-36m"},"3年 188元",-1)})),Er=["disabled"],Br=ha((function(){return Object(c["createElementVNode"])("label",{for:"vip-60m"},"5年 288元",-1)})),Sr={class:"credit-item"},zr={class:"credit-icon"},$r=ha((function(){return Object(c["createElementVNode"])("p",{class:"title",style:{color:"#FFA62F"}},"SVIP用户",-1)})),Dr={class:"detail"},Mr=["innerHTML"],Tr={class:"price-list"},Ir=["disabled"],Lr=ha((function(){return Object(c["createElementVNode"])("label",{for:"svip-3m"},"1季   48元",-1)})),Rr=["disabled"],Ur=ha((function(){return Object(c["createElementVNode"])("label",{for:"svip-12m"},"1年 138元",-1)})),Ar=["disabled"],Hr=ha((function(){return Object(c["createElementVNode"])("label",{for:"svip-36m"},"3年 288元",-1)})),Fr=["disabled"],Pr=ha((function(){return Object(c["createElementVNode"])("label",{for:"svip-60m"},"5年 388元",-1)})),Wr={class:"credit-item"},qr={class:"credit-icon"},Jr=ha((function(){return Object(c["createElementVNode"])("p",{class:"title",style:{color:"#333"}},"XVIP用户",-1)})),Xr={class:"detail"},Yr=["innerHTML"],Kr={class:"price-list"},Gr=["disabled"],Qr=ha((function(){return Object(c["createElementVNode"])("label",{for:"xvip-3m"},"1季   68元",-1)})),Zr=["disabled"],es=ha((function(){return Object(c["createElementVNode"])("label",{for:"xvip-12m"},"1年 188元",-1)})),ts=["disabled"],os=ha((function(){return Object(c["createElementVNode"])("label",{for:"xvip-36m"},"3年 388元",-1)})),ns=["disabled"],cs=ha((function(){return Object(c["createElementVNode"])("label",{for:"xvip-60m"},"5年 488元",-1)})),is={key:1,class:"pay-area"},as={class:"pay-area-wrapper"},rs=ha((function(){return Object(c["createElementVNode"])("span",null,"注:您原有的权益的剩余时间，将以VIP/SVIP/XVIP 1/2/3的时间折算，增加到当前购买权益的时间中",-1)})),ss=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"升级权益",-1)})),ls=[ss],ds={key:2,class:"pay-area"},us={class:"pay-area-wrapper"},ps=ha((function(){return Object(c["createElementVNode"])("span",null,"注:您原有的权益的剩余时间，将以VIP/SVIP/XVIP 1/2/3的时间折算，增加到当前购买权益的时间中",-1)})),ms={key:0},bs=["src"],fs=ha((function(){return Object(c["createElementVNode"])("span",{style:{"line-height":"2em","font-size":"18px"}},"微信扫码支付",-1)})),hs={key:3,class:"credit-crea"},Os={class:"credit-info"},js=ha((function(){return Object(c["createElementVNode"])("h2",null,"权限升级完成",-1)})),gs={class:"credit-info"},vs={class:"credit-info-wrapper",style:{padding:"0","text-align":"center"}},ks={class:"enter-vip-text"},Vs={class:"credit-detail"},ws=ha((function(){return Object(c["createElementVNode"])("div",null,"当前权益:",-1)})),ys=["innerHTML"],Ns=ha((function(){return Object(c["createElementVNode"])("span",{calss:"operate-btn-text operate-create-text"},"继续Vision",-1)})),Cs=[Ns],xs=ha((function(){return Object(c["createElementVNode"])("div",{class:"pay-area-wrapper"},null,-1)}));function _s(e,t,o,n,i,a){var r=this,s=Object(c["resolveComponent"])("font-awesome-icon"),l=Object(c["resolveComponent"])("el-table-column"),d=Object(c["resolveComponent"])("el-link"),u=Object(c["resolveComponent"])("el-table"),p=Object(c["resolveComponent"])("el-col"),m=Object(c["resolveComponent"])("el-button"),b=Object(c["resolveComponent"])("el-row"),f=Object(c["resolveComponent"])("el-dialog"),h=Object(c["resolveComponent"])("el-card");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(f,{modelValue:i.showLogoutDialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.showLogoutDialog=e}),title:"登出账户确认",width:"40%",center:""},{footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",wa,[Object(c["createVNode"])(b,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{span:2}),Object(c["createVNode"])(p,{span:10},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{onClick:t[0]||(t[0]=function(e){return a.dologout()}),type:"primary"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("确认登出")]})),_:1})]})),_:1}),Object(c["createVNode"])(p,{span:10},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{onClick:t[1]||(t[1]=function(e){return i.showLogoutDialog=!1})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("  取消  ")]})),_:1})]})),_:1}),Object(c["createVNode"])(p,{span:2})]})),_:1})])]})),default:Object(c["withCtx"])((function(){return[i.unsaveddoclist.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Oa,[Object(c["createElementVNode"])("p",null,[Object(c["createVNode"])(s,{icon:["fas","exclamation-circle"],style:{"padding-right":"1em",color:"rgb(255,166,47)","font-size":"16px"}}),Object(c["createTextVNode"])("下列文档还未在线保存，登出将丢失内容")])])):Object(c["createCommentVNode"])("",!0),i.unsaveddoclist.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ja,[Object(c["createVNode"])(u,{data:i.unsaveddoclist,style:{width:"100%","padding-top":"1em"},"show-header":!1,"max-height":"260"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{prop:"doc_title",label:"文档",style:{width:"80%"}},{default:Object(c["withCtx"])((function(e){return[Object(c["createElementVNode"])("span",ga,Object(c["toDisplayString"])(e.row.doc_title),1)]})),_:1}),Object(c["createVNode"])(l,{prop:"doc_url",label:"文档",width:"80"},{default:Object(c["withCtx"])((function(e){return[Object(c["createVNode"])(d,{href:e.row.doc_url,target:"_blank",type:"primary",underline:!0,title:"新页签打开"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("[打开]")]})),_:2},1032,["href"])]})),_:1})]})),_:1},8,["data"])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",va,[Object(c["createElementVNode"])("p",null,[Object(c["createVNode"])(s,{icon:["fas","exclamation-circle"],style:{"padding-right":"1em",color:"rgb(255,166,47)","font-size":"16px"}}),Object(c["createTextVNode"])("登出将清空本地绘图板")]),Object(c["createVNode"])(u,{data:i.clipboardList,style:{width:"100%","padding-top":"1em"},"show-header":!1},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{prop:"doc_title",label:"文档",style:{width:"80%"}},{default:Object(c["withCtx"])((function(e){return[Object(c["createElementVNode"])("span",ka,Object(c["toDisplayString"])(e.row.doc_title),1)]})),_:1}),Object(c["createVNode"])(l,{prop:"doc_url",label:"文档",width:"80"},{default:Object(c["withCtx"])((function(e){return[Object(c["createVNode"])(d,{href:e.row.doc_url,target:"_blank",type:"primary",underline:!0,title:"新页签打开"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("[打开]")]})),_:2},1032,["href"])]})),_:1})]})),_:1},8,["data"]),Va])]})),_:1},8,["modelValue"]),Object(c["createElementVNode"])("div",ya,[Object(c["createVNode"])(b,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])((function(){return["listproduct"==i.opmode?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:0},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Na,[Object(c["createElementVNode"])("div",Ca,[Object(c["createElementVNode"])("img",{class:"own-photo",src:a.avatar},null,8,xa)]),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",_a,[Object(c["createElementVNode"])("div",Ea,[Object(c["createVNode"])(s,{icon:["fas","user-circle"],style:{}}),Object(c["createElementVNode"])("span",Ba,Object(c["toDisplayString"])(a.accountname),1)])])):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Sa,[Object(c["createElementVNode"])("div",za,[Object(c["createElementVNode"])("div",$a,[Object(c["createTextVNode"])("您当前为 "),Object(c["createElementVNode"])("span",Da,Object(c["toDisplayString"])(a.creditlevelname),1)]),Object(c["createElementVNode"])("div",null,[Object(c["createTextVNode"])("有效期至 "),Object(c["createElementVNode"])("span",Ma,Object(c["toDisplayString"])(a.creditexpire),1)]),Object(c["createElementVNode"])("div",Ta,[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ia,[La,Object(c["createElementVNode"])("ul",{innerHTML:a.currentcreditdesc},null,8,Ra)])]})),_:1})])])])):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ua,[Object(c["createElementVNode"])("div",Aa,[Ha,Object(c["createElementVNode"])("div",Fa,[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Pa,[Wa,Object(c["createElementVNode"])("ul",{innerHTML:a.creditdesc(0)},null,8,qa)])]})),_:1})])])])),n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ja,[Object(c["createElementVNode"])("div",{class:"operate-btn operate-create toggle",style:{"background-color":"#aaa","margin-left":"10em","margin-right":"2em"},onClick:t[3]||(t[3]=function(e){return r.backtoedit()})},Ya),Object(c["createElementVNode"])("div",{class:"operate-btn operate-create toggle",style:{"margin-left":"2em","margin-right":"10em"},onClick:t[4]||(t[4]=function(e){return r.router.push("/signin")})},Ga)])),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qa,[Object(c["createElementVNode"])("div",{class:"operate-btn operate-create toggle",style:{"margin-left":"10em","margin-right":"2em"},onClick:t[5]||(t[5]=function(e){return r.backtoedit()})},er),Object(c["createElementVNode"])("div",{class:"operate-btn operate-create toggle",style:{"background-color":"#aaa","margin-left":"2em","margin-right":"10em"},onClick:t[6]||(t[6]=function(e){return a.logout()})},or)])):Object(c["createCommentVNode"])("",!0)])]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(b,{key:0},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])((function(){return[nr,Object(c["createElementVNode"])("div",cr,[Object(c["createTextVNode"])("推荐码可以分享给好友，每邀请一位好友注册，将新增一个永久免费文档额度。您目前已经邀请了"+Object(c["toDisplayString"])(a.userinvited)+"个好友，拥有"+Object(c["toDisplayString"])(a.docbaselimit)+"个免费文档权益。",1),ir,Object(c["createTextVNode"])(" 您的推荐码为:"),Object(c["createElementVNode"])("span",{title:"点击拷贝",style:{"font-size":"150%","font-weight":"400"},onClick:t[7]||(t[7]=function(e){return a.setcliptext(a.refercode,"推荐码已拷贝")})},Object(c["toDisplayString"])(a.refercode),1),Object(c["createTextVNode"])(" （点击拷贝)。"),ar,Object(c["createTextVNode"])(" 您的推荐链接为："),Object(c["createElementVNode"])("a",{href:"javascript:void()",onClick:t[8]||(t[8]=function(e){a.setcliptext(a.referurl,"推荐链接已拷贝")})},Object(c["toDisplayString"])(a.referurl),1),Object(c["createTextVNode"])(" （点击拷贝) ")])]})),_:1})]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(b,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])((function(){return[rr,sr,"listproduct"==i.opmode||"barcode"==i.opmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",lr,[Object(c["createVNode"])(b,{gutter:12},{default:Object(c["withCtx"])((function(){return[n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:0,span:8},{default:Object(c["withCtx"])((function(){return[n.store.state.isLogin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:0},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",dr,[Object(c["createElementVNode"])("div",ur,[Object(c["createVNode"])(s,{icon:["fas","user-circle"],style:{color:"darkred","font-size":"48px"}})]),pr,Object(c["createElementVNode"])("p",mr,[Object(c["createElementVNode"])("ul",{innerHTML:a.creditdesc(1)},null,8,br)]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div",{class:"operate-btn",style:{width:"6em","margin-left":"auto"},onClick:t[9]||(t[9]=function(e){return r.router.push("/signin")})},hr)])])]})),_:1}))]})),_:1})),Object(c["createVNode"])(p,{span:8},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Or,[Object(c["createElementVNode"])("div",jr,[Object(c["createVNode"])(s,{icon:["fas","user-circle"],style:{color:"green","font-size":"48px"}})]),gr,Object(c["createElementVNode"])("p",vr,[Object(c["createElementVNode"])("ul",{innerHTML:a.creditdesc(2)},null,8,kr)]),Object(c["createElementVNode"])("p",Vr,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"vip-3m",id:"vip-3m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.productid=e})},null,8,wr),[[c["vModelRadio"],i.productid]]),yr]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"vip-12m",id:"vip-12m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[11]||(t[11]=function(e){return i.productid=e})},null,8,Nr),[[c["vModelRadio"],i.productid]]),Cr]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"vip-36m",id:"vip-36m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[12]||(t[12]=function(e){return i.productid=e})},null,8,xr),[[c["vModelRadio"],i.productid]]),_r]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"vip-60m",id:"vip-60m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.productid=e})},null,8,Er),[[c["vModelRadio"],i.productid]]),Br])])])])]})),_:1})]})),_:1}),Object(c["createVNode"])(p,{span:8},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Sr,[Object(c["createElementVNode"])("div",zr,[Object(c["createVNode"])(s,{icon:["fas","user-circle"],style:{color:"#FFA62F","font-size":"48px"}})]),$r,Object(c["createElementVNode"])("p",Dr,[Object(c["createElementVNode"])("ul",{innerHTML:a.creditdesc(3)},null,8,Mr)]),Object(c["createElementVNode"])("p",Tr,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"svip-3m",id:"svip-3m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.productid=e})},null,8,Ir),[[c["vModelRadio"],i.productid]]),Lr]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"svip-12m",id:"svip-12m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[15]||(t[15]=function(e){return i.productid=e})},null,8,Rr),[[c["vModelRadio"],i.productid]]),Ur]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"svip-36m",id:"svip-36m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[16]||(t[16]=function(e){return i.productid=e})},null,8,Ar),[[c["vModelRadio"],i.productid]]),Hr]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"svip-60m",id:"svip-60m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[17]||(t[17]=function(e){return i.productid=e})},null,8,Fr),[[c["vModelRadio"],i.productid]]),Pr])])])])]})),_:1})]})),_:1}),Object(c["createVNode"])(p,{span:8},{default:Object(c["withCtx"])((function(){return[n.store.state.isLogin?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:0},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Wr,[Object(c["createElementVNode"])("div",qr,[Object(c["createVNode"])(s,{icon:["fas","user-circle"],style:{color:"#333","font-size":"48px"}})]),Jr,Object(c["createElementVNode"])("p",Xr,[Object(c["createElementVNode"])("ul",{innerHTML:a.creditdesc(4)},null,8,Yr)]),Object(c["createElementVNode"])("p",Kr,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"xvip-3m",id:"xvip-3m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[18]||(t[18]=function(e){return i.productid=e})},null,8,Gr),[[c["vModelRadio"],i.productid]]),Qr]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"xvip-12m",id:"xvip-12m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[19]||(t[19]=function(e){return i.productid=e})},null,8,Zr),[[c["vModelRadio"],i.productid]]),es]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"xvip-36m",id:"xvip-36m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[20]||(t[20]=function(e){return i.productid=e})},null,8,ts),[[c["vModelRadio"],i.productid]]),os]),Object(c["createElementVNode"])("li",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"vip-s",value:"xvip-60m",id:"xvip-60m",disabled:"barcode"==i.opmode,"onUpdate:modelValue":t[21]||(t[21]=function(e){return i.productid=e})},null,8,ns),[[c["vModelRadio"],i.productid]]),cs])])])])]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])):Object(c["createCommentVNode"])("",!0),n.store.state.isLogin&&"listproduct"==i.opmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",is,[Object(c["createElementVNode"])("div",as,[rs,Object(c["createElementVNode"])("div",{class:"btn-paid operate-btn operate-create toggle",style:{width:"100px",display:"relative"},onClick:t[22]||(t[22]=function(e){return a.createorder()})},ls)])])):Object(c["createCommentVNode"])("",!0),"barcode"==i.opmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ds,[Object(c["createElementVNode"])("div",us,[ps,"barcode"==i.opmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ms,[Object(c["createElementVNode"])("img",{src:i.wxpayblob,class:"captcha-img"},null,8,bs),fs])):Object(c["createCommentVNode"])("",!0)])])):Object(c["createCommentVNode"])("",!0),"paid"==i.opmode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",hs,[Object(c["createElementVNode"])("div",Os,[js,Object(c["createElementVNode"])("div",gs,[Object(c["createElementVNode"])("div",vs,[Object(c["createElementVNode"])("div",ks,"您现在为 "+Object(c["toDisplayString"])(a.creditlevelname),1),Object(c["createElementVNode"])("div",null,"有效期至 "+Object(c["toDisplayString"])(a.creditexpire),1),Object(c["createElementVNode"])("div",Vs,[ws,Object(c["createElementVNode"])("ul",{innerHTML:a.currentcreditdesc},null,8,ys)]),Object(c["createElementVNode"])("div",{class:"operate-btn operate-create toggle",style:{width:"80px",display:"relative"},onClick:t[23]||(t[23]=function(e){return n.router.push("/v")})},Cs)]),xs])])])):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])],64)}n("8a79");var Es=n("1e49"),Bs=n("def7"),Ss={name:"PersonalInfo",props:{msg:String},components:{ElRow:ne["a"],ElCol:ce["a"],ElCard:oa["a"],ElDialog:Ye["a"],ElButton:Ke["a"],ElTable:Es["a"],ElTableColumn:Es["b"],ElLink:Bs["a"]},setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},data:function(){return{wxpayblob:"",orderid:"",productid:"",opmode:"listproduct",querytimer:{},showLogoutDialog:!1,unsaveddoclist:[],isClearclipboard:!1,clipboardList:[],creditdescmap:{0:"<li>使用<a href='#' onclick='window.location=\"/clipboard\"'>【本地绘图板】</a></li><li>全功能本地做图</li><li>思维导图</li><li>曲面8点</li><li>图片粘贴拷贝</li><li>无水印导出</li>",1:"<li>在线图册3本（邀请好友注册可增加权益）</li><li>图片尺寸<1M</li><li>图片粘贴拷贝</li><li>思维导图</li><li>曲面16点</li><li>导出图片&下载</li><li>文档分享&协作</li>",2:"<li>在线图册数无限制</li><li>图片尺寸<1M</li><li>图片粘贴拷贝</li><li>思维导图</li><li>曲面64点</li><li>版本支持数10</li><li>导出图片</li><li>导出</li><li>文档分享</li>",3:"<li>在线图册数无限制</li><li>图片尺寸<4M </li><li>图片粘贴拷贝</li><li>思维导图</li><li>曲面128点</li><li>版本支持数20</li><li>导出图片&下载</li><li>导出PDF</li><li>文档分享与协作</li>",4:"<li>在线图册数无限制</li><li>图片尺寸<8M </li><li>图片粘贴拷贝</li><li>思维导图</li><li>曲面(无限制)</li><li>版本支持数50</li><li>导出图片&下载</li><li>导出PDF</li><li>文档分享与协作</li>"}}},computed:{accountname:function(){return this.store.state.account.nick_name},refercode:function(){var e=new Date(this.store.state.account.created_at),t=new Date,o=Math.floor((t-e)/6e4);return o<120?120-o+"分钟后生成推荐码":this.store.state.account.refer_code},referurl:function(){var e=new Date(this.store.state.account.created_at),t=new Date,o=Math.floor((t-e)/6e4);return o<120?120-o+"分钟后生成链接":"https://visionon.cn/signin?refercode="+this.refercode},docbaselimit:function(){return this.store.state.account.credit_doc_baselimit},userinvited:function(){return this.store.state.account.credit_user_invited},creditlevelname:function(){switch(this.store.state.account.credit_level){case 0:return"访客";case 1:return"注册用户";case 2:return"VIP用户";case 3:return"SVIP用户";case 4:return"XVIP用户";default:return""}},creditexpire:function(){return this.store.state.account.credit_expiretime?this.store.state.account.credit_expiretime.substring(0,10):""},avatar:function(){return this.store.state.isLogin&&""!=this.store.state.account.wx_headimg?this.store.state.account.wx_headimg:"/default-avatar.png"},currentcreditdesc:function(){var e="<li>您已经邀请了"+this.userinvited+"个好友，拥有"+this.docbaselimit+"个免费文档额度</li>";return e+this.creditdescmap[""+this.store.state.account.credit_level]}},methods:{logout:function(){var e=this,t=[];this.showLogoutDialog=!0,Object.keys(localStorage).forEach((function(e){return e.endsWith("v_latest:changed")?t.push(e):""})),this.unsaveddoclist=[],t.forEach((function(t){if("false"!=localStorage.getItem(t)){var o=t.split(":")[0].split("/")[2],n={doc_title:"loading...",docinfo:{},loading:!1,iserror:!1},c={doc_id:o},i=e;Ie.get("/api/docs/pubinfo",{params:c}).then((function(e){n=e.data.docinfo,n.doc_url="/v/"+n.id,i.unsaveddoclist.push(n),console.log(n.doc_title)})).catch((function(e){}))}})),this.clipboardList=[{doc_title:"本地绘图板",doc_url:"/clipboard"}]},dologout:function(){var e=confirm("再次确认登出吗？将删除本地未保存文档，以及本地绘图板内容");if(0!=e){localStorage.removeItem("token"),this.store.dispatch("reset"),Object.keys(localStorage).forEach((function(e){return e.startsWith("/doc/")?localStorage.removeItem(e):""}));var t=null;xo.openDB("database",2,t,"objects",(function(e){xo.clearData(e,"objects")}));var o=new Date;o.setTime(o.getTime()-1),document.cookie="token=;domain=.visionon.cn;path=/;expires="+o.toGMTString(),document.cookie="token=;path=/;expires="+o.toGMTString(),this.$ana.la("","account.logout"),this.router.push({path:"/signin",force:!0})}},backtoedit:function(){var e=this.store.state.curdoc;null!=e&&"clipboard"!=e?this.router.push({path:"/v/"+e}):this.router.push("/clipboard")},createorder:function(){var e=this.productid;if(console.log("createorder:"+e),""!=this.productid){var t=this,o={product_id:e};return this.opmode="barcode",this.productid=e,this.$ana.la("","order.create.begin","product="+e),Ie.post("/api/account/order",o).then((function(o){t.wxpayblob=o.data.barcode,t.orderid=o.data.order.id,t.querytimer=setInterval((function(){t.queryorderstatus(),console.log("query order status..")}),3e3),t.$ana.la("","order.pay.showbarcode","product="+e)})),!1}alert("请选择VIP级别及权益")},queryorderstatus:function(){this.opmode="barcode";var e=this,t={order_id:e.orderid};return Ie.post("/api/account/orderstatus",t).then((function(t){t.data.paid&&(e.opmode="paid",clearInterval(e.querytimer),e.$ana.la("","order.pay.success","product="+e.productid),e.updateaccountcredit())})),!1},creditdesc:function(e){return this.creditdescmap[""+e]},updateaccountcredit:function(){console.log("update account credit");this.store.dispatch("refreshtoken")},setcliptext:function(e,t){var o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),o.remove(),$e["a"].success(t)}},mounted:function(){var e=this;this.opmode="listproduct",this.$ana.la("","account.info"),"undefined"==typeof this.store.state.account.id||""==this.store.state.account.id.trim()?Ie.get("/api/account/info").then((function(t){var o={islogin:!0,account:t.data.data};e.store.dispatch("setaccountinfo",o)})).catch((function(e){console.log("no login in")})):(e.accountName=this.store.state.account.nick_name,""!=this.store.state.account.wx_headimg&&(this.avatar=this.store.state.account.wx_headimg))}};n("78f6");const zs=v()(Ss,[["render",_s],["__scopeId","data-v-02ab6f77"]]);var $s=zs,Ds={class:"personal-container"},Ms={class:"grid-content ep-bg-purple-light"},Ts={class:"grid-content ep-bg-purple-light"};function Is(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("el-col"),s=Object(c["resolveComponent"])("el-row");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ds,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.accountlogs,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:e.id},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{span:5},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ms,Object(c["toDisplayString"])(e.created_at.substring(0,16)),1)]})),_:2},1024),Object(c["createVNode"])(r,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Ts,Object(c["toDisplayString"])(e.log_message),1)]})),_:2},1024)]})),_:2},1024)})),128))])}var Ls={name:"AccountHis",props:{msg:String},components:{ElRow:ne["a"],ElCol:ce["a"]},setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},data:function(){return{accountlogs:{}}},computed:{},methods:{},mounted:function(){var e=this;"undefined"==typeof this.store.state.account.id&&""==this.store.state.account.id.trim()||Ie.get("/api/account/his").then((function(t){e.accountlogs=t.data.data})).catch((function(e){console.log("no login in")}))}};n("56fa");const Rs=v()(Ls,[["render",Is],["__scopeId","data-v-6c4848de"]]);var Us=Rs,As={name:"AccountInfo",components:{PersonalInfo:$s,AccountHis:Us,ElContainer:oe["b"],ElMain:oe["e"],ElAside:oe["a"],ElMenu:de["a"],ElMenuItem:de["b"]},setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},mounted:function(){document.title="账户信息"},methods:{goAnchor:function(e){var t=document.getElementById(e);t.scrollIntoView()}}};n("e8c4");const Hs=v()(As,[["render",fa]]);var Fs=Hs,Ps={class:"home"};function Ws(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("Signinup"),s=Object(c["resolveComponent"])("WxSigninup");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ps,["SignIn"==n.router.currentRoute.value.name?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0,msg:"Welcome to Your SigninPage "})):Object(c["createCommentVNode"])("",!0),"WxSignIn"==n.router.currentRoute.value.name?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,msg:"Welcome to Your SigninPage ",mode:"signin"})):Object(c["createCommentVNode"])("",!0),"WxGongZhongSignIn"==n.router.currentRoute.value.name?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:2,msg:"Welcome to Your SigninPage ",mode:"wxgz"})):Object(c["createCommentVNode"])("",!0),"WxBind"==n.router.currentRoute.value.name?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:3,msg:"Welcome to Your SigninPage ",mode:"wxbind"})):Object(c["createCommentVNode"])("",!0)])}var qs={class:"bd"},Js={class:"login-main"},Xs={class:"login-left","data-node":"loginForm"},Ys={class:"row"},Ks=Object(c["createElementVNode"])("span",{class:"login-type-split"},null,-1),Gs={key:0,class:"login-container"},Qs={key:0,style:{"margin-top":"160px","margin-left":"40px"},class:"row row-btn"},Zs={class:"row protocol"},el={class:"login-label",style:{"font-size":"110%"}},tl=Object(c["createElementVNode"])("br",null,null,-1),ol=Object(c["createElementVNode"])("br",null,null,-1),nl=Object(c["createElementVNode"])("label",{class:"login-label"},[Object(c["createElementVNode"])("input",{id:"protocol",type:"CHECKBOX",class:"login-checkbox",checked:"checked"}),Object(c["createTextVNode"])("我已阅读、同意Vision"),Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/support/user-license/"},"《服务条款》"),Object(c["createTextVNode"])("、"),Object(c["createElementVNode"])("a",{target:"_blank",href:"https://pub.visionon.cn/support/privacy/"},"《隐私政策》")],-1),cl={key:1,class:"login-container"},il={class:"row text-row","data-node":"accountInput",style:{"padding-top":"20px"}},al={class:"row text-row"},rl=["src"],sl={class:"row text-row","data-node":"verifyCodeBox"},ll={key:0,class:"row text-error"},dl={key:1,class:"row text-success"},ul={class:"row row-btn"},pl=Object(c["createStaticVNode"])('<div class="row protocol"><label class="login-label"><span style="color:red;">暂不支持手机号注册，只支持原有账户登录</span></label><br><br><label class="login-label"><input id="protocol" type="CHECKBOX" class="login-checkbox" checked="checked">我已阅读、同意Vision<a target="_blank" href="https://pub.visionon.cn/support/user-license/">《服务条款》</a>、<a target="_blank" href="https://pub.visionon.cn/support/privacy/">《隐私政策》</a></label></div>',1),ml=Object(c["createElementVNode"])("div",{class:"login-middle"},null,-1);function bl(e,t,o,n,i,a){var r=Object(c["resolveComponent"])("wxlogin");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",qs,[Object(c["createElementVNode"])("div",Js,[Object(c["createElementVNode"])("form",Xs,[Object(c["createElementVNode"])("div",Ys,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["login-type","wx"==i.logintype?"selected":""]),onClick:t[0]||(t[0]=function(e){return a.switchlogintype("wx")})},"微信注册/登录",2),Ks,Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["login-type","mobile"==i.logintype?"selected":""]),onClick:t[1]||(t[1]=function(e){return a.switchlogintype("mobile")})},"手机验证码登录",2)]),"wx"==i.logintype?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Gs,[n.store.state.isInWeiXin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qs,[Object(c["createElementVNode"])("button",{type:"submit",class:"login-btn btn",value:"",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return a.towxgongzhong()}),["prevent"])),style:{"padding-left":"1em","padding-right":"1em",width:"160px"}},"微信登录 VisionOn")])):Object(c["createCommentVNode"])("",!0),n.store.state.isInWeiXin?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,appid:i.wxappid,scope:"snsapi_login",redirect_uri:i.wxredirecturi,state:a.wx_state},null,8,["appid","redirect_uri","state"])),Object(c["createElementVNode"])("div",Zs,[Object(c["createElementVNode"])("label",el,[Object(c["createTextVNode"])("推荐码："),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"refercode","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.refercode=e}),class:"login-refercode",size:"6"},null,512),[[c["vModelText"],i.refercode]]),Object(c["createTextVNode"])(" (可额外获得3个免费文档)")]),tl,ol,nl])])):Object(c["createCommentVNode"])("",!0),"mobile"==i.logintype?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",cl,[Object(c["createElementVNode"])("div",il,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",name:"mobile",placeholder:"请输入手机号","onUpdate:modelValue":t[4]||(t[4]=function(e){return i.mobileNumber=e}),class:"login-mobile text"},null,512),[[c["vModelText"],i.mobileNumber]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"hidden",name:"account_source","onUpdate:modelValue":t[5]||(t[5]=function(e){return i.accountSource=e}),class:"login-mobile text"},null,512),[[c["vModelText"],i.accountSource]])]),Object(c["createElementVNode"])("div",al,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",name:"validatevCode","onUpdate:modelValue":t[6]||(t[6]=function(e){return i.verifyCode=e}),class:"text inputverifycode",placeholder:"请输入图形验证码"},null,512),[[c["vModelText"],i.verifyCode]]),Object(c["createElementVNode"])("img",{onClick:t[7]||(t[7]=Object(c["withModifiers"])((function(){return a.generateCaptcha&&a.generateCaptcha.apply(a,arguments)}),["prevent"])),src:i.blob,class:"captcha-img"},null,8,rl)]),Object(c["createElementVNode"])("div",sl,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",name:"validateCode","onUpdate:modelValue":t[8]||(t[8]=function(e){return i.smsCode=e}),class:"text inputsmscode",placeholder:"请输入短信验证码"},null,512),[[c["vModelText"],i.smsCode]]),Object(c["createElementVNode"])("a",{class:Object(c["normalizeClass"])({tabfocus:!0,getsmscode:!0,waiting:!1}),onClick:t[9]||(t[9]=Object(c["withModifiers"])((function(e){return a.getSmscode()}),["prevent"]))},"获取验证码")]),i.errorMsg?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ll,Object(c["toDisplayString"])(i.errorMsg),1)):Object(c["createCommentVNode"])("",!0),i.successMsg?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",dl,Object(c["toDisplayString"])(i.successMsg),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",ul,[Object(c["createElementVNode"])("button",{type:"submit","data-node":"loginSubmit",class:"login-btn btn",value:"",onClick:t[10]||(t[10]=Object(c["withModifiers"])((function(){return a.login&&a.login.apply(a,arguments)}),["prevent"]))},"登录")]),pl])):Object(c["createCommentVNode"])("",!0)]),ml])])}function fl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=o.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var hl={name:"TopHeader",props:{msg:String},data:function(){var e="https://"+v_clientconfig.origin+"/signin/wx",t="wx640492e742c481e3",o=fl("refercode");return null==o||""==o?o=localStorage.getItem("refercode"):localStorage.setItem("refercode",o),{blob:"",mobileNumber:"",accountSource:"vision-main-mobile",loading:!1,captchaId:"",verifyCode:"",errorMsg:"",successMsg:"",reguuid:"",smsCode:"",logintype:"wx",refercode:o,wxappid:t,wxgongzhongappid:"wx7ff835b9a61c7270",wxredirecturi:encodeURIComponent(e),smssending:!1}},setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},computed:{wx_state:function(){return"220818:"+this.refercode}},mounted:function(){this.generateCaptcha()},components:{wxlogin:Vc["a"]},methods:{generateCaptcha:function(){this.loading=!0;var e=this;Ie.get("/api/account/captchaaa").then((function(t){e.loading=!1,e.captchaId=t.data.captchaId,e.captchacode="",e.blob=t.data.data})).catch((function(t){e.loading=!1,e.$notify({title:500,message:"net work or server error",type:"error"})}))},getSmscode:function(){var e=this;if(this.smssending)alert("已点击获取，请三十秒后重试，不用重复点击");else{this.smssending=!0,window.setTimeout((function(){e.smssending=!1}),3e4);var t={mobileNumber:this.mobileNumber,captchaId:this.captchaId,verifyCode:this.verifyCode};e.errorMsg="",e.successMsg="",Ie.post("/api/account/getsms",t).then((function(t){"success"!=t.data.result?(e.errorMsg=t.data.msg,e.successMsg="",e.smssending=!1,e.generateCaptcha()):(e.errorMsg="",e.reguuid=t.data.reguuid,e.successMsg=t.data.msg)}))}},switchlogintype:function(e){this.logintype=e},towxgongzhong:function(){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7ff835b9a61c7270&redirect_uri=https%3A%2F%2Fvisionon.cn%2Fsignin%2Fwxgz&response_type=code&scope=snsapi_userinfo&state=221023#wechat_redirect"},login:function(){var e=this,t={mobile_number:this.mobileNumber,account_source:this.accountSource,reg_uuid:this.reguuid,sms_code:this.smsCode,invited_code:this.refercode};this.$ana.la("","account.login.begin","mobile="+this.mobileNumber),Ie.post("/api/account/login",t).then((function(t){if(0==t.data.status)e.$ana.la("","account.login.failed","mobile="+e.mobileNumber),e.errorMsg="验证码不匹配("+t.data.message+")",e.successMsg="",e.generateCaptcha(),e.smsCode="",e.verifyCode="";else{var o={islogin:!0,account:t.data.account};e.store.dispatch("setaccountinfo",o),localStorage.setItem("token",t.data.token),localStorage.setItem("nextrefresh",t.data.nextrefresh),document.cookie="token="+t.data.token+";domain=.visionon.cn;path=/;","new"==t.data.action?(e.$ana.la("","account.new.success","number="+e.mobileNumber),e.router.push("/v/"+t.data.firstdoc)):(e.$ana.la("","account.login.success","number="+e.mobileNumber),e.router.push("/v")),e.$bus.emit("account-login")}}))}}};n("fbe8");const Ol=v()(hl,[["render",bl]]);var jl=Ol,gl=function(e){return Object(c["pushScopeId"])("data-v-d69dd202"),e=e(),Object(c["popScopeId"])(),e},vl={class:"bd"},kl={class:"login-main"},Vl={class:"row"},wl={class:"login-type selected"},yl=gl((function(){return Object(c["createElementVNode"])("div",{class:"login-middle"},null,-1)})),Nl=gl((function(){return Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])("1. 账号同步已经完成，建议您保存所有文档后，切换到新的域名下工作。"),Object(c["createElementVNode"])("a",{href:"https://visionon.cn",target:"_blank"},"visionon.cn")],-1)})),Cl=gl((function(){return Object(c["createElementVNode"])("p",null,"2. 当前网址会继续保留到年底，期间可以继续使用",-1)})),xl=gl((function(){return Object(c["createElementVNode"])("p",null," ",-1)})),_l=gl((function(){return Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])("邀请您参与创建VisionOn，VisionOn正在等待您的建议，每个参与者将会为您增加2-5个免费文档的权益。详情请点击 "),Object(c["createElementVNode"])("a",{href:"https://pub-inc.visionon.cn/events/creating-your-visionon/",target:"_blank"},"参与创建VisionOn")],-1)})),El=gl((function(){return Object(c["createElementVNode"])("p",null," ",-1)})),Bl={style:{align:"center"}},Sl=gl((function(){return Object(c["createElementVNode"])("img",{src:"/img/visionon_serviceqrcode.png",style:{width:"60%"}},null,-1)})),zl=gl((function(){return Object(c["createElementVNode"])("p",null," ",-1)})),$l={class:"dialog-footer"};function Dl(e,t,o,n,i,a){var r=this,s=Object(c["resolveComponent"])("font"),l=Object(c["resolveComponent"])("el-button"),d=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",vl,[Object(c["createElementVNode"])("div",kl,[Object(c["createElementVNode"])("div",Vl,[Object(c["createElementVNode"])("span",wl,Object(c["toDisplayString"])(i.title)+"，请不要退出",1)]),yl])]),Object(c["createVNode"])(d,{modelValue:i.showDialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.showDialog=e}),title:"微信账户同步完成",width:"30%",center:""},{footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",$l,[Object(c["createVNode"])(l,{onClick:t[0]||(t[0]=function(e){i.showDialog=!1,r.router.push("/v")})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("关闭")]})),_:1}),Object(c["createVNode"])(l,{type:"primary",onClick:t[1]||(t[1]=function(e){a.tonewsite()})},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("去往新域名VisionOn.cn")]})),_:1})])]})),default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",null,[Nl,Cl,Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])("3. "),Object(c["createVNode"])(s,{color:"blue"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("注：剪切板的内容因是本地存储，您需要手工拷贝")]})),_:1})]),xl,_l,El]),Object(c["createElementVNode"])("div",Bl,[Sl,Object(c["createElementVNode"])("p",null,[Object(c["createVNode"])(s,{color:"blue"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])("扫一扫联系客服参与活动")]})),_:1})]),zl])]})),_:1},8,["modelValue"])],64)}var Ml={name:"WxSigninup",props:{msg:String,mode:String},data:function(){return{errorMsg:"",showDialog:!1,title:"signin"==this.mode?"正在登录":"正在同步账户信息",accountid:""}},setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},mounted:function(){this.login()},components:{ElDialog:Ye["a"],ElButton:Ke["a"]},methods:{tonewsite:function(){window.open("https://visionon.cn")},login:function(){var e=this,t=this.router.currentRoute._rawValue.query.code,o=this.router.currentRoute._rawValue.query.state,n={code:t,state:o};if(this.$ana.la("","account.login.wxredirect",this.mode),"signin"==this.mode||"wxgz"==this.mode){var c="signin"==this.mode?"/api/account/wxlogin":"/api/account/wxgzlogin";Ie.post(c,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(0==t.data.status)Object($e["a"])({message:"微信登录失败("+t.data.message+")，请刷新重试",type:"error",showClose:!0}),e.$ana.la("","account.login.wxfailed","message="+t.data.message);else{var o={token:t.data.token,nextrefresh:t.data.nextrefresh,islogin:!0,account:t.data.account};e.store.dispatch("setaccountinfo",o),localStorage.setItem("token",t.data.token),localStorage.setItem("nextrefresh",t.data.nextrefresh),document.cookie="token="+t.data.token+";domain=.visionon.cn;path=/;","new"==t.data.action?(console.log("register success"),e.router.push("/v/"+t.data.firstdoc),e.$ana.la("","account.new.wxsuccess","account="+t.data.account.nick_name)):(e.router.push("/v"),e.$ana.la("","account.login.wxsuccess","account="+t.data.account.nick_name)),e.$bus.emit("account-login")}}))}"wxbind"==this.mode&&Ie.post("/api/account/wxbind",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(0==t.data.status)Object($e["a"])({message:"微信账号同步失败("+t.data.message+"),请刷新重试",type:"error",showClose:!0}),e.$ana.la("","account.login.wxfailed","wxbind failed message="+t.data.message);else{Object($e["a"])({message:"微信账户同步完成("+t.data.message+")",type:"succcess",showClose:!0});var o={token:t.data.token,nextrefresh:t.data.nextrefresh,islogin:!0,account:t.data.account};e.store.dispatch("setaccountinfo",o),e.accountid=t.data.account.id.substring(12),e.showDialog=!0}}))}}};n("e4b9");const Tl=v()(Ml,[["render",Dl],["__scopeId","data-v-d69dd202"]]);var Il=Tl,Ll={name:"SignIn",components:{Signinup:jl,WxSigninup:Il},setup:function(){var e=Object(y["c"])(),t=Object(w["b"])();return{router:e,store:t}},mounted:function(){document.title="注册/登录"}};const Rl=v()(Ll,[["render",Ws]]);var Ul=Rl,Al=[{path:"/",redirect:"/home/home"},{path:"/home/:content",name:"Home",component:me},{path:"/signin",name:"SignIn",component:Ul},{path:"/signin/wx",name:"WxSignIn",component:Ul},{path:"/signin/wxgz",name:"WxGongZhongSignIn",component:Ul},{path:"/signin/wxbind",name:"WxBind",component:Ul},{path:"/account",name:"Account",component:Fs},{path:"/account/his",name:"AccountHis",component:Fs},{path:"/v/",redirect:"/clipboard",name:"VisionHome"},{path:"/v/:doc",name:"Vision",meta:{keepAlive:!0},component:ia},{path:"/v/:doc/:ver",name:"VisionVersion",meta:{keepAlive:!0},component:ia},{path:"/s/:doc/:link",name:"Share",meta:{keepAlive:!0},component:ia},{path:"/s/:doc/:link/:ver",name:"ShareVersion",meta:{keepAlive:!0},component:ia},{path:"/r/:doc/:link/:ver",name:"ReadShareVersion",meta:{keepAlive:!0},component:ia},{path:"/p/:doc/:link/:ver",name:"PubVersion",meta:{keepAlive:!0},component:ia},{path:"/clipboard",name:"Clipboard",meta:{keepAlive:!0},component:ia},{path:"/clipboard/:ver",name:"ClipboardMore",meta:{keepAlive:!0},component:ia},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Hl=Object(y["a"])({history:Object(y["b"])("/"),routes:Al}),Fl=Hl,Pl=n("ad3d"),Wl=n("ecee"),ql=n("c074"),Jl=n("b702");Wl["c"].add(ql["a"],Jl["a"]);n("5f7a"),n("7986");var Xl=n("1344"),Yl=[],Kl=null;function Gl(e,t,o){if(null==Kl||""==Kl.u){Kl={u:"",l:"",c:"",r:"",settings:{}};var n=localStorage.getItem("V_UC");null!=n&&(Kl=JSON.parse(n))}null==o&&(o=""),Yl.push({uuid:Kl.u,doc_id:e,action:t,content:"l="+Kl.l+"&c="+Kl.c+"&r="+Kl.r+"&"+o}),"undefined"!=typeof LA&&LA.track&&LA.track(t.replace(/\./g,"_"))}function Ql(){if(0!=Yl.length&&navigator.onLine){var e=Yl;Yl=new Array;var t={actions:e};Ie.post("/ana/la",t).catch((function(e){}))}}function Zl(e,t,o,n){var c={docid:e,action:t,limit:o};Ie.get("/ana/ral",{params:c}).then((function(e){var t=e.data.list;t.some((function(e,o){""==e.user_id.trim()&&t.splice(o,1)})),n&&n(t)})).catch((function(e){}))}(function(){window.setInterval(Ql,16e4)})();var ed={la:Gl,ral:Zl};String.prototype.gblen=function(){for(var e=0,t=0;t<this.length;t++)this.charCodeAt(t)>127||94==this.charCodeAt(t)?e+=2:e++;return e},window.VISION_state={};var td=Object(c["createApp"])(T);td.config.globalProperties.$bus=Object(Xl["a"])(),td.config.globalProperties.$utils=S,td.config.globalProperties.$ana=ed,td.config.globalProperties.baseurl="/",td.use(De).use(Fl).component("font-awesome-icon",Pl["a"]).mount("#app")},"56fa":function(e,t,o){"use strict";o("703e")},"58c6":function(e,t,o){},"5c80":function(e,t,o){"use strict";o("8308")},"63d6":function(e,t,o){},"67a1":function(e,t,o){},"67c5":function(e,t,o){"use strict";o("2c41")},"6b0f":function(e,t,o){},"703e":function(e,t,o){},"77e3":function(e,t,o){},"78f6":function(e,t,o){"use strict";o("31f2")},7986:function(e,t,o){},8308:function(e,t,o){},8604:function(e,t,o){"use strict";o("cfab")},"91bd":function(e,t,o){},"9fd2":function(e,t,o){"use strict";o("63d6")},b016:function(e,t,o){"use strict";o("10e9")},bab7:function(e,t,o){"use strict";o("1136")},c922:function(e,t,o){"use strict";o("f487")},cdfe:function(e,t,o){"use strict";o("0dca")},cfab:function(e,t,o){},e4b9:function(e,t,o){"use strict";o("fa04")},e8c4:function(e,t,o){"use strict";o("2bec")},f487:function(e,t,o){},fa04:function(e,t,o){},fae8:function(e,t,o){"use strict";o("58c6")},fbe8:function(e,t,o){"use strict";o("91bd")}});
//# sourceMappingURL=app.cefdd1e3.js.map